<!DOCTYPE html>
<html><head><title>C:\Users\micha\OneDrive\Dokumente\GitHub\matRad\matRadGUI.m</title><STYLE TYPE="text/css"><!--TD{font-family: "Courier New", Courier, monospace; font-size: 10pt;}---></STYLE></head><body><p>(Back to <a href="index.html">index</a>)</p><h1>C:\Users\micha\OneDrive\Dokumente\GitHub\matRad\matRadGUI.m</h1><p style="font-family:'Courier New'"><table>
<tr><th>Line</th><th>Code</th></tr>
<tr><td>1</td><td bgcolor="#FFFFFF">function&nbsp;varargout&nbsp;=&nbsp;matRadGUI(varargin)</td></tr>
<tr><td>2</td><td bgcolor="#FFFFFF">%&nbsp;matRad&nbsp;GUI</td></tr>
<tr><td>3</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>4</td><td bgcolor="#FFFFFF">%&nbsp;call</td></tr>
<tr><td>5</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATRADGUI,&nbsp;by&nbsp;itself,&nbsp;creates&nbsp;a&nbsp;new&nbsp;MATRADGUI&nbsp;or&nbsp;raises&nbsp;the&nbsp;existing</td></tr>
<tr><td>6</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;singleton*.</td></tr>
<tr><td>7</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>8</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;H&nbsp;=&nbsp;MATRADGUI&nbsp;returns&nbsp;the&nbsp;handle&nbsp;to&nbsp;a&nbsp;new&nbsp;MATRADGUI&nbsp;or&nbsp;the&nbsp;handle&nbsp;to</td></tr>
<tr><td>9</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;existing&nbsp;singleton*.</td></tr>
<tr><td>10</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>11</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATRADGUI('CALLBACK',hObject,eventData,handles,...)&nbsp;calls&nbsp;the&nbsp;local</td></tr>
<tr><td>12</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function&nbsp;named&nbsp;CALLBACK&nbsp;in&nbsp;MATRADGUI.M&nbsp;with&nbsp;the&nbsp;given&nbsp;input&nbsp;arguments.</td></tr>
<tr><td>13</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>14</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MATRADGUI('Property','Value',...)&nbsp;creates&nbsp;a&nbsp;new&nbsp;MATRADGUI&nbsp;or&nbsp;raises&nbsp;the</td></tr>
<tr><td>15</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;existing&nbsp;singleton*.&nbsp;&nbsp;Starting&nbsp;from&nbsp;the&nbsp;left,&nbsp;property&nbsp;value&nbsp;pairs&nbsp;are</td></tr>
<tr><td>16</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;applied&nbsp;to&nbsp;the&nbsp;GUI&nbsp;before&nbsp;matRadGUI_OpeningFcn&nbsp;gets&nbsp;called.&nbsp;&nbsp;An</td></tr>
<tr><td>17</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unrecognized&nbsp;property&nbsp;name&nbsp;or&nbsp;invalid&nbsp;value&nbsp;makes&nbsp;property&nbsp;application</td></tr>
<tr><td>18</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stop.&nbsp;&nbsp;All&nbsp;inputs&nbsp;are&nbsp;passed&nbsp;to&nbsp;matRadGUI_OpeningFcn&nbsp;via&nbsp;varargin.</td></tr>
<tr><td>19</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>20</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*See&nbsp;GUI&nbsp;Options&nbsp;on&nbsp;GUIDE's&nbsp;Tools&nbsp;menu.&nbsp;&nbsp;Choose&nbsp;"GUI&nbsp;allows&nbsp;only&nbsp;one</td></tr>
<tr><td>21</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;instance&nbsp;to&nbsp;run&nbsp;(singleton)".</td></tr>
<tr><td>22</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>23</td><td bgcolor="#FFFFFF">%&nbsp;See&nbsp;also:&nbsp;GUIDE,&nbsp;GUIDATA,&nbsp;GUIHANDLES</td></tr>
<tr><td>24</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>25</td><td bgcolor="#FFFFFF">%&nbsp;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</td></tr>
<tr><td>26</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>27</td><td bgcolor="#FFFFFF">%&nbsp;Copyright&nbsp;2015&nbsp;the&nbsp;matRad&nbsp;development&nbsp;team.&nbsp;</td></tr>
<tr><td>28</td><td bgcolor="#FFFFFF">%&nbsp;</td></tr>
<tr><td>29</td><td bgcolor="#FFFFFF">%&nbsp;This&nbsp;file&nbsp;is&nbsp;part&nbsp;of&nbsp;the&nbsp;matRad&nbsp;project.&nbsp;It&nbsp;is&nbsp;subject&nbsp;to&nbsp;the&nbsp;license&nbsp;</td></tr>
<tr><td>30</td><td bgcolor="#FFFFFF">%&nbsp;terms&nbsp;in&nbsp;the&nbsp;LICENSE&nbsp;file&nbsp;found&nbsp;in&nbsp;the&nbsp;top-level&nbsp;directory&nbsp;of&nbsp;this&nbsp;</td></tr>
<tr><td>31</td><td bgcolor="#FFFFFF">%&nbsp;distribution&nbsp;and&nbsp;at&nbsp;https://github.com/e0404/matRad/LICENSES.txt.&nbsp;No&nbsp;part&nbsp;</td></tr>
<tr><td>32</td><td bgcolor="#FFFFFF">%&nbsp;of&nbsp;the&nbsp;matRad&nbsp;project,&nbsp;including&nbsp;this&nbsp;file,&nbsp;may&nbsp;be&nbsp;copied,&nbsp;modified,&nbsp;</td></tr>
<tr><td>33</td><td bgcolor="#FFFFFF">%&nbsp;propagated,&nbsp;or&nbsp;distributed&nbsp;except&nbsp;according&nbsp;to&nbsp;the&nbsp;terms&nbsp;contained&nbsp;in&nbsp;the&nbsp;</td></tr>
<tr><td>34</td><td bgcolor="#FFFFFF">%&nbsp;LICENSE&nbsp;file.</td></tr>
<tr><td>35</td><td bgcolor="#FFFFFF">%</td></tr>
<tr><td>36</td><td bgcolor="#FFFFFF">%&nbsp;%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</td></tr>
<tr><td>37</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>38</td><td bgcolor="#FF0000">matRad_cfg&nbsp;=&nbsp;MatRad_Config.instance();</td></tr>
<tr><td>39</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>40</td><td bgcolor="#FF0000">if&nbsp;matRad_cfg.disableGUI</td></tr>
<tr><td>41</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg.dispInfo('matRad&nbsp;GUI&nbsp;disabled&nbsp;in&nbsp;matRad_cfg!\n');</td></tr>
<tr><td>42</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>43</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>44</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>45</td><td bgcolor="#FF0000">if&nbsp;~isdeployed</td></tr>
<tr><td>46</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRadRootDir&nbsp;=&nbsp;fileparts(mfilename('fullpath'));</td></tr>
<tr><td>47</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;addpath(genpath(matRadRootDir));</td></tr>
<tr><td>48</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>49</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>50</td><td bgcolor="#FF0000">[env,&nbsp;versionString]&nbsp;=&nbsp;matRad_getEnvironment();</td></tr>
<tr><td>51</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>52</td><td bgcolor="#FFFFFF">%&nbsp;abort&nbsp;for&nbsp;octave</td></tr>
<tr><td>53</td><td bgcolor="#FF0000">switch&nbsp;env</td></tr>
<tr><td>54</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'MATLAB'</td></tr>
<tr><td>55</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>56</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'OCTAVE'</td></tr>
<tr><td>57</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg.dispInfo(['matRad&nbsp;GUI&nbsp;not&nbsp;available&nbsp;for&nbsp;'&nbsp;env&nbsp;'&nbsp;'&nbsp;versionString&nbsp;'&nbsp;\n']);</td></tr>
<tr><td>58</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>59</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherwise</td></tr>
<tr><td>60</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg.dispInfo('not&nbsp;yet&nbsp;tested');</td></tr>
<tr><td>61</td><td bgcolor="#FFFFFF">&nbsp;end</td></tr>
<tr><td>62</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>63</td><td bgcolor="#FFFFFF">%&nbsp;Begin&nbsp;initialization&nbsp;code&nbsp;-&nbsp;DO&nbsp;NOT&nbsp;EDIT</td></tr>
<tr><td>64</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;platform&nbsp;specific&nbsp;look&nbsp;and&nbsp;feel</td></tr>
<tr><td>65</td><td bgcolor="#FF0000">if&nbsp;ispc</td></tr>
<tr><td>66</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;lf&nbsp;=&nbsp;'com.sun.java.swing.plaf.windows.WindowsLookAndFeel';</td></tr>
<tr><td>67</td><td bgcolor="#FFFFFF">elseif&nbsp;isunix</td></tr>
<tr><td>68</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;lf&nbsp;=&nbsp;'com.jgoodies.looks.plastic.Plastic3DLookAndFeel';</td></tr>
<tr><td>69</td><td bgcolor="#FFFFFF">elseif&nbsp;ismac</td></tr>
<tr><td>70</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;lf&nbsp;=&nbsp;'com.apple.laf.AquaLookAndFeel';</td></tr>
<tr><td>71</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>72</td><td bgcolor="#FF0000">javax.swing.UIManager.setLookAndFeel(lf);</td></tr>
<tr><td>73</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>74</td><td bgcolor="#FF0000">gui_Singleton&nbsp;=&nbsp;1;</td></tr>
<tr><td>75</td><td bgcolor="#FF0000">gui_State&nbsp;=&nbsp;struct('gui_Name',&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mfilename,&nbsp;...</td></tr>
<tr><td>76</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gui_Singleton',&nbsp;&nbsp;gui_Singleton,&nbsp;...</td></tr>
<tr><td>77</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gui_OpeningFcn',&nbsp;@matRadGUI_OpeningFcn,&nbsp;...</td></tr>
<tr><td>78</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gui_OutputFcn',&nbsp;&nbsp;@matRadGUI_OutputFcn,&nbsp;...</td></tr>
<tr><td>79</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gui_LayoutFcn',&nbsp;&nbsp;[]&nbsp;,&nbsp;...</td></tr>
<tr><td>80</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'gui_Callback',&nbsp;&nbsp;&nbsp;[]);</td></tr>
<tr><td>81</td><td bgcolor="#FF0000">if&nbsp;nargin&nbsp;&amp;&amp;&nbsp;ischar(varargin{1})</td></tr>
<tr><td>82</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;gui_State.gui_Callback&nbsp;=&nbsp;str2func(varargin{1});</td></tr>
<tr><td>83</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>84</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>85</td><td bgcolor="#FF0000">if&nbsp;nargout</td></tr>
<tr><td>86</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;[varargout{1:nargout}]&nbsp;=&nbsp;gui_mainfcn(gui_State,&nbsp;varargin{:});</td></tr>
<tr><td>87</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>88</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;gui_mainfcn(gui_State,&nbsp;varargin{:});</td></tr>
<tr><td>89</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>90</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>91</td><td bgcolor="#FFFFFF">%&nbsp;End&nbsp;initialization&nbsp;code&nbsp;-&nbsp;DO&nbsp;NOT&nbsp;EDIT</td></tr>
<tr><td>92</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>93</td><td bgcolor="#FFFFFF">function&nbsp;handles&nbsp;=&nbsp;resetGUI(hObject,&nbsp;handles,&nbsp;varargin)</td></tr>
<tr><td>94</td><td bgcolor="#FFFFFF">%&nbsp;enable&nbsp;opengl&nbsp;software&nbsp;rendering&nbsp;to&nbsp;visualize&nbsp;linewidths&nbsp;properly</td></tr>
<tr><td>95</td><td bgcolor="#FF0000">if&nbsp;ispc</td></tr>
<tr><td>96</td><td bgcolor="#FF0000">&nbsp;&nbsp;opengl&nbsp;software</td></tr>
<tr><td>97</td><td bgcolor="#FFFFFF">elseif&nbsp;ismac</td></tr>
<tr><td>98</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;%&nbsp;opengl&nbsp;is&nbsp;not&nbsp;supported</td></tr>
<tr><td>99</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>100</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>101</td><td bgcolor="#FFFFFF">%&nbsp;Choose&nbsp;default&nbsp;command&nbsp;line&nbsp;output&nbsp;for&nbsp;matRadGUI</td></tr>
<tr><td>102</td><td bgcolor="#FF0000">handles.output&nbsp;=&nbsp;hObject;</td></tr>
<tr><td>103</td><td bgcolor="#FFFFFF">%show&nbsp;matrad&nbsp;logo</td></tr>
<tr><td>104</td><td bgcolor="#FF0000">axes(handles.axesLogo)</td></tr>
<tr><td>105</td><td bgcolor="#FF0000">[im,&nbsp;~,&nbsp;alpha]&nbsp;=&nbsp;imread('matrad_logo.png');</td></tr>
<tr><td>106</td><td bgcolor="#FF0000">f&nbsp;=&nbsp;image(im);</td></tr>
<tr><td>107</td><td bgcolor="#FF0000">axis&nbsp;equal&nbsp;off</td></tr>
<tr><td>108</td><td bgcolor="#FF0000">set(f,&nbsp;'AlphaData',&nbsp;alpha);</td></tr>
<tr><td>109</td><td bgcolor="#FFFFFF">%&nbsp;show&nbsp;dkfz&nbsp;logo</td></tr>
<tr><td>110</td><td bgcolor="#FF0000">axes(handles.axesDKFZ)</td></tr>
<tr><td>111</td><td bgcolor="#FF0000">[im,&nbsp;~,&nbsp;alpha]&nbsp;=&nbsp;imread('DKFZ_Logo.png');</td></tr>
<tr><td>112</td><td bgcolor="#FF0000">f&nbsp;=&nbsp;image(im);</td></tr>
<tr><td>113</td><td bgcolor="#FF0000">axis&nbsp;equal&nbsp;off;</td></tr>
<tr><td>114</td><td bgcolor="#FF0000">set(f,&nbsp;'AlphaData',&nbsp;alpha);</td></tr>
<tr><td>115</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>116</td><td bgcolor="#FFFFFF">%&nbsp;turn&nbsp;off&nbsp;the&nbsp;datacursormode&nbsp;(since&nbsp;it&nbsp;does&nbsp;not&nbsp;allow&nbsp;to&nbsp;set&nbsp;scrolling</td></tr>
<tr><td>117</td><td bgcolor="#FFFFFF">%&nbsp;callbacks</td></tr>
<tr><td>118</td><td bgcolor="#FF0000">handles.dcm_obj&nbsp;=&nbsp;datacursormode(handles.figure1);</td></tr>
<tr><td>119</td><td bgcolor="#FF0000">set(handles.dcm_obj,'DisplayStyle','window');</td></tr>
<tr><td>120</td><td bgcolor="#FF0000">if&nbsp;strcmpi(get(handles.dcm_obj,'Enable'),'on')</td></tr>
<tr><td>121</td><td bgcolor="#FF0000">&nbsp;&nbsp;set(handles.dcm_obj,'Enable','off');</td></tr>
<tr><td>122</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>123</td><td bgcolor="#FFFFFF">%Add&nbsp;the&nbsp;callback&nbsp;for&nbsp;the&nbsp;datacursor&nbsp;display</td></tr>
<tr><td>124</td><td bgcolor="#FF0000">set(handles.dcm_obj,'UpdateFcn',@dataCursorUpdateFunction);</td></tr>
<tr><td>125</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>126</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;callback&nbsp;for&nbsp;scroll&nbsp;wheel&nbsp;function</td></tr>
<tr><td>127</td><td bgcolor="#FF0000">set(gcf,'WindowScrollWheelFcn',@matRadScrollWheelFcn);</td></tr>
<tr><td>128</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>129</td><td bgcolor="#FFFFFF">%&nbsp;change&nbsp;color&nbsp;of&nbsp;toobar&nbsp;but&nbsp;only&nbsp;the&nbsp;first&nbsp;time&nbsp;GUI&nbsp;is&nbsp;started</td></tr>
<tr><td>130</td><td bgcolor="#FF0000">if&nbsp;handles.initialGuiStart</td></tr>
<tr><td>131</td><td bgcolor="#FF0000">&nbsp;&nbsp;hToolbar&nbsp;=&nbsp;findall(hObject,'tag','uitoolbar1');</td></tr>
<tr><td>132</td><td bgcolor="#FF0000">&nbsp;&nbsp;jToolbar&nbsp;=&nbsp;get(get(hToolbar,'JavaContainer'),'ComponentPeer');</td></tr>
<tr><td>133</td><td bgcolor="#FF0000">&nbsp;&nbsp;jToolbar.setBorderPainted(false);</td></tr>
<tr><td>134</td><td bgcolor="#FF0000">&nbsp;&nbsp;color&nbsp;=&nbsp;java.awt.Color.gray;</td></tr>
<tr><td>135</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;%&nbsp;Remove&nbsp;the&nbsp;toolbar&nbsp;border,&nbsp;to&nbsp;blend&nbsp;into&nbsp;figure&nbsp;contents</td></tr>
<tr><td>136</td><td bgcolor="#FF0000">&nbsp;&nbsp;jToolbar.setBackground(color);</td></tr>
<tr><td>137</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;%&nbsp;Remove&nbsp;the&nbsp;separator&nbsp;line&nbsp;between&nbsp;toolbar&nbsp;and&nbsp;contents</td></tr>
<tr><td>138</td><td bgcolor="#FF0000">&nbsp;&nbsp;warning('off','MATLAB:HandleGraphics:ObsoletedProperty:JavaFrame');</td></tr>
<tr><td>139</td><td bgcolor="#FF0000">&nbsp;&nbsp;jFrame&nbsp;=&nbsp;get(handle(hObject),'JavaFrame');</td></tr>
<tr><td>140</td><td bgcolor="#FF0000">&nbsp;&nbsp;jFrame.showTopSeparator(false);</td></tr>
<tr><td>141</td><td bgcolor="#FF0000">&nbsp;&nbsp;jtbc&nbsp;=&nbsp;jToolbar.getComponents;</td></tr>
<tr><td>142</td><td bgcolor="#FF0000">&nbsp;&nbsp;for&nbsp;idx=1:length(jtbc)</td></tr>
<tr><td>143</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jtbc(idx).setOpaque(false);</td></tr>
<tr><td>144</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jtbc(idx).setBackground(color);</td></tr>
<tr><td>145</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;childIdx&nbsp;=&nbsp;1&nbsp;:&nbsp;length(jtbc(idx).getComponents)</td></tr>
<tr><td>146</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;jtbc(idx).getComponent(childIdx-1).setBackground(color);</td></tr>
<tr><td>147</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>148</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;end</td></tr>
<tr><td>149</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>150</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>151</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>152</td><td bgcolor="#FF0000">set(handles.legendTable,'String',{'no&nbsp;data&nbsp;loaded'});</td></tr>
<tr><td>153</td><td bgcolor="#FFFFFF">%&nbsp;clear&nbsp;&nbsp;VOIPlotFlag</td></tr>
<tr><td>154</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'VOIPlotFlag')</td></tr>
<tr><td>155</td><td bgcolor="#FF0000">&nbsp;&nbsp;handles&nbsp;=&nbsp;rmfield(handles,'VOIPlotFlag');</td></tr>
<tr><td>156</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>157</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>158</td><td bgcolor="#FFFFFF">%seach&nbsp;for&nbsp;availabes&nbsp;machines</td></tr>
<tr><td>159</td><td bgcolor="#FF0000">handles.Modalities&nbsp;=&nbsp;{'photons','protons','carbon'};</td></tr>
<tr><td>160</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:length(handles.Modalities)</td></tr>
<tr><td>161</td><td bgcolor="#FF0000">&nbsp;&nbsp;pattern&nbsp;=&nbsp;[handles.Modalities{1,i}&nbsp;'_*'];</td></tr>
<tr><td>162</td><td bgcolor="#FF0000">&nbsp;&nbsp;if&nbsp;isdeployed</td></tr>
<tr><td>163</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseroot&nbsp;=&nbsp;[ctfroot&nbsp;filesep&nbsp;'matRad'];</td></tr>
<tr><td>164</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;else</td></tr>
<tr><td>165</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;baseroot&nbsp;=&nbsp;fileparts(mfilename('fullpath'));</td></tr>
<tr><td>166</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;end</td></tr>
<tr><td>167</td><td bgcolor="#FF0000">&nbsp;&nbsp;Files&nbsp;=&nbsp;dir([baseroot&nbsp;filesep&nbsp;'basedata'&nbsp;filesep&nbsp;pattern]);</td></tr>
<tr><td>168</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;</td></tr>
<tr><td>169</td><td bgcolor="#FF0000">&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:length(Files)</td></tr>
<tr><td>170</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(Files)</td></tr>
<tr><td>171</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MachineName&nbsp;=&nbsp;Files(j).name(numel(handles.Modalities{1,i})+2:end-4);</td></tr>
<tr><td>172</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(handles,'Machines')</td></tr>
<tr><td>173</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(strcmp(handles.Machines,MachineName))&nbsp;==&nbsp;0</td></tr>
<tr><td>174</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.Machines{size(handles.Machines,2)+1}&nbsp;=&nbsp;MachineName;</td></tr>
<tr><td>175</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>176</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>177</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.Machines&nbsp;=&nbsp;cell(1);</td></tr>
<tr><td>178</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.Machines{1}&nbsp;=&nbsp;MachineName;</td></tr>
<tr><td>179</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>180</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>181</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;end</td></tr>
<tr><td>182</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>183</td><td bgcolor="#FF0000">set(handles.popUpMachine,'String',handles.Machines);</td></tr>
<tr><td>184</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>185</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>186</td><td bgcolor="#FF0000">vChar&nbsp;=&nbsp;get(handles.editGantryAngle,'String');</td></tr>
<tr><td>187</td><td bgcolor="#FF0000">if&nbsp;strcmp(vChar(1,1),'0')&nbsp;&amp;&amp;&nbsp;length(vChar)==6</td></tr>
<tr><td>188</td><td bgcolor="#FF0000">&nbsp;&nbsp;set(handles.editGantryAngle,'String','0');</td></tr>
<tr><td>189</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>190</td><td bgcolor="#FF0000">vChar&nbsp;=&nbsp;get(handles.editCouchAngle,'String');</td></tr>
<tr><td>191</td><td bgcolor="#FF0000">if&nbsp;strcmp(vChar(1,1),'0')&nbsp;&amp;&amp;&nbsp;length(vChar)==3</td></tr>
<tr><td>192</td><td bgcolor="#FF0000">&nbsp;&nbsp;set(handles.editCouchAngle,'String','0')</td></tr>
<tr><td>193</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>194</td><td bgcolor="#FFFFFF">%%&nbsp;</td></tr>
<tr><td>195</td><td bgcolor="#FFFFFF">%&nbsp;handles.State=0&nbsp;&nbsp;&nbsp;no&nbsp;data&nbsp;available</td></tr>
<tr><td>196</td><td bgcolor="#FFFFFF">%&nbsp;handles.State=1&nbsp;&nbsp;&nbsp;ct&nbsp;cst&nbsp;and&nbsp;pln&nbsp;available;&nbsp;ready&nbsp;for&nbsp;dose&nbsp;calculation</td></tr>
<tr><td>197</td><td bgcolor="#FFFFFF">%&nbsp;handles.State=2&nbsp;&nbsp;&nbsp;ct&nbsp;cst&nbsp;and&nbsp;pln&nbsp;available&nbsp;and&nbsp;dij&nbsp;matric(s)&nbsp;are&nbsp;calculated;</td></tr>
<tr><td>198</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ready&nbsp;for&nbsp;optimization</td></tr>
<tr><td>199</td><td bgcolor="#FFFFFF">%&nbsp;handles.State=3&nbsp;&nbsp;&nbsp;plan&nbsp;is&nbsp;optimized</td></tr>
<tr><td>200</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>201</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>202</td><td bgcolor="#FFFFFF">%&nbsp;if&nbsp;plan&nbsp;is&nbsp;changed&nbsp;go&nbsp;back&nbsp;to&nbsp;state&nbsp;1</td></tr>
<tr><td>203</td><td bgcolor="#FFFFFF">%&nbsp;if&nbsp;table&nbsp;VOI&nbsp;Type&nbsp;or&nbsp;Priorities&nbsp;changed&nbsp;go&nbsp;to&nbsp;state&nbsp;1</td></tr>
<tr><td>204</td><td bgcolor="#FFFFFF">%&nbsp;if&nbsp;objective&nbsp;parameters&nbsp;changed&nbsp;go&nbsp;back&nbsp;to&nbsp;state&nbsp;2</td></tr>
<tr><td>205</td><td bgcolor="#FF0000">handles.CutOffLevel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0.01;&nbsp;%&nbsp;relative&nbsp;cut&nbsp;off&nbsp;level&nbsp;for&nbsp;dose&nbsp;vis</td></tr>
<tr><td>206</td><td bgcolor="#FF0000">handles.IsoDose.NewIsoDoseFlag&nbsp;=&nbsp;false;</td></tr>
<tr><td>207</td><td bgcolor="#FF0000">handles.TableChanged&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;false;</td></tr>
<tr><td>208</td><td bgcolor="#FF0000">handles.State&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0;</td></tr>
<tr><td>209</td><td bgcolor="#FF0000">handles.doseOpacity&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0.6;</td></tr>
<tr><td>210</td><td bgcolor="#FF0000">handles.IsoDose.Levels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;0;</td></tr>
<tr><td>211</td><td bgcolor="#FF0000">handles.dispWindow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cell(3,2);&nbsp;%&nbsp;first&nbsp;dimension&nbsp;refers&nbsp;to&nbsp;the&nbsp;selected</td></tr>
<tr><td>212</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>213</td><td bgcolor="#FFFFFF">%&nbsp;do&nbsp;not&nbsp;calculate&nbsp;/&nbsp;suggest&nbsp;isoCenter&nbsp;new&nbsp;by&nbsp;default</td></tr>
<tr><td>214</td><td bgcolor="#FF0000">set(handles.checkIsoCenter,&nbsp;'Value',&nbsp;0);</td></tr>
<tr><td>215</td><td bgcolor="#FF0000">set(handles.editIsoCenter,'Enable','on')</td></tr>
<tr><td>216</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>217</td><td bgcolor="#FFFFFF">%&nbsp;suppose&nbsp;no&nbsp;ct&nbsp;cube&nbsp;in&nbsp;HU&nbsp;is&nbsp;available&nbsp;(because&nbsp;no&nbsp;ct&nbsp;could&nbsp;be&nbsp;available)</td></tr>
<tr><td>218</td><td bgcolor="#FF0000">handles.cubeHUavailable&nbsp;=&nbsp;false;</td></tr>
<tr><td>219</td><td bgcolor="#FFFFFF">%&nbsp;initial&nbsp;startup&nbsp;finished</td></tr>
<tr><td>220</td><td bgcolor="#FF0000">handles.initialGuiStart&nbsp;=&nbsp;false;</td></tr>
<tr><td>221</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);&nbsp;&nbsp;</td></tr>
<tr><td>222</td><td bgcolor="#FFFFFF">%&nbsp;eof&nbsp;resetGUI</td></tr>
<tr><td>223</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>224</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>225</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Initializes&nbsp;the&nbsp;slice&nbsp;slider&nbsp;for&nbsp;the&nbsp;current&nbsp;ct&nbsp;&amp;&nbsp;isocenter&nbsp;(or&nbsp;sets</td></tr>
<tr><td>226</td><td bgcolor="#FFFFFF">%&nbsp;it&nbsp;to&nbsp;default)</td></tr>
<tr><td>227</td><td bgcolor="#FFFFFF">function&nbsp;initViewSliceSlider(handles)</td></tr>
<tr><td>228</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>229</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>230</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>231</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base',&nbsp;'ct');</td></tr>
<tr><td>232</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>233</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Helpers&nbsp;for&nbsp;managing&nbsp;the&nbsp;resolution&nbsp;and&nbsp;Matlab&nbsp;xy&nbsp;permutation</td></tr>
<tr><td>234</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;planePermute&nbsp;=&nbsp;[2&nbsp;1&nbsp;3];</td></tr>
<tr><td>235</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ctRes&nbsp;=&nbsp;[ct.resolution.x&nbsp;ct.resolution.y&nbsp;ct.resolution.z];</td></tr>
<tr><td>236</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;planePermIx&nbsp;=&nbsp;planePermute(handles.plane);</td></tr>
<tr><td>237</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;planeDim&nbsp;=&nbsp;ct.cubeDim(handles.plane);&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>238</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>239</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Try&nbsp;to&nbsp;select&nbsp;the&nbsp;slice&nbsp;from&nbsp;defined&nbsp;isocenter</td></tr>
<tr><td>240</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;try</td></tr>
<tr><td>241</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;evalin('base','exist(''pln'',''var'')')</td></tr>
<tr><td>242</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currPln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>243</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>244</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(currPln.propStf.isoCenter(:))&nbsp;~=&nbsp;0</td></tr>
<tr><td>245</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%currSlice&nbsp;=&nbsp;round((currPln.propStf.isoCenter(1,planePermIx)+ctRes(planePermix)/2)/ctRes(planePermIx))-1;</td></tr>
<tr><td>246</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currSlice&nbsp;=&nbsp;round(currPln.propStf.isoCenter(1,planePermIx)&nbsp;/&nbsp;ctRes(planePermIx));</td></tr>
<tr><td>247</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>248</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currSlice&nbsp;=&nbsp;0;</td></tr>
<tr><td>249</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>250</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>251</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>252</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currSlice&nbsp;=&nbsp;0;&nbsp;%Set&nbsp;to&nbsp;zero&nbsp;for&nbsp;next&nbsp;if</td></tr>
<tr><td>253</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>254</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>255</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%If&nbsp;no&nbsp;isocenter&nbsp;or&nbsp;wrong&nbsp;value,&nbsp;choose&nbsp;central&nbsp;slice</td></tr>
<tr><td>256</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;currSlice&nbsp;&lt;&nbsp;1&nbsp;||&nbsp;currSlice&nbsp;&gt;&nbsp;planeDim</td></tr>
<tr><td>257</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currSlice&nbsp;=&nbsp;ceil(planeDim/2);</td></tr>
<tr><td>258</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>259</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>260</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Min',1,'Max',planeDim,...</td></tr>
<tr><td>261</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Value',currSlice,...</td></tr>
<tr><td>262</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'SliderStep',[1/(planeDim-1)&nbsp;1/(planeDim-1)]);</td></tr>
<tr><td>263</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>264</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;reset&nbsp;slider&nbsp;when&nbsp;nothing&nbsp;is&nbsp;loaded</td></tr>
<tr><td>265</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Min',0,'Max',1,'Value',0,'SliderStep',[1&nbsp;1]);</td></tr>
<tr><td>266</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>267</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>268</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>269</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>270</td><td bgcolor="#FFFFFF">function&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles,&nbsp;ct,&nbsp;cst)</td></tr>
<tr><td>271</td><td bgcolor="#FF0000">AllVarNames&nbsp;=&nbsp;handles.AllVarNames;</td></tr>
<tr><td>272</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>273</td><td bgcolor="#FF0000">if&nbsp;nargin&nbsp;&gt;=3&nbsp;&amp;&amp;&nbsp;ismember('ct',AllVarNames)</td></tr>
<tr><td>274</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;compute&nbsp;HU&nbsp;values</td></tr>
<tr><td>275</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(ct,&nbsp;'cubeHU')</td></tr>
<tr><td>276</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;matRad_electronDensitiesToHU(ct);</td></tr>
<tr><td>277</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','ct',ct);</td></tr>
<tr><td>278</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>279</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(ct,&nbsp;'cubeHU')</td></tr>
<tr><td>280</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cubeHUavailable&nbsp;=&nbsp;false;</td></tr>
<tr><td>281</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>282</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cubeHUavailable&nbsp;=&nbsp;true;</td></tr>
<tr><td>283</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>284</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>285</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>286</td><td bgcolor="#FFFFFF">%set&nbsp;plan&nbsp;if&nbsp;available&nbsp;-&nbsp;if&nbsp;not&nbsp;create&nbsp;one</td></tr>
<tr><td>287</td><td bgcolor="#FF0000">try&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>288</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;ismember('pln',AllVarNames)&nbsp;&amp;&amp;&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>289</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;check&nbsp;if&nbsp;you&nbsp;are&nbsp;working&nbsp;with&nbsp;a&nbsp;valid&nbsp;pln</td></tr>
<tr><td>290</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>291</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(pln,'propStf')</td></tr>
<tr><td>292</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showWarning(handles,'GUI&nbsp;OpeningFunc:&nbsp;Overwriting&nbsp;outdated&nbsp;pln&nbsp;format&nbsp;with&nbsp;default&nbsp;GUI&nbsp;pln');</td></tr>
<tr><td>293</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evalin('base','clear&nbsp;pln');</td></tr>
<tr><td>294</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>295</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>296</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setPln(handles);</td></tr>
<tr><td>297</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;handles.State&nbsp;&gt;&nbsp;0&nbsp;</td></tr>
<tr><td>298</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>299</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setPln(handles);</td></tr>
<tr><td>300</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>301</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>302</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>303</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;0;</td></tr>
<tr><td>304</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;Could&nbsp;not&nbsp;set&nbsp;or&nbsp;get&nbsp;pln');</td></tr>
<tr><td>305</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>306</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>307</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;for&nbsp;dij&nbsp;structure</td></tr>
<tr><td>308</td><td bgcolor="#FF0000">if&nbsp;ismember('dij',AllVarNames)</td></tr>
<tr><td>309</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;2;</td></tr>
<tr><td>310</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>311</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>312</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;for&nbsp;optimized&nbsp;results</td></tr>
<tr><td>313</td><td bgcolor="#FF0000">if&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>314</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;3;</td></tr>
<tr><td>315</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>316</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>317</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;some&nbsp;default&nbsp;values</td></tr>
<tr><td>318</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;==&nbsp;2&nbsp;||&nbsp;handles.State&nbsp;==&nbsp;3</td></tr>
<tr><td>319</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String','physicalDose');</td></tr>
<tr><td>320</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;='physicalDose';</td></tr>
<tr><td>321</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOptionIdx=1;</td></tr>
<tr><td>322</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>323</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.resultGUI&nbsp;=&nbsp;[];</td></tr>
<tr><td>324</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String','no&nbsp;option&nbsp;available');</td></tr>
<tr><td>325</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption='';</td></tr>
<tr><td>326</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOptionIdx=1;</td></tr>
<tr><td>327</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>328</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>329</td><td bgcolor="#FFFFFF">%&nbsp;precompute&nbsp;iso&nbsp;dose&nbsp;lines</td></tr>
<tr><td>330</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;==&nbsp;3</td></tr>
<tr><td>331</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>332</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>333</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>334</td><td bgcolor="#FFFFFF">%per&nbsp;default&nbsp;the&nbsp;first&nbsp;beam&nbsp;is&nbsp;selected&nbsp;for&nbsp;the&nbsp;profile&nbsp;plot</td></tr>
<tr><td>335</td><td bgcolor="#FF0000">handles.selectedBeam&nbsp;=&nbsp;1;</td></tr>
<tr><td>336</td><td bgcolor="#FF0000">handles.plane&nbsp;=&nbsp;get(handles.popupPlane,'Value');</td></tr>
<tr><td>337</td><td bgcolor="#FF0000">handles.DijCalcWarning&nbsp;=&nbsp;false;</td></tr>
<tr><td>338</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>339</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;slice&nbsp;slider</td></tr>
<tr><td>340</td><td bgcolor="#FF0000">initViewSliceSlider(handles);</td></tr>
<tr><td>341</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>342</td><td bgcolor="#FFFFFF">%&nbsp;define&nbsp;context&nbsp;menu&nbsp;for&nbsp;structures</td></tr>
<tr><td>343</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>344</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>345</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cst{i,5}.Visible</td></tr>
<tr><td>346</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(i)&nbsp;=&nbsp;true;</td></tr>
<tr><td>347</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>348</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(i)&nbsp;=&nbsp;false;</td></tr>
<tr><td>349</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>350</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>351</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>352</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>353</td><td bgcolor="#FFFFFF">%Initialize&nbsp;colormaps&nbsp;and&nbsp;windows</td></tr>
<tr><td>354</td><td bgcolor="#FF0000">handles.doseColorMap&nbsp;=&nbsp;'jet';</td></tr>
<tr><td>355</td><td bgcolor="#FF0000">handles.ctColorMap&nbsp;&nbsp;&nbsp;=&nbsp;'bone';</td></tr>
<tr><td>356</td><td bgcolor="#FF0000">handles.cMapSize&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;64;</td></tr>
<tr><td>357</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;&nbsp;=&nbsp;true;</td></tr>
<tr><td>358</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>359</td><td bgcolor="#FFFFFF">%Set&nbsp;up&nbsp;the&nbsp;colormap&nbsp;selection&nbsp;box</td></tr>
<tr><td>360</td><td bgcolor="#FF0000">availableColormaps&nbsp;=&nbsp;matRad_getColormap();</td></tr>
<tr><td>361</td><td bgcolor="#FF0000">set(handles.popupmenu_chooseColormap,'String',availableColormaps);</td></tr>
<tr><td>362</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>363</td><td bgcolor="#FF0000">currentCtMapIndex&nbsp;&nbsp;&nbsp;=&nbsp;find(strcmp(availableColormaps,handles.ctColorMap));</td></tr>
<tr><td>364</td><td bgcolor="#FF0000">currentDoseMapIndex&nbsp;=&nbsp;find(strcmp(availableColormaps,handles.doseColorMap));</td></tr>
<tr><td>365</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>366</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>367</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColormap,'Value',currentCtMapIndex);</td></tr>
<tr><td>368</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>369</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>370</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;=&nbsp;3</td></tr>
<tr><td>371</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColormap,'Value',currentDoseMapIndex);</td></tr>
<tr><td>372</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>373</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>374</td><td bgcolor="#FFFFFF">%&nbsp;Update&nbsp;handles&nbsp;structure</td></tr>
<tr><td>375</td><td bgcolor="#FF0000">handles.profileOffset&nbsp;=&nbsp;0;</td></tr>
<tr><td>376</td><td bgcolor="#FF0000">UpdateState(handles)</td></tr>
<tr><td>377</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>378</td><td bgcolor="#FF0000">axes(handles.axesFig)</td></tr>
<tr><td>379</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>380</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>381</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>382</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>383</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);&nbsp;&nbsp;</td></tr>
<tr><td>384</td><td bgcolor="#FFFFFF">%&nbsp;eof&nbsp;reloadGUI</td></tr>
<tr><td>385</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>386</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;just&nbsp;before&nbsp;matRadGUI&nbsp;is&nbsp;made&nbsp;visible.</td></tr>
<tr><td>387</td><td bgcolor="#FFFFFF">function&nbsp;matRadGUI_OpeningFcn(hObject,&nbsp;~,&nbsp;handles,&nbsp;varargin)&nbsp;</td></tr>
<tr><td>388</td><td bgcolor="#FFFFFF">%#ok&lt;*DEFNU&gt;&nbsp;</td></tr>
<tr><td>389</td><td bgcolor="#FFFFFF">%#ok&lt;*AGROW&gt;</td></tr>
<tr><td>390</td><td bgcolor="#FFFFFF">%&nbsp;This&nbsp;function&nbsp;has&nbsp;no&nbsp;output&nbsp;args,&nbsp;see&nbsp;OutputFcn.</td></tr>
<tr><td>391</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;figure</td></tr>
<tr><td>392</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>393</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>394</td><td bgcolor="#FFFFFF">%&nbsp;varargin&nbsp;&nbsp;&nbsp;command&nbsp;line&nbsp;arguments&nbsp;to&nbsp;matRadGUI&nbsp;(see&nbsp;VARARGIN)</td></tr>
<tr><td>395</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>396</td><td bgcolor="#FFFFFF">%&nbsp;variable&nbsp;to&nbsp;check&nbsp;whether&nbsp;GUI&nbsp;is&nbsp;opened&nbsp;or&nbsp;just&nbsp;refreshed&nbsp;/&nbsp;new&nbsp;data</td></tr>
<tr><td>397</td><td bgcolor="#FFFFFF">%&nbsp;loaded,&nbsp;since&nbsp;resetGUI&nbsp;needs&nbsp;to&nbsp;distinguish&nbsp;at&nbsp;one&nbsp;point</td></tr>
<tr><td>398</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>399</td><td bgcolor="#FF0000">handles.initialGuiStart&nbsp;=&nbsp;true;</td></tr>
<tr><td>400</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>401</td><td bgcolor="#FF0000">p&nbsp;=&nbsp;inputParser;</td></tr>
<tr><td>402</td><td bgcolor="#FF0000">addParameter(p,'devMode',false,@validateModeValue);</td></tr>
<tr><td>403</td><td bgcolor="#FF0000">addParameter(p,'eduMode',false,@validateModeValue);</td></tr>
<tr><td>404</td><td bgcolor="#FF0000">p.KeepUnmatched&nbsp;=&nbsp;true;&nbsp;%No&nbsp;error&nbsp;with&nbsp;incorrect&nbsp;parameters</td></tr>
<tr><td>405</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>406</td><td bgcolor="#FF0000">parse(p,varargin{:});</td></tr>
<tr><td>407</td><td bgcolor="#FF0000">parsedInput&nbsp;=&nbsp;p.Results;</td></tr>
<tr><td>408</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>409</td><td bgcolor="#FF0000">if&nbsp;ischar(parsedInput.devMode)&nbsp;||&nbsp;isstring(parsedInput.devMode)</td></tr>
<tr><td>410</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;parsedInput.devMode&nbsp;=&nbsp;str2double(parsedInput.devMode);</td></tr>
<tr><td>411</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>412</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>413</td><td bgcolor="#FF0000">if&nbsp;ischar(parsedInput.eduMode)&nbsp;||&nbsp;isstring(parsedInput.eduMode)</td></tr>
<tr><td>414</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;parsedInput.eduMode&nbsp;=&nbsp;str2double(parsedInput.eduMode);</td></tr>
<tr><td>415</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>416</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>417</td><td bgcolor="#FFFFFF">%If&nbsp;devMode&nbsp;is&nbsp;true,&nbsp;error&nbsp;dialogs&nbsp;will&nbsp;include&nbsp;the&nbsp;full&nbsp;stack&nbsp;trace&nbsp;of&nbsp;the&nbsp;error</td></tr>
<tr><td>418</td><td bgcolor="#FFFFFF">%If&nbsp;false,&nbsp;only&nbsp;the&nbsp;basic&nbsp;error&nbsp;message&nbsp;is&nbsp;shown&nbsp;(works&nbsp;for&nbsp;errors&nbsp;that</td></tr>
<tr><td>419</td><td bgcolor="#FFFFFF">%handle&nbsp;the&nbsp;MException&nbsp;object)</td></tr>
<tr><td>420</td><td bgcolor="#FF0000">handles.devMode&nbsp;=&nbsp;logical(parsedInput.devMode);</td></tr>
<tr><td>421</td><td bgcolor="#FF0000">if&nbsp;handles.devMode</td></tr>
<tr><td>422</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;disp('matRadGUI&nbsp;starting&nbsp;in&nbsp;developer&nbsp;mode!');</td></tr>
<tr><td>423</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>424</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>425</td><td bgcolor="#FFFFFF">%Enables&nbsp;simple&nbsp;educational&nbsp;mode&nbsp;which&nbsp;removes&nbsp;certain&nbsp;functionality&nbsp;from&nbsp;</td></tr>
<tr><td>426</td><td bgcolor="#FFFFFF">%the&nbsp;GUI</td></tr>
<tr><td>427</td><td bgcolor="#FF0000">handles.eduMode&nbsp;=&nbsp;logical(parsedInput.eduMode);</td></tr>
<tr><td>428</td><td bgcolor="#FF0000">if&nbsp;handles.eduMode</td></tr>
<tr><td>429</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;disp('matRadGUI&nbsp;starting&nbsp;in&nbsp;educational&nbsp;mode!');</td></tr>
<tr><td>430</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>431</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>432</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>433</td><td bgcolor="#FF0000">set(handles.radiobtnPlan,'value',0);</td></tr>
<tr><td>434</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>435</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>436</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>437</td><td bgcolor="#FF0000">if&nbsp;handles.eduMode</td></tr>
<tr><td>438</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Visisbility&nbsp;in&nbsp;Educational&nbsp;Mode</td></tr>
<tr><td>439</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;eduHideHandles&nbsp;=&nbsp;&nbsp;&nbsp;{handles.radiobutton3Dconf,...</td></tr>
<tr><td>440</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.btnRunDAO,...</td></tr>
<tr><td>441</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.pushbutton_importFromBinary,...</td></tr>
<tr><td>442</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.btnLoadDicom,...</td></tr>
<tr><td>443</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.btn_export,...</td></tr>
<tr><td>444</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.importDoseButton};</td></tr>
<tr><td>445</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;eduDisableHandles&nbsp;=&nbsp;{handles.editCouchAngle,handles.popUpMachine};</td></tr>
<tr><td>446</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cellfun(@(h)&nbsp;set(h,'Visible','Off'),eduHideHandles);</td></tr>
<tr><td>447</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cellfun(@(h)&nbsp;set(h,'Enable','Off'),eduDisableHandles);&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>448</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>449</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>450</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>451</td><td bgcolor="#FFFFFF">%Alter&nbsp;matRad&nbsp;Version&nbsp;string&nbsp;positioning</td></tr>
<tr><td>452</td><td bgcolor="#FF0000">vString&nbsp;=&nbsp;matRad_version();</td></tr>
<tr><td>453</td><td bgcolor="#FF0000">vPos&nbsp;=&nbsp;get(handles.text15,'Position');</td></tr>
<tr><td>454</td><td bgcolor="#FF0000">urlPos&nbsp;=&nbsp;get(handles.text31,'Position');</td></tr>
<tr><td>455</td><td bgcolor="#FF0000">btnPos&nbsp;=&nbsp;get(handles.btnAbout,'Position');</td></tr>
<tr><td>456</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>457</td><td bgcolor="#FFFFFF">%vPos([1&nbsp;3])&nbsp;=&nbsp;urlPos([1&nbsp;3]);</td></tr>
<tr><td>458</td><td bgcolor="#FF0000">vPos([1&nbsp;3])&nbsp;=&nbsp;[0&nbsp;1];</td></tr>
<tr><td>459</td><td bgcolor="#FF0000">vPos(4)&nbsp;=&nbsp;vPos(4)*1.25;</td></tr>
<tr><td>460</td><td bgcolor="#FF0000">btnPos(2)&nbsp;=&nbsp;0.05;</td></tr>
<tr><td>461</td><td bgcolor="#FF0000">urlPos(2)&nbsp;=&nbsp;btnPos(2)+btnPos(4)+0.05;</td></tr>
<tr><td>462</td><td bgcolor="#FF0000">vPos(2)&nbsp;=&nbsp;urlPos(2)&nbsp;+&nbsp;urlPos(4)&nbsp;+&nbsp;0.05;</td></tr>
<tr><td>463</td><td bgcolor="#FF0000">vPos(4)&nbsp;=&nbsp;0.98&nbsp;-&nbsp;vPos(2);</td></tr>
<tr><td>464</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>465</td><td bgcolor="#FF0000">set(handles.btnAbout,'Position',btnPos);</td></tr>
<tr><td>466</td><td bgcolor="#FF0000">set(handles.text31,'String','www.matRad.org','Position',urlPos,'Enable','inactive','ButtonDownFcn',&nbsp;@(~,~)&nbsp;web('www.matrad.org','-browser'));</td></tr>
<tr><td>467</td><td bgcolor="#FF0000">set(handles.text15,'String',vString,'Position',vPos);</td></tr>
<tr><td>468</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>469</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;resetGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>470</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>471</td><td bgcolor="#FFFFFF">%%&nbsp;parse&nbsp;variables&nbsp;from&nbsp;base&nbsp;workspace</td></tr>
<tr><td>472</td><td bgcolor="#FF0000">AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>473</td><td bgcolor="#FF0000">handles.AllVarNames&nbsp;=&nbsp;AllVarNames;</td></tr>
<tr><td>474</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>475</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>476</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>477</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>478</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%cst&nbsp;=&nbsp;setCstTable(handles,cst);</td></tr>
<tr><td>479</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;generateCstTable(handles,cst);</td></tr>
<tr><td>480</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>481</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;matRad_computeVoiContoursWrapper(cst,ct);</td></tr>
<tr><td>482</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);</td></tr>
<tr><td>483</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>484</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;~ismember('cst',AllVarNames)</td></tr>
<tr><td>485</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;could&nbsp;not&nbsp;find&nbsp;cst&nbsp;file');</td></tr>
<tr><td>486</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;~ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>487</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;could&nbsp;not&nbsp;find&nbsp;ct&nbsp;file');</td></tr>
<tr><td>488</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>489</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>490</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;Could&nbsp;not&nbsp;load&nbsp;ct&nbsp;and&nbsp;cst&nbsp;file');</td></tr>
<tr><td>491</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>492</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>493</td><td bgcolor="#FF0000">if&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>494</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles,&nbsp;ct,&nbsp;cst);</td></tr>
<tr><td>495</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>496</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>497</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>498</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>499</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>500</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>501</td><td bgcolor="#FFFFFF">%Validates&nbsp;the&nbsp;attributes&nbsp;for&nbsp;the&nbsp;command&nbsp;line&nbsp;Modes</td></tr>
<tr><td>502</td><td bgcolor="#FFFFFF">function&nbsp;validateModeValue(x)</td></tr>
<tr><td>503</td><td bgcolor="#FFFFFF">%When&nbsp;passed&nbsp;from&nbsp;OS&nbsp;terminal&nbsp;(or&nbsp;inline&nbsp;in&nbsp;Command&nbsp;Window)&nbsp;everything&nbsp;is&nbsp;a&nbsp;string&nbsp;</td></tr>
<tr><td>504</td><td bgcolor="#FF0000">if&nbsp;isdeployed&nbsp;||&nbsp;ischar(x)&nbsp;||&nbsp;isstring(x)</td></tr>
<tr><td>505</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;x=str2double(x);</td></tr>
<tr><td>506</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>507</td><td bgcolor="#FF0000">validateattributes(x,{'logical','numeric'},{'scalar','binary'});</td></tr>
<tr><td>508</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>509</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>510</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>511</td><td bgcolor="#FFFFFF">function&nbsp;Callback_StructVisibilty(source,~)</td></tr>
<tr><td>512</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>513</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;guidata(findobj('Name','matRadGUI'));</td></tr>
<tr><td>514</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>515</td><td bgcolor="#FF0000">contextUiChildren&nbsp;=&nbsp;get(get(handles.figure1,'UIContextMenu'),'Children');</td></tr>
<tr><td>516</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>517</td><td bgcolor="#FF0000">Idx&nbsp;=&nbsp;find(strcmp(get(contextUiChildren,'Label'),get(source,'Label')));</td></tr>
<tr><td>518</td><td bgcolor="#FF0000">if&nbsp;strcmp(get(source,'Checked'),'on')</td></tr>
<tr><td>519</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(contextUiChildren(Idx),'Checked','off');</td></tr>
<tr><td>520</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>521</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(contextUiChildren(Idx),'Checked','on');</td></tr>
<tr><td>522</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>523</td><td bgcolor="#FFFFFF">%guidata(findobj('Name','matRadGUI'),&nbsp;handles);</td></tr>
<tr><td>524</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>525</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>526</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Outputs&nbsp;from&nbsp;this&nbsp;function&nbsp;are&nbsp;returned&nbsp;to&nbsp;the&nbsp;command&nbsp;line.</td></tr>
<tr><td>527</td><td bgcolor="#FFFFFF">function&nbsp;varargout&nbsp;=&nbsp;matRadGUI_OutputFcn(~,&nbsp;~,&nbsp;handles)&nbsp;</td></tr>
<tr><td>528</td><td bgcolor="#FFFFFF">%&nbsp;varargout&nbsp;&nbsp;cell&nbsp;array&nbsp;for&nbsp;returning&nbsp;output&nbsp;args&nbsp;(see&nbsp;VARARGOUT);</td></tr>
<tr><td>529</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;figure</td></tr>
<tr><td>530</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>531</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>532</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>533</td><td bgcolor="#FFFFFF">%&nbsp;Get&nbsp;default&nbsp;command&nbsp;line&nbsp;output&nbsp;from&nbsp;handles&nbsp;structure</td></tr>
<tr><td>534</td><td bgcolor="#FF0000">varargout{1}&nbsp;=&nbsp;handles.output;</td></tr>
<tr><td>535</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>536</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;focus&nbsp;on&nbsp;error&nbsp;dialog</td></tr>
<tr><td>537</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'ErrorDlg')</td></tr>
<tr><td>538</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figure(handles.ErrorDlg)</td></tr>
<tr><td>539</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>540</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>541</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnLoadMat.</td></tr>
<tr><td>542</td><td bgcolor="#FFFFFF">function&nbsp;btnLoadMat_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>543</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnLoadMat&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>544</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>545</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>546</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>547</td><td bgcolor="#FF0000">[FileName,&nbsp;FilePath]&nbsp;=&nbsp;uigetfile('*.mat');</td></tr>
<tr><td>548</td><td bgcolor="#FF0000">if&nbsp;FileName&nbsp;==&nbsp;0&nbsp;%&nbsp;user&nbsp;pressed&nbsp;cancel&nbsp;--&gt;&nbsp;do&nbsp;nothing.</td></tr>
<tr><td>549</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>550</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>551</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>552</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;resetGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>553</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>554</td><td bgcolor="#FF0000">try&nbsp;</td></tr>
<tr><td>555</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>556</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;existing&nbsp;workspace&nbsp;-&nbsp;parse&nbsp;variables&nbsp;from&nbsp;base&nbsp;workspace</td></tr>
<tr><td>557</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>558</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;RefVarNames&nbsp;=&nbsp;{'ct','cst','pln','stf','dij','resultGUI'};</td></tr>
<tr><td>559</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>560</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:length(RefVarNames)&nbsp;&nbsp;</td></tr>
<tr><td>561</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(ismember(AllVarNames,RefVarNames{i}))&gt;0</td></tr>
<tr><td>562</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evalin('base',['clear&nbsp;',&nbsp;RefVarNames{i}]);</td></tr>
<tr><td>563</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>564</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>565</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>566</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;read&nbsp;new&nbsp;data</td></tr>
<tr><td>567</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;load([FilePath&nbsp;FileName]);</td></tr>
<tr><td>568</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.legendTable,'String',{'no&nbsp;data&nbsp;loaded'});</td></tr>
<tr><td>569</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String','no&nbsp;option&nbsp;available');</td></tr>
<tr><td>570</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>571</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>572</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'LoadMatFileFnc:&nbsp;Could&nbsp;not&nbsp;load&nbsp;*.mat&nbsp;file',ME);&nbsp;</td></tr>
<tr><td>573</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>574</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>575</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>576</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>577</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>578</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>579</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>580</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>581</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;generateCstTable(handles,cst);</td></tr>
<tr><td>582</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.TableChanged&nbsp;=&nbsp;false;</td></tr>
<tr><td>583</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupTypeOfPlot,'Value',1);</td></tr>
<tr><td>584</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;matRad_computeVoiContoursWrapper(cst,ct);</td></tr>
<tr><td>585</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>586</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','ct',ct);</td></tr>
<tr><td>587</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);</td></tr>
<tr><td>588</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>589</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>590</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'LoadMatFileFnc:&nbsp;Could&nbsp;not&nbsp;load&nbsp;*.mat&nbsp;file',ME);&nbsp;</td></tr>
<tr><td>591</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>592</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>593</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;if&nbsp;a&nbsp;optimized&nbsp;plan&nbsp;was&nbsp;loaded</td></tr>
<tr><td>594</td><td bgcolor="#FF0000">if&nbsp;exist('stf','var')</td></tr>
<tr><td>595</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','stf',stf);</td></tr>
<tr><td>596</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>597</td><td bgcolor="#FF0000">if&nbsp;exist('pln','var')</td></tr>
<tr><td>598</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','pln',pln);</td></tr>
<tr><td>599</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>600</td><td bgcolor="#FF0000">if&nbsp;exist('dij','var')</td></tr>
<tr><td>601</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','dij',dij);</td></tr>
<tr><td>602</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>603</td><td bgcolor="#FFFFFF">%&nbsp;if&nbsp;exist('stf','var')&nbsp;&amp;&amp;&nbsp;exist('dij','var')</td></tr>
<tr><td>604</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;2;</td></tr>
<tr><td>605</td><td bgcolor="#FFFFFF">%&nbsp;end</td></tr>
<tr><td>606</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>607</td><td bgcolor="#FF0000">if&nbsp;exist('resultGUI','var')</td></tr>
<tr><td>608</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>609</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;handles.State&nbsp;=&nbsp;3;</td></tr>
<tr><td>610</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;handles.SelectedDisplayOption&nbsp;='physicalDose';</td></tr>
<tr><td>611</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>612</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>613</td><td bgcolor="#FFFFFF">%&nbsp;recheck&nbsp;current&nbsp;workspace&nbsp;variables</td></tr>
<tr><td>614</td><td bgcolor="#FF0000">AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>615</td><td bgcolor="#FF0000">handles.AllVarNames&nbsp;=&nbsp;AllVarNames;</td></tr>
<tr><td>616</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>617</td><td bgcolor="#FF0000">if&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>618</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles,&nbsp;ct,&nbsp;cst);</td></tr>
<tr><td>619</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>620</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>621</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>622</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>623</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>624</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>625</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnLoadDicom.</td></tr>
<tr><td>626</td><td bgcolor="#FFFFFF">function&nbsp;btnLoadDicom_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>627</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnLoadDicom&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>628</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>629</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>630</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>631</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;existing&nbsp;workspace&nbsp;-&nbsp;parse&nbsp;variables&nbsp;from&nbsp;base&nbsp;workspace</td></tr>
<tr><td>632</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String','no&nbsp;option&nbsp;available');</td></tr>
<tr><td>633</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>634</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;RefVarNames&nbsp;=&nbsp;{'ct','cst','pln','stf','dij','resultGUI'};</td></tr>
<tr><td>635</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:length(RefVarNames)&nbsp;&nbsp;</td></tr>
<tr><td>636</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(ismember(AllVarNames,RefVarNames{i}))&gt;0</td></tr>
<tr><td>637</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evalin('base',['clear&nbsp;',&nbsp;RefVarNames{i}]);</td></tr>
<tr><td>638</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>639</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>640</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;0;</td></tr>
<tr><td>641</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_importDicomGUI;</td></tr>
<tr><td>642</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>643</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>644</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'DicomImport:&nbsp;Could&nbsp;not&nbsp;import&nbsp;data');&nbsp;</td></tr>
<tr><td>645</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>646</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>647</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>648</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>649</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>650</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btn_export.</td></tr>
<tr><td>651</td><td bgcolor="#FFFFFF">function&nbsp;btn_export_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>652</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btn_export&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>653</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>654</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>655</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>656</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>657</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_exportGUI;</td></tr>
<tr><td>658</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>659</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'Could&nbsp;not&nbsp;export&nbsp;data');&nbsp;</td></tr>
<tr><td>660</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>661</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>662</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>663</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>664</td><td bgcolor="#FFFFFF">function&nbsp;editBixelWidth_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>665</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;editBixelWidth&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>666</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>667</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>668</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>669</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editBixelWidth&nbsp;as&nbsp;text</td></tr>
<tr><td>670</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editBixelWidth&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>671</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>672</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>673</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>674</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>675</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>676</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>677</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>678</td><td bgcolor="#FFFFFF">function&nbsp;editGantryAngle_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>679</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;editGantryAngle&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>680</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>681</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>682</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>683</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editGantryAngle&nbsp;as&nbsp;text</td></tr>
<tr><td>684</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editGantryAngle&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>685</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>686</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>687</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>688</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>689</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>690</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>691</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>692</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>693</td><td bgcolor="#FFFFFF">function&nbsp;editCouchAngle_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>694</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;editCouchAngle&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>695</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>696</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>697</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>698</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editCouchAngle&nbsp;as&nbsp;text</td></tr>
<tr><td>699</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;editCouchAngle&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>700</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>701</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>702</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>703</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>704</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>705</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>706</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>707</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupRadMode.</td></tr>
<tr><td>708</td><td bgcolor="#FFFFFF">function&nbsp;popupRadMode_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>709</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupRadMode&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>710</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>711</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>712</td><td bgcolor="#FF0000">checkRadiationComposition(handles);</td></tr>
<tr><td>713</td><td bgcolor="#FF0000">contents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cellstr(get(hObject,'String'));&nbsp;</td></tr>
<tr><td>714</td><td bgcolor="#FF0000">RadIdentifier&nbsp;=&nbsp;contents{get(hObject,'Value')};</td></tr>
<tr><td>715</td><td bgcolor="#FF0000">contentPopUp&nbsp;&nbsp;=&nbsp;get(handles.popMenuBioOpt,'String');</td></tr>
<tr><td>716</td><td bgcolor="#FF0000">switch&nbsp;RadIdentifier</td></tr>
<tr><td>717</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'photons'</td></tr>
<tr><td>718</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>719</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','off');</td></tr>
<tr><td>720</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ix&nbsp;=&nbsp;find(strcmp(contentPopUp,'none'));</td></tr>
<tr><td>721</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Value',ix);</td></tr>
<tr><td>722</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','off');</td></tr>
<tr><td>723</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>724</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','on');</td></tr>
<tr><td>725</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','on');</td></tr>
<tr><td>726</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobutton3Dconf,'Enable','on');</td></tr>
<tr><td>727</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtSequencing,'Enable','on');</td></tr>
<tr><td>728</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editSequencingLevel,'Enable','on');</td></tr>
<tr><td>729</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>730</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'protons'</td></tr>
<tr><td>731</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>732</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','on');</td></tr>
<tr><td>733</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ix&nbsp;=&nbsp;find(strcmp(contentPopUp,'const_RBExD'));</td></tr>
<tr><td>734</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Value',ix);</td></tr>
<tr><td>735</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','on');</td></tr>
<tr><td>736</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>737</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','off');</td></tr>
<tr><td>738</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','off');</td></tr>
<tr><td>739</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','off');</td></tr>
<tr><td>740</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobutton3Dconf,'Enable','off');</td></tr>
<tr><td>741</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtSequencing,'Enable','off');</td></tr>
<tr><td>742</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editSequencingLevel,'Enable','off');</td></tr>
<tr><td>743</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>744</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'carbon'</td></tr>
<tr><td>745</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>746</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','on');</td></tr>
<tr><td>747</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ix&nbsp;=&nbsp;find(strcmp(contentPopUp,'LEMIV_RBExD'));</td></tr>
<tr><td>748</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Value',ix);</td></tr>
<tr><td>749</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','on');</td></tr>
<tr><td>750</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>751</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','off');</td></tr>
<tr><td>752</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','off');</td></tr>
<tr><td>753</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobutton3Dconf,'Enable','off');</td></tr>
<tr><td>754</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtSequencing,'Enable','off');</td></tr>
<tr><td>755</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editSequencingLevel,'Enable','off');</td></tr>
<tr><td>756</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>757</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>758</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>759</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>760</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;~strcmp(contents(get(hObject,'Value')),pln.radiationMode)</td></tr>
<tr><td>761</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>762</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;new&nbsp;radiation&nbsp;modality&nbsp;is&nbsp;photons&nbsp;-&gt;&nbsp;just&nbsp;keep&nbsp;physicalDose</td></tr>
<tr><td>763</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(contents(get(hObject,'Value')),'photons')</td></tr>
<tr><td>764</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;&nbsp;</td></tr>
<tr><td>765</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>766</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>767</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>768</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'alpha');&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'alpha');&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>769</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'beta');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'beta');&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>770</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'RBExDose');&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'RBExDose');end</td></tr>
<tr><td>771</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'RBE');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'RBE');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>772</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>773</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>774</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>775</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>776</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>777</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strcmp(contents(get(hObject,'Value')),'protons')</td></tr>
<tr><td>778</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;&nbsp;</td></tr>
<tr><td>779</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>780</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>781</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>782</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'alpha');&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'alpha');end</td></tr>
<tr><td>783</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'beta');&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'beta');&nbsp;end</td></tr>
<tr><td>784</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'RBE');&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'RBE');&nbsp;&nbsp;end</td></tr>
<tr><td>785</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>786</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>787</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>788</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>789</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>790</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>791</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>792</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>793</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>794</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>795</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>796</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>797</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>798</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>799</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>800</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>801</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>802</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>803</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>804</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>805</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>806</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnCalcDose.</td></tr>
<tr><td>807</td><td bgcolor="#FFFFFF">function&nbsp;btnCalcDose_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>808</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnCalcDose&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>809</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>810</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>811</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>812</td><td bgcolor="#FFFFFF">%&nbsp;http://stackoverflow.com/questions/24703962/trigger-celleditcallback-before-button-callback</td></tr>
<tr><td>813</td><td bgcolor="#FFFFFF">%&nbsp;http://www.mathworks.com/matlabcentral/newsreader/view_thread/332613</td></tr>
<tr><td>814</td><td bgcolor="#FFFFFF">%&nbsp;wait&nbsp;some&nbsp;time&nbsp;until&nbsp;the&nbsp;CallEditCallback&nbsp;is&nbsp;finished&nbsp;</td></tr>
<tr><td>815</td><td bgcolor="#FFFFFF">%&nbsp;Callback&nbsp;triggers&nbsp;the&nbsp;cst&nbsp;saving&nbsp;mechanism&nbsp;from&nbsp;GUI</td></tr>
<tr><td>816</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>817</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;indicate&nbsp;that&nbsp;matRad&nbsp;is&nbsp;busy</td></tr>
<tr><td>818</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;mouse&nbsp;pointer&nbsp;to&nbsp;hour&nbsp;glass&nbsp;</td></tr>
<tr><td>819</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Figures&nbsp;=&nbsp;gcf;%findobj('type','figure');</td></tr>
<tr><td>820</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'watch');&nbsp;</td></tr>
<tr><td>821</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;drawnow;</td></tr>
<tr><td>822</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;disable&nbsp;all&nbsp;active&nbsp;objects</td></tr>
<tr><td>823</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;InterfaceObj&nbsp;=&nbsp;findobj(Figures,'Enable','on');</td></tr>
<tr><td>824</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','off');</td></tr>
<tr><td>825</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>826</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;read&nbsp;plan&nbsp;from&nbsp;gui&nbsp;and&nbsp;save&nbsp;it&nbsp;to&nbsp;workspace</td></tr>
<tr><td>827</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;gets&nbsp;also&nbsp;IsoCenter&nbsp;from&nbsp;GUI&nbsp;if&nbsp;checkbox&nbsp;is&nbsp;not&nbsp;checked</td></tr>
<tr><td>828</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>829</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>830</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;get&nbsp;default&nbsp;iso&nbsp;center&nbsp;as&nbsp;center&nbsp;of&nbsp;gravity&nbsp;of&nbsp;all&nbsp;targets&nbsp;if&nbsp;not</td></tr>
<tr><td>831</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;already&nbsp;defined</td></tr>
<tr><td>832</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>833</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>834</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;length(pln.propStf.gantryAngles)&nbsp;~=&nbsp;length(pln.propStf.couchAngles)&nbsp;</td></tr>
<tr><td>835</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showWarning(handles,'number&nbsp;of&nbsp;gantryAngles&nbsp;!=&nbsp;number&nbsp;of&nbsp;couchAngles');&nbsp;</td></tr>
<tr><td>836</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>837</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%%</td></tr>
<tr><td>838</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~checkRadiationComposition(handles)</td></tr>
<tr><td>839</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName&nbsp;=&nbsp;[pln.radiationMode&nbsp;'_'&nbsp;pln.machine];</td></tr>
<tr><td>840</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,errordlg(['Could&nbsp;not&nbsp;find&nbsp;the&nbsp;following&nbsp;machine&nbsp;file:&nbsp;'&nbsp;fileName&nbsp;]));</td></tr>
<tr><td>841</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>842</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>843</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>844</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>845</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%%&nbsp;check&nbsp;if&nbsp;isocenter&nbsp;is&nbsp;already&nbsp;set</td></tr>
<tr><td>846</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(pln.propStf,'isoCenter')</td></tr>
<tr><td>847</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showWarning(handles,'no&nbsp;iso&nbsp;center&nbsp;set&nbsp;-&nbsp;using&nbsp;center&nbsp;of&nbsp;gravity&nbsp;based&nbsp;on&nbsp;structures&nbsp;defined&nbsp;as&nbsp;TARGET');</td></tr>
<tr><td>848</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)&nbsp;*&nbsp;matRad_getIsoCenter(evalin('base','cst'),evalin('base','ct'));</td></tr>
<tr><td>849</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','pln',pln);</td></tr>
<tr><td>850</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;~get(handles.checkIsoCenter,'Value')</td></tr>
<tr><td>851</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~strcmp(get(handles.editIsoCenter,'String'),'multiple&nbsp;isoCenter')</td></tr>
<tr><td>852</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)*str2num(get(handles.editIsoCenter,'String'));</td></tr>
<tr><td>853</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>854</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>855</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>856</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>857</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'CalcDoseCallback:&nbsp;Error&nbsp;in&nbsp;preprocessing!',ME);&nbsp;</td></tr>
<tr><td>858</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>859</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>860</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>861</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>862</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>863</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>864</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>865</td><td bgcolor="#FFFFFF">%&nbsp;generate&nbsp;steering&nbsp;file</td></tr>
<tr><td>866</td><td bgcolor="#FF0000">try&nbsp;</td></tr>
<tr><td>867</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;currPln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>868</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;if&nbsp;we&nbsp;run&nbsp;3d&nbsp;conf&nbsp;opt&nbsp;-&gt;&nbsp;hijack&nbsp;runDao&nbsp;to&nbsp;trigger&nbsp;computation&nbsp;of</td></tr>
<tr><td>869</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;connected&nbsp;bixels</td></tr>
<tr><td>870</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;get(handles.radiobutton3Dconf,'Value')</td></tr>
<tr><td>871</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currpln.propOpt.runDAO&nbsp;=&nbsp;true;&nbsp;</td></tr>
<tr><td>872</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>873</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;=&nbsp;matRad_generateStf(evalin('base','ct'),...</td></tr>
<tr><td>874</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evalin('base','cst'),...</td></tr>
<tr><td>875</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currPln);</td></tr>
<tr><td>876</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','stf',stf);</td></tr>
<tr><td>877</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>878</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'CalcDoseCallback:&nbsp;Error&nbsp;in&nbsp;steering&nbsp;file&nbsp;generation!',ME);&nbsp;</td></tr>
<tr><td>879</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>880</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>881</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>882</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>883</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>884</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>885</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>886</td><td bgcolor="#FFFFFF">%&nbsp;carry&nbsp;out&nbsp;dose&nbsp;calculation</td></tr>
<tr><td>887</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>888</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')</td></tr>
<tr><td>889</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dij&nbsp;=&nbsp;matRad_calcPhotonDose(evalin('base','ct'),stf,pln,evalin('base','cst'));</td></tr>
<tr><td>890</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strcmp(pln.radiationMode,'protons')&nbsp;||&nbsp;strcmp(pln.radiationMode,'carbon')</td></tr>
<tr><td>891</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dij&nbsp;=&nbsp;matRad_calcParticleDose(evalin('base','ct'),stf,pln,evalin('base','cst'));</td></tr>
<tr><td>892</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>893</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>894</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;assign&nbsp;results&nbsp;to&nbsp;base&nbsp;worksapce</td></tr>
<tr><td>895</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','dij',dij);</td></tr>
<tr><td>896</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;2;</td></tr>
<tr><td>897</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.TableChanged&nbsp;=&nbsp;false;</td></tr>
<tr><td>898</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>899</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>900</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>901</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>902</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'CalcDoseCallback:&nbsp;Error&nbsp;in&nbsp;dose&nbsp;calculation!',ME);&nbsp;</td></tr>
<tr><td>903</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>904</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>905</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>906</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>907</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>908</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>909</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>910</td><td bgcolor="#FFFFFF">%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>911</td><td bgcolor="#FF0000">set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>912</td><td bgcolor="#FF0000">set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>913</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>914</td><td bgcolor="#FF0000">guidata(hObject,handles);&nbsp;&nbsp;</td></tr>
<tr><td>915</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>916</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>917</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>918</td><td bgcolor="#FFFFFF">%%&nbsp;plots&nbsp;ct&nbsp;and&nbsp;distributions</td></tr>
<tr><td>919</td><td bgcolor="#FFFFFF">function&nbsp;UpdatePlot(handles)</td></tr>
<tr><td>920</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>921</td><td bgcolor="#FFFFFF">%profile&nbsp;on;</td></tr>
<tr><td>922</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>923</td><td bgcolor="#FF0000">axes(handles.axesFig);</td></tr>
<tr><td>924</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>925</td><td bgcolor="#FFFFFF">%&nbsp;this&nbsp;is&nbsp;necessary&nbsp;to&nbsp;prevent&nbsp;multiple&nbsp;callbacks&nbsp;of&nbsp;update&nbsp;plot&nbsp;drawing&nbsp;on</td></tr>
<tr><td>926</td><td bgcolor="#FFFFFF">%&nbsp;top&nbsp;of&nbsp;each&nbsp;other&nbsp;in&nbsp;matlab&nbsp;&lt;2014</td></tr>
<tr><td>927</td><td bgcolor="#FF0000">drawnow;</td></tr>
<tr><td>928</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>929</td><td bgcolor="#FF0000">defaultFontSize&nbsp;=&nbsp;8;</td></tr>
<tr><td>930</td><td bgcolor="#FF0000">currAxes&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;axis(handles.axesFig);</td></tr>
<tr><td>931</td><td bgcolor="#FF0000">AxesHandlesCT_Dose&nbsp;&nbsp;=&nbsp;gobjects(0);</td></tr>
<tr><td>932</td><td bgcolor="#FF0000">AxesHandlesVOI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;cell(0);</td></tr>
<tr><td>933</td><td bgcolor="#FF0000">AxesHandlesIsoDose&nbsp;&nbsp;=&nbsp;gobjects(0);</td></tr>
<tr><td>934</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>935</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;==&nbsp;0</td></tr>
<tr><td>936</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cla&nbsp;reset</td></tr>
<tr><td>937</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>938</td><td bgcolor="#FFFFFF">elseif&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>939</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>940</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>941</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>942</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>943</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>944</td><td bgcolor="#FFFFFF">%%&nbsp;state&nbsp;3&nbsp;indicates&nbsp;that&nbsp;a&nbsp;optimization&nbsp;has&nbsp;been&nbsp;performed</td></tr>
<tr><td>945</td><td bgcolor="#FF0000">&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>946</td><td bgcolor="#FF0000">if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>947</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Result&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>948</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>949</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>950</td><td bgcolor="#FF0000">if&nbsp;exist('Result','var')</td></tr>
<tr><td>951</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(Result)&nbsp;&amp;&amp;&nbsp;~isempty(ct.cubeHU)&nbsp;&amp;&amp;&nbsp;~isfield(handles,'DispInfo')</td></tr>
<tr><td>952</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>953</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo&nbsp;=&nbsp;fieldnames(Result);</td></tr>
<tr><td>954</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>955</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:size(DispInfo,1)</td></tr>
<tr><td>956</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>957</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;weight&nbsp;vectors&nbsp;in&nbsp;Result&nbsp;struct&nbsp;for&nbsp;plotting</td></tr>
<tr><td>958</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isstruct(Result.(DispInfo{i,1}))&nbsp;||&nbsp;isvector(Result.(DispInfo{i,1}))</td></tr>
<tr><td>959</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result&nbsp;=&nbsp;rmfield(Result,DispInfo{i,1});</td></tr>
<tr><td>960</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,2}=false;</td></tr>
<tr><td>961</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>962</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%second&nbsp;dimension&nbsp;indicates&nbsp;if&nbsp;it&nbsp;should&nbsp;be&nbsp;plotted&nbsp;</td></tr>
<tr><td>963</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,2}&nbsp;=&nbsp;true;</td></tr>
<tr><td>964</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;determine&nbsp;units</td></tr>
<tr><td>965</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strfind(DispInfo{i,1},'physicalDose')</td></tr>
<tr><td>966</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[Gy]';</td></tr>
<tr><td>967</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strfind(DispInfo{i,1},'alpha')</td></tr>
<tr><td>968</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[Gy^{-1}]';</td></tr>
<tr><td>969</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strfind(DispInfo{i,1},'beta')</td></tr>
<tr><td>970</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[Gy^{-2}]';</td></tr>
<tr><td>971</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strfind(DispInfo{i,1},'RBExD')</td></tr>
<tr><td>972</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[Gy(RBE)]';</td></tr>
<tr><td>973</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strfind(DispInfo{i,1},'LET')</td></tr>
<tr><td>974</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[keV/um]';</td></tr>
<tr><td>975</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>976</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,3}&nbsp;=&nbsp;'[a.u.]';</td></tr>
<tr><td>977</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>978</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,4}&nbsp;=&nbsp;[];&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;optional&nbsp;for&nbsp;the&nbsp;future:&nbsp;color&nbsp;range&nbsp;for&nbsp;plotting</td></tr>
<tr><td>979</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DispInfo{i,5}&nbsp;=&nbsp;[];&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;optional&nbsp;for&nbsp;the&nbsp;future:&nbsp;min&nbsp;max&nbsp;values</td></tr>
<tr><td>980</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>981</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>982</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>983</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String',fieldnames(Result));</td></tr>
<tr><td>984</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(strcmp(handles.SelectedDisplayOption,fieldnames(Result)))&nbsp;==&nbsp;0</td></tr>
<tr><td>985</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;DispInfo{find([DispInfo{:,2}],1,'first'),1};</td></tr>
<tr><td>986</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>987</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'Value',find(strcmp(handles.SelectedDisplayOption,fieldnames(Result))));</td></tr>
<tr><td>988</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>989</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>990</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>991</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>992</td><td bgcolor="#FFFFFF">%%&nbsp;set&nbsp;and&nbsp;get&nbsp;required&nbsp;variables</td></tr>
<tr><td>993</td><td bgcolor="#FF0000">plane&nbsp;=&nbsp;get(handles.popupPlane,'Value');</td></tr>
<tr><td>994</td><td bgcolor="#FF0000">slice&nbsp;=&nbsp;round(get(handles.sliderSlice,'Value'));</td></tr>
<tr><td>995</td><td bgcolor="#FF0000">hold(handles.axesFig,'on');</td></tr>
<tr><td>996</td><td bgcolor="#FF0000">if&nbsp;get(handles.popupTypeOfPlot,'Value')==1</td></tr>
<tr><td>997</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.axesFig,'YDir','Reverse');</td></tr>
<tr><td>998</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>999</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1000</td><td bgcolor="#FFFFFF">%%&nbsp;Remove&nbsp;colorbar?</td></tr>
<tr><td>1001</td><td bgcolor="#FF0000">plotColorbarSelection&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>1002</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1003</td><td bgcolor="#FF0000">if&nbsp;get(handles.popupTypeOfPlot,'Value')==2&nbsp;||&nbsp;plotColorbarSelection&nbsp;==&nbsp;1</td></tr>
<tr><td>1004</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(handles,'cBarHandel')</td></tr>
<tr><td>1005</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete(handles.cBarHandel);</td></tr>
<tr><td>1006</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1007</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%The&nbsp;following&nbsp;seems&nbsp;to&nbsp;be&nbsp;necessary&nbsp;as&nbsp;MATLAB&nbsp;messes&nbsp;up&nbsp;some&nbsp;stuff&nbsp;</td></tr>
<tr><td>1008</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%with&nbsp;the&nbsp;handle&nbsp;storage</td></tr>
<tr><td>1009</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ch&nbsp;=&nbsp;findall(gcf,'tag','Colorbar');</td></tr>
<tr><td>1010</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(ch)</td></tr>
<tr><td>1011</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete(ch);</td></tr>
<tr><td>1012</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1013</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1014</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1015</td><td bgcolor="#FF0000">selectIx&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');&nbsp;&nbsp;</td></tr>
<tr><td>1016</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1017</td><td bgcolor="#FF0000">cla(handles.axesFig);&nbsp;</td></tr>
<tr><td>1018</td><td bgcolor="#FFFFFF">%%&nbsp;plot&nbsp;ct&nbsp;-&nbsp;if&nbsp;a&nbsp;ct&nbsp;cube&nbsp;is&nbsp;available&nbsp;and&nbsp;type&nbsp;of&nbsp;plot&nbsp;is&nbsp;set&nbsp;to&nbsp;1&nbsp;and&nbsp;not&nbsp;2;&nbsp;1&nbsp;indicate&nbsp;cube&nbsp;plotting&nbsp;and&nbsp;2&nbsp;profile&nbsp;plotting</td></tr>
<tr><td>1019</td><td bgcolor="#FF0000">if&nbsp;~isempty(ct)&nbsp;&amp;&amp;&nbsp;get(handles.popupTypeOfPlot,'Value')==1</td></tr>
<tr><td>1020</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1021</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;selectIx&nbsp;==&nbsp;3</td></tr>
<tr><td>1022</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctIx&nbsp;=&nbsp;2;</td></tr>
<tr><td>1023</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1024</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctIx&nbsp;=&nbsp;selectIx;</td></tr>
<tr><td>1025</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1026</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1027</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.cubeHUavailable</td></tr>
<tr><td>1028</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plotCtCube&nbsp;=&nbsp;ct.cubeHU;</td></tr>
<tr><td>1029</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctLabel&nbsp;=&nbsp;'Hounsfield&nbsp;Units';</td></tr>
<tr><td>1030</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1031</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plotCtCube&nbsp;=&nbsp;ct.cube;</td></tr>
<tr><td>1032</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctLabel&nbsp;=&nbsp;'Electron&nbsp;Density&nbsp;/&nbsp;WEQ';</td></tr>
<tr><td>1033</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1034</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1035</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ctMap&nbsp;=&nbsp;matRad_getColormap(handles.ctColorMap,handles.cMapSize);</td></tr>
<tr><td>1036</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1037</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isempty(handles.dispWindow{ctIx,2})</td></tr>
<tr><td>1038</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{ctIx,2}&nbsp;=&nbsp;[min(reshape([ct.cubeHU{:}],[],1))&nbsp;max(reshape([ct.cubeHU{:}],[],1))];</td></tr>
<tr><td>1039</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1040</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1041</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobtnCT,'Value')</td></tr>
<tr><td>1042</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[AxesHandlesCT_Dose(end+1),~,handles.dispWindow{ctIx,1}]&nbsp;=&nbsp;matRad_plotCtSlice(handles.axesFig,plotCtCube,1,plane,slice,ctMap,handles.dispWindow{ctIx,1});</td></tr>
<tr><td>1043</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1044</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;colorbar?&nbsp;If&nbsp;1&nbsp;the&nbsp;user&nbsp;asked&nbsp;for&nbsp;the&nbsp;CT</td></tr>
<tr><td>1045</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;plotColorbarSelection&nbsp;==&nbsp;2&nbsp;&amp;&amp;&nbsp;handles.cBarChanged</td></tr>
<tr><td>1046</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Plot&nbsp;the&nbsp;colorbar</td></tr>
<tr><td>1047</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cBarHandel&nbsp;=&nbsp;matRad_plotColorbar(handles.axesFig,ctMap,handles.dispWindow{ctIx,1},'fontsize',defaultFontSize);</td></tr>
<tr><td>1048</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%adjust&nbsp;lables</td></tr>
<tr><td>1049</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(get(handles.cBarHandel,'ylabel'),'String',&nbsp;ctLabel,'fontsize',defaultFontSize);</td></tr>
<tr><td>1050</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;do&nbsp;not&nbsp;interprete&nbsp;as&nbsp;tex&nbsp;syntax</td></tr>
<tr><td>1051</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(get(handles.cBarHandel,'ylabel'),'interpreter','none');</td></tr>
<tr><td>1052</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1053</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1054</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1055</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1056</td><td bgcolor="#FFFFFF">%%&nbsp;plot&nbsp;dose&nbsp;cube</td></tr>
<tr><td>1057</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;=&nbsp;1&nbsp;&amp;&amp;&nbsp;&nbsp;get(handles.popupTypeOfPlot,'Value')==&nbsp;1&nbsp;&nbsp;&amp;&amp;&nbsp;exist('Result','var')</td></tr>
<tr><td>1058</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doseMap&nbsp;=&nbsp;matRad_getColormap(handles.doseColorMap,handles.cMapSize);</td></tr>
<tr><td>1059</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doseIx&nbsp;&nbsp;=&nbsp;3;</td></tr>
<tr><td>1060</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;if&nbsp;the&nbsp;selected&nbsp;display&nbsp;option&nbsp;doesn't&nbsp;exist&nbsp;then&nbsp;simply&nbsp;display</td></tr>
<tr><td>1061</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;the&nbsp;first&nbsp;cube&nbsp;of&nbsp;the&nbsp;Result&nbsp;struct</td></tr>
<tr><td>1062</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(Result,handles.SelectedDisplayOption)</td></tr>
<tr><td>1063</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CubeNames&nbsp;=&nbsp;fieldnames(Result);</td></tr>
<tr><td>1064</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;CubeNames{1,1};</td></tr>
<tr><td>1065</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1066</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1067</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dose&nbsp;=&nbsp;Result.(handles.SelectedDisplayOption);</td></tr>
<tr><td>1068</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1069</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;dose&nbsp;colorwash</td></tr>
<tr><td>1070</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(dose)&nbsp;&amp;&amp;&nbsp;~isvector(dose)</td></tr>
<tr><td>1071</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1072</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isempty(handles.dispWindow{doseIx,2})</td></tr>
<tr><td>1073</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{doseIx,2}&nbsp;=&nbsp;[min(dose(:))&nbsp;max(dose(:))];&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;min&nbsp;and&nbsp;max&nbsp;dose&nbsp;values</td></tr>
<tr><td>1074</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1075</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1076</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobtnDose,'Value')</td></tr>
<tr><td>1077</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[doseHandle,~,handles.dispWindow{doseIx,1}]&nbsp;=&nbsp;matRad_plotDoseSlice(handles.axesFig,dose,plane,slice,handles.CutOffLevel,handles.doseOpacity,doseMap,handles.dispWindow{doseIx,1});</td></tr>
<tr><td>1078</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AxesHandlesCT_Dose(end+1)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;doseHandle;</td></tr>
<tr><td>1079</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1080</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1081</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;colorbar?</td></tr>
<tr><td>1082</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;plotColorbarSelection&nbsp;&gt;&nbsp;2&nbsp;&amp;&amp;&nbsp;handles.cBarChanged</td></tr>
<tr><td>1083</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Plot&nbsp;the&nbsp;colorbar</td></tr>
<tr><td>1084</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cBarHandel&nbsp;=&nbsp;matRad_plotColorbar(handles.axesFig,doseMap,handles.dispWindow{selectIx,1},'fontsize',defaultFontSize);</td></tr>
<tr><td>1085</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%adjust&nbsp;lables</td></tr>
<tr><td>1086</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Idx&nbsp;=&nbsp;find(strcmp(handles.SelectedDisplayOption,DispInfo(:,1)));</td></tr>
<tr><td>1087</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(get(handles.cBarHandel,'ylabel'),'String',&nbsp;[DispInfo{Idx,1}&nbsp;'&nbsp;'&nbsp;DispInfo{Idx,3}&nbsp;],'fontsize',defaultFontSize);</td></tr>
<tr><td>1088</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;do&nbsp;not&nbsp;interprete&nbsp;as&nbsp;tex&nbsp;syntax</td></tr>
<tr><td>1089</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(get(handles.cBarHandel,'ylabel'),'interpreter','none');</td></tr>
<tr><td>1090</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1091</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1092</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1093</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1094</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%&nbsp;plot&nbsp;iso&nbsp;dose&nbsp;lines</td></tr>
<tr><td>1095</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobtnIsoDoseLines,'Value')&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1096</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plotLabels&nbsp;=&nbsp;get(handles.radiobtnIsoDoseLinesLabels,'Value')&nbsp;==&nbsp;1;</td></tr>
<tr><td>1097</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1098</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Sanity&nbsp;Check&nbsp;for&nbsp;Contours,&nbsp;which&nbsp;actually&nbsp;should&nbsp;have&nbsp;been&nbsp;</td></tr>
<tr><td>1099</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%computed&nbsp;before&nbsp;calling&nbsp;UpdatePlot</td></tr>
<tr><td>1100</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(handles.IsoDose,'Contours')</td></tr>
<tr><td>1101</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try</td></tr>
<tr><td>1102</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Contours&nbsp;=&nbsp;matRad_computeIsoDoseContours(dose,handles.IsoDose.Levels);&nbsp;</td></tr>
<tr><td>1103</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>1104</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%If&nbsp;the&nbsp;computation&nbsp;didn't&nbsp;work,&nbsp;we&nbsp;set&nbsp;the&nbsp;field&nbsp;to</td></tr>
<tr><td>1105</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%empty,&nbsp;which&nbsp;will&nbsp;force&nbsp;matRad_plotIsoDoseLines&nbsp;to&nbsp;use</td></tr>
<tr><td>1106</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%matlabs&nbsp;contour&nbsp;function&nbsp;instead&nbsp;of&nbsp;repeating&nbsp;the</td></tr>
<tr><td>1107</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%failing&nbsp;computation&nbsp;every&nbsp;time</td></tr>
<tr><td>1108</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Contours&nbsp;=&nbsp;[];</td></tr>
<tr><td>1109</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warning('Could&nbsp;not&nbsp;compute&nbsp;isodose&nbsp;lines!&nbsp;Will&nbsp;try&nbsp;slower&nbsp;contour&nbsp;function!');</td></tr>
<tr><td>1110</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1111</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1112</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AxesHandlesIsoDose&nbsp;=&nbsp;matRad_plotIsoDoseLines(handles.axesFig,dose,handles.IsoDose.Contours,handles.IsoDose.Levels,plotLabels,plane,slice,doseMap,handles.dispWindow{doseIx,1},'LineWidth',1.5);</td></tr>
<tr><td>1113</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1114</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1115</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1116</td><td bgcolor="#FF0000">selectIx&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>1117</td><td bgcolor="#FF0000">set(handles.txtMinVal,'String',num2str(handles.dispWindow{selectIx,2}(1,1)));</td></tr>
<tr><td>1118</td><td bgcolor="#FF0000">set(handles.txtMaxVal,'String',num2str(handles.dispWindow{selectIx,2}(1,2)));</td></tr>
<tr><td>1119</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1120</td><td bgcolor="#FFFFFF">%%&nbsp;plot&nbsp;VOIs</td></tr>
<tr><td>1121</td><td bgcolor="#FF0000">if&nbsp;get(handles.radiobtnContour,'Value')&nbsp;&amp;&amp;&nbsp;get(handles.popupTypeOfPlot,'Value')==1&nbsp;&amp;&amp;&nbsp;handles.State&gt;0</td></tr>
<tr><td>1122</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AxesHandlesVOI&nbsp;=&nbsp;[AxesHandlesVOI&nbsp;matRad_plotVoiContourSlice(handles.axesFig,cst,ct,1,handles.VOIPlotFlag,plane,slice,[],'LineWidth',2)];</td></tr>
<tr><td>1123</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1124</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1125</td><td bgcolor="#FFFFFF">%%&nbsp;Set&nbsp;axis&nbsp;labels&nbsp;and&nbsp;plot&nbsp;iso&nbsp;center</td></tr>
<tr><td>1126</td><td bgcolor="#FF0000">matRad_plotAxisLabels(handles.axesFig,ct,plane,slice,defaultFontSize);</td></tr>
<tr><td>1127</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1128</td><td bgcolor="#FF0000">if&nbsp;get(handles.radioBtnIsoCenter,'Value')&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;get(handles.popupTypeOfPlot,'Value')&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;~isempty(pln)</td></tr>
<tr><td>1129</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;hIsoCenterCross&nbsp;=&nbsp;matRad_plotIsoCenterMarker(handles.axesFig,pln,ct,plane,slice);</td></tr>
<tr><td>1130</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1131</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1132</td><td bgcolor="#FF0000">if&nbsp;get(handles.radiobtnPlan,'value')&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;~isempty(pln)</td></tr>
<tr><td>1133</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_plotProjectedGantryAngles(handles.axesFig,pln,ct,plane);</td></tr>
<tr><td>1134</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1135</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1136</td><td bgcolor="#FFFFFF">%&nbsp;the&nbsp;following&nbsp;line&nbsp;ensures&nbsp;the&nbsp;plotting&nbsp;order&nbsp;(optional)</td></tr>
<tr><td>1137</td><td bgcolor="#FFFFFF">%&nbsp;set(gca,'Children',[AxesHandlesCT_Dose&nbsp;hIsoCenterCross&nbsp;AxesHandlesIsoDose&nbsp;&nbsp;AxesHandlesVOI&nbsp;]);&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1138</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;</td></tr>
<tr><td>1139</td><td bgcolor="#FFFFFF">%set&nbsp;axis&nbsp;ratio</td></tr>
<tr><td>1140</td><td bgcolor="#FF0000">ratios&nbsp;=&nbsp;[1/ct.resolution.x&nbsp;1/ct.resolution.y&nbsp;1/ct.resolution.z];</td></tr>
<tr><td>1141</td><td bgcolor="#FF0000">set(handles.axesFig,'DataAspectRatioMode','manual');</td></tr>
<tr><td>1142</td><td bgcolor="#FF0000">if&nbsp;plane&nbsp;==&nbsp;1&nbsp;</td></tr>
<tr><td>1143</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;=&nbsp;[ratios(3)&nbsp;ratios(1)]./max([ratios(3)&nbsp;ratios(1)]);&nbsp;&nbsp;</td></tr>
<tr><td>1144</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.axesFig,'DataAspectRatio',[res&nbsp;1])</td></tr>
<tr><td>1145</td><td bgcolor="#FFFFFF">elseif&nbsp;plane&nbsp;==&nbsp;2&nbsp;%&nbsp;sagittal&nbsp;plane</td></tr>
<tr><td>1146</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;=&nbsp;[ratios(3)&nbsp;ratios(2)]./max([ratios(3)&nbsp;ratios(2)]);&nbsp;&nbsp;</td></tr>
<tr><td>1147</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.axesFig,'DataAspectRatio',[res&nbsp;1])&nbsp;</td></tr>
<tr><td>1148</td><td bgcolor="#FFFFFF">elseif&nbsp;&nbsp;plane&nbsp;==&nbsp;3&nbsp;%&nbsp;Axial&nbsp;plane</td></tr>
<tr><td>1149</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;res&nbsp;=&nbsp;[ratios(1)&nbsp;ratios(2)]./max([ratios(1)&nbsp;ratios(2)]);&nbsp;&nbsp;</td></tr>
<tr><td>1150</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.axesFig,'DataAspectRatio',[res&nbsp;1])</td></tr>
<tr><td>1151</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1152</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1153</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1154</td><td bgcolor="#FFFFFF">%%&nbsp;profile&nbsp;plot</td></tr>
<tr><td>1155</td><td bgcolor="#FF0000">if&nbsp;get(handles.popupTypeOfPlot,'Value')&nbsp;==&nbsp;2&nbsp;&amp;&amp;&nbsp;exist('Result','var')</td></tr>
<tr><td>1156</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;SAD</td></tr>
<tr><td>1157</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;fileName&nbsp;=&nbsp;[pln.radiationMode&nbsp;'_'&nbsp;pln.machine];</td></tr>
<tr><td>1158</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;try</td></tr>
<tr><td>1159</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;load(['basedata'&nbsp;filesep&nbsp;fileName]);</td></tr>
<tr><td>1160</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SAD&nbsp;=&nbsp;machine.meta.SAD;</td></tr>
<tr><td>1161</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>1162</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error(['Could&nbsp;not&nbsp;find&nbsp;the&nbsp;following&nbsp;machine&nbsp;file:&nbsp;'&nbsp;fileName&nbsp;]);&nbsp;</td></tr>
<tr><td>1163</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1164</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1165</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;clear&nbsp;view&nbsp;and&nbsp;initialize&nbsp;some&nbsp;values</td></tr>
<tr><td>1166</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cla(handles.axesFig,'reset')</td></tr>
<tr><td>1167</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(gca,'YDir','normal');</td></tr>
<tr><td>1168</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ylabel('{\color{black}dose&nbsp;[Gy]}')</td></tr>
<tr><td>1169</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cColor={'black','green','magenta','cyan','yellow','red','blue'};</td></tr>
<tr><td>1170</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1171</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;Rotate&nbsp;the&nbsp;system&nbsp;into&nbsp;the&nbsp;beam.&nbsp;</td></tr>
<tr><td>1172</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;passive&nbsp;rotation&nbsp;&amp;&nbsp;row&nbsp;vector&nbsp;multiplication&nbsp;&amp;&nbsp;inverted&nbsp;rotation&nbsp;requires&nbsp;triple&nbsp;matrix&nbsp;transpose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1173</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;rotMat_system_T&nbsp;=&nbsp;transpose(matRad_getRotationMatrix(pln.propStf.gantryAngles(handles.selectedBeam),pln.propStf.couchAngles(handles.selectedBeam)));</td></tr>
<tr><td>1174</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1175</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(handles.ProfileType,'longitudinal')</td></tr>
<tr><td>1176</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourcePointBEV&nbsp;=&nbsp;[handles.profileOffset&nbsp;-SAD&nbsp;&nbsp;&nbsp;0];</td></tr>
<tr><td>1177</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetPointBEV&nbsp;=&nbsp;[handles.profileOffset&nbsp;&nbsp;SAD&nbsp;&nbsp;&nbsp;0];</td></tr>
<tr><td>1178</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strcmp(handles.ProfileType,'lateral')</td></tr>
<tr><td>1179</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sourcePointBEV&nbsp;=&nbsp;[-SAD&nbsp;handles.profileOffset&nbsp;&nbsp;&nbsp;0];</td></tr>
<tr><td>1180</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;targetPointBEV&nbsp;=&nbsp;[&nbsp;SAD&nbsp;handles.profileOffset&nbsp;&nbsp;&nbsp;0];</td></tr>
<tr><td>1181</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1182</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1183</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;rotSourcePointBEV&nbsp;=&nbsp;sourcePointBEV&nbsp;*&nbsp;rotMat_system_T;</td></tr>
<tr><td>1184</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;rotTargetPointBEV&nbsp;=&nbsp;targetPointBEV&nbsp;*&nbsp;rotMat_system_T;</td></tr>
<tr><td>1185</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1186</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;perform&nbsp;raytracing&nbsp;on&nbsp;the&nbsp;central&nbsp;axis&nbsp;of&nbsp;the&nbsp;selected&nbsp;beam,&nbsp;use&nbsp;unit</td></tr>
<tr><td>1187</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;electron&nbsp;density&nbsp;for&nbsp;plotting&nbsp;against&nbsp;the&nbsp;geometrical&nbsp;depth</td></tr>
<tr><td>1188</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;[~,l,rho,~,ix]&nbsp;=&nbsp;matRad_siddonRayTracer(pln.propStf.isoCenter(handles.selectedBeam,:),ct.resolution,rotSourcePointBEV,rotTargetPointBEV,{0*ct.cubeHU{1}+1});</td></tr>
<tr><td>1189</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;d&nbsp;=&nbsp;[0&nbsp;l&nbsp;.*&nbsp;rho{1}];</td></tr>
<tr><td>1190</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;Calculate&nbsp;accumulated&nbsp;d&nbsp;sum.</td></tr>
<tr><td>1191</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;vX&nbsp;=&nbsp;cumsum(d(1:end-1));</td></tr>
<tr><td>1192</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1193</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;this&nbsp;step&nbsp;is&nbsp;necessary&nbsp;if&nbsp;visualization&nbsp;is&nbsp;set&nbsp;to&nbsp;profile&nbsp;plot</td></tr>
<tr><td>1194</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;and&nbsp;another&nbsp;optimization&nbsp;is&nbsp;carried&nbsp;out&nbsp;-&nbsp;set&nbsp;focus&nbsp;on&nbsp;GUI</td></tr>
<tr><td>1195</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figHandles&nbsp;=&nbsp;get(0,'Children');</td></tr>
<tr><td>1196</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;idxHandle&nbsp;=&nbsp;[];</td></tr>
<tr><td>1197</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(figHandles)</td></tr>
<tr><td>1198</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;v=version;</td></tr>
<tr><td>1199</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;str2double(v(1:3))&gt;=&nbsp;8.5</td></tr>
<tr><td>1200</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idxHandle&nbsp;=&nbsp;strcmp({figHandles(:).Name},'matRadGUI');</td></tr>
<tr><td>1201</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1202</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;idxHandle&nbsp;=&nbsp;strcmp(get(figHandles,'Name'),'matRadGUI');</td></tr>
<tr><td>1203</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1204</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1205</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figure(figHandles(idxHandle));</td></tr>
<tr><td>1206</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1207</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;physical&nbsp;dose</td></tr>
<tr><td>1208</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;=&nbsp;get(handles.popupDisplayOption,'String');</td></tr>
<tr><td>1209</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;SelectedCube&nbsp;=&nbsp;Content{get(handles.popupDisplayOption,'Value')};</td></tr>
<tr><td>1210</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(strcmp(SelectedCube,{'physicalDose','effect','RBExDose','alpha','beta','RBE'}))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>1211</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;'';</td></tr>
<tr><td>1212</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1213</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Idx&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;find(SelectedCube&nbsp;==&nbsp;'_');</td></tr>
<tr><td>1214</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;SelectedCube(Idx:end);</td></tr>
<tr><td>1215</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1216</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1217</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;mPhysDose&nbsp;=&nbsp;Result.(['physicalDose'&nbsp;Suffix]);&nbsp;</td></tr>
<tr><td>1218</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{1}&nbsp;=&nbsp;plot(handles.axesFig,vX,mPhysDose(ix),'color',cColor{1,1},'LineWidth',3);&nbsp;hold&nbsp;on;&nbsp;</td></tr>
<tr><td>1219</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{1,2}&nbsp;='physicalDose';</td></tr>
<tr><td>1220</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ylabel(handles.axesFig,'dose&nbsp;in&nbsp;[Gy]');</td></tr>
<tr><td>1221</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.axesFig,'FontSize',defaultFontSize);</td></tr>
<tr><td>1222</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1223</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;counter</td></tr>
<tr><td>1224</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Cnt=2;</td></tr>
<tr><td>1225</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1226</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(Result,['RBE'&nbsp;Suffix])</td></tr>
<tr><td>1227</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1228</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%disbale&nbsp;specific&nbsp;plots</td></tr>
<tr><td>1229</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%DispInfo{6,2}=0;</td></tr>
<tr><td>1230</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%DispInfo{5,2}=0;</td></tr>
<tr><td>1231</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%DispInfo{2,2}=0;</td></tr>
<tr><td>1232</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1233</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;generate&nbsp;two&nbsp;lines&nbsp;for&nbsp;ylabel</td></tr>
<tr><td>1234</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringYLabel1&nbsp;=&nbsp;'\fontsize{8}{\color{red}RBE&nbsp;x&nbsp;dose&nbsp;[Gy(RBE)]&nbsp;\color{black}dose&nbsp;[Gy]&nbsp;';</td></tr>
<tr><td>1235</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringYLabel2&nbsp;=&nbsp;'';</td></tr>
<tr><td>1236</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i=1:1:size(DispInfo,1)</td></tr>
<tr><td>1237</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;DispInfo{i,2}&nbsp;&amp;&amp;&nbsp;sum(strcmp(DispInfo{i,1},{['effect'&nbsp;Suffix],['alpha'&nbsp;Suffix],['beta'&nbsp;Suffix]}))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>1238</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%physicalDose&nbsp;is&nbsp;already&nbsp;plotted&nbsp;and&nbsp;RBExD&nbsp;vs&nbsp;RBE&nbsp;is&nbsp;plotted&nbsp;later&nbsp;with&nbsp;plotyy</td></tr>
<tr><td>1239</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~strcmp(DispInfo{i,1},['RBExDose'&nbsp;Suffix])&nbsp;&amp;&amp;...</td></tr>
<tr><td>1240</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~strcmp(DispInfo{i,1},['RBE'&nbsp;Suffix])&nbsp;&amp;&amp;&nbsp;...</td></tr>
<tr><td>1241</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~strcmp(DispInfo{i,1},['physicalDose'&nbsp;Suffix])</td></tr>
<tr><td>1242</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1243</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mCube&nbsp;=&nbsp;Result.([DispInfo{i,1}]);</td></tr>
<tr><td>1244</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,1}&nbsp;=&nbsp;plot(handles.axesFig,vX,mCube(ix),'color',cColor{1,Cnt},'LineWidth',3);hold&nbsp;on;&nbsp;</td></tr>
<tr><td>1245</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,2}&nbsp;=&nbsp;DispInfo{i,1};</td></tr>
<tr><td>1246</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringYLabel2&nbsp;=&nbsp;[StringYLabel2&nbsp;&nbsp;'&nbsp;\color{'&nbsp;&nbsp;cColor{1,Cnt}&nbsp;'}'&nbsp;DispInfo{i,1}&nbsp;'&nbsp;['&nbsp;&nbsp;DispInfo{i,3}&nbsp;']'];</td></tr>
<tr><td>1247</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cnt&nbsp;=&nbsp;Cnt+1;</td></tr>
<tr><td>1248</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1249</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1250</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1251</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StringYLabel2&nbsp;=&nbsp;[StringYLabel2&nbsp;'}'];</td></tr>
<tr><td>1252</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;always&nbsp;plot&nbsp;RBExD&nbsp;against&nbsp;RBE</td></tr>
<tr><td>1253</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mRBExDose&nbsp;=&nbsp;Result.(['RBExDose'&nbsp;Suffix]);</td></tr>
<tr><td>1254</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vBED&nbsp;=&nbsp;mRBExDose(ix);</td></tr>
<tr><td>1255</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mRBE&nbsp;=&nbsp;Result.(['RBE'&nbsp;Suffix]);</td></tr>
<tr><td>1256</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vRBE&nbsp;=&nbsp;mRBE(ix);</td></tr>
<tr><td>1257</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1258</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;biological&nbsp;dose&nbsp;against&nbsp;RBE</td></tr>
<tr><td>1259</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ax,&nbsp;PlotHandles{Cnt,1},&nbsp;PlotHandles{Cnt+1,1}]=plotyy(handles.axesFig,vX,vBED,vX,vRBE,'plot');hold&nbsp;on;</td></tr>
<tr><td>1260</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,2}='RBExDose';</td></tr>
<tr><td>1261</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt+1,2}='RBE';</td></tr>
<tr><td>1262</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1263</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;plotyy&nbsp;properties</td></tr>
<tr><td>1264</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(get(ax(2),'Ylabel'),'String','RBE&nbsp;[a.u.]','FontSize',8);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1265</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ylabel({StringYLabel1;StringYLabel2})</td></tr>
<tr><td>1266</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(PlotHandles{Cnt,1},'Linewidth',4,'color','r');</td></tr>
<tr><td>1267</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(PlotHandles{Cnt+1,1},'Linewidth',3,'color','b');</td></tr>
<tr><td>1268</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(ax(1),'ycolor','r')</td></tr>
<tr><td>1269</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(ax(2),'ycolor','b')</td></tr>
<tr><td>1270</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(ax,'FontSize',8);</td></tr>
<tr><td>1271</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cnt=Cnt+2;</td></tr>
<tr><td>1272</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1273</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1274</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;asses&nbsp;target&nbsp;coordinates&nbsp;</td></tr>
<tr><td>1275</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmpPrior&nbsp;=&nbsp;intmax;</td></tr>
<tr><td>1276</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmpSize&nbsp;=&nbsp;0;</td></tr>
<tr><td>1277</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i=1:size(cst,1)</td></tr>
<tr><td>1278</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(cst{i,3},'TARGET')&nbsp;&amp;&amp;&nbsp;tmpPrior&nbsp;&gt;=&nbsp;cst{i,5}.Priority&nbsp;&amp;&amp;&nbsp;tmpSize&lt;numel(cst{i,4}{1})</td></tr>
<tr><td>1279</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;linIdxTarget&nbsp;=&nbsp;unique(cst{i,4}{1});</td></tr>
<tr><td>1280</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpPrior=cst{i,5}.Priority;</td></tr>
<tr><td>1281</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpSize=numel(cst{i,4}{1});</td></tr>
<tr><td>1282</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VOI&nbsp;=&nbsp;cst{i,2};</td></tr>
<tr><td>1283</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1284</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1285</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1286</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;=&nbsp;sprintf('profile&nbsp;plot&nbsp;-&nbsp;central&nbsp;axis&nbsp;of&nbsp;%d&nbsp;beam&nbsp;gantry&nbsp;angle&nbsp;%d?&nbsp;couch&nbsp;angle&nbsp;%d?',...</td></tr>
<tr><td>1287</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.selectedBeam&nbsp;,pln.propStf.gantryAngles(handles.selectedBeam),pln.propStf.couchAngles(handles.selectedBeam));</td></tr>
<tr><td>1288</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;h_title&nbsp;=&nbsp;title(handles.axesFig,str,'FontSize',defaultFontSize);</td></tr>
<tr><td>1289</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;=&nbsp;get(h_title,'Position');</td></tr>
<tr><td>1290</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(h_title,'Position',[pos(1)-40&nbsp;pos(2)&nbsp;pos(3)])</td></tr>
<tr><td>1291</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1292</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;plot&nbsp;target&nbsp;boundaries</td></tr>
<tr><td>1293</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;mTargetCube&nbsp;=&nbsp;zeros(ct.cubeDim);</td></tr>
<tr><td>1294</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;mTargetCube(linIdxTarget)&nbsp;=&nbsp;1;</td></tr>
<tr><td>1295</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;vProfile&nbsp;=&nbsp;mTargetCube(ix);</td></tr>
<tr><td>1296</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;WEPL_Target_Entry&nbsp;=&nbsp;vX(find(vProfile,1,'first'));</td></tr>
<tr><td>1297</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;WEPL_Target_Exit&nbsp;&nbsp;=&nbsp;vX(find(vProfile,1,'last'));</td></tr>
<tr><td>1298</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,2}&nbsp;=[VOI&nbsp;'&nbsp;boundary'];</td></tr>
<tr><td>1299</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1300</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(WEPL_Target_Entry)&nbsp;&amp;&amp;&nbsp;~isempty(WEPL_Target_Exit)</td></tr>
<tr><td>1301</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;hold&nbsp;on</td></tr>
<tr><td>1302</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,1}&nbsp;=&nbsp;...</td></tr>
<tr><td>1303</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plot([WEPL_Target_Entry&nbsp;WEPL_Target_Entry],get(handles.axesFig,'YLim'),'--','Linewidth',3,'color','k');hold&nbsp;on</td></tr>
<tr><td>1304</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plot([WEPL_Target_Exit&nbsp;WEPL_Target_Exit],get(handles.axesFig,'YLim'),'--','Linewidth',3,'color','k');hold&nbsp;on</td></tr>
<tr><td>1305</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1306</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1307</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PlotHandles{Cnt,1}&nbsp;=[];</td></tr>
<tr><td>1308</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1309</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1310</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;Lines&nbsp;&nbsp;=&nbsp;PlotHandles(~cellfun(@isempty,PlotHandles(:,1)),1);</td></tr>
<tr><td>1311</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;Labels&nbsp;=&nbsp;PlotHandles(~cellfun(@isempty,PlotHandles(:,1)),2);</td></tr>
<tr><td>1312</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;h=legend(handles.axesFig,[Lines{:}],Labels{:});</td></tr>
<tr><td>1313</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;set(h,'FontSize',defaultFontSize);</td></tr>
<tr><td>1314</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;xlabel('radiological&nbsp;depth&nbsp;[mm]','FontSize',8);&nbsp;&nbsp;</td></tr>
<tr><td>1315</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;grid&nbsp;on,&nbsp;grid&nbsp;minor</td></tr>
<tr><td>1316</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1317</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1318</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1319</td><td bgcolor="#FF0000">zoom(handles.figure1,'reset');</td></tr>
<tr><td>1320</td><td bgcolor="#FF0000">axis(handles.axesFig,'tight');</td></tr>
<tr><td>1321</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1322</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1323</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'rememberCurrAxes')&nbsp;&amp;&amp;&nbsp;handles.rememberCurrAxes</td></tr>
<tr><td>1324</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;axis(currAxes);</td></tr>
<tr><td>1325</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1326</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1327</td><td bgcolor="#FF0000">hold(handles.axesFig,'off');</td></tr>
<tr><td>1328</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1329</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;false;</td></tr>
<tr><td>1330</td><td bgcolor="#FF0000">guidata(handles.axesFig,handles);</td></tr>
<tr><td>1331</td><td bgcolor="#FFFFFF">%guidata(gcf,handles);&nbsp;&nbsp;</td></tr>
<tr><td>1332</td><td bgcolor="#FF0000">if&nbsp;get(handles.popupTypeOfPlot,'Value')==1&nbsp;</td></tr>
<tr><td>1333</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateColormapOptions(handles);</td></tr>
<tr><td>1334</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1335</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1336</td><td bgcolor="#FF0000">Update3DView(handles);</td></tr>
<tr><td>1337</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1338</td><td bgcolor="#FFFFFF">%profile&nbsp;off;</td></tr>
<tr><td>1339</td><td bgcolor="#FFFFFF">%profile&nbsp;viewer;</td></tr>
<tr><td>1340</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1341</td><td bgcolor="#FFFFFF">function&nbsp;Update3DView(handles)</td></tr>
<tr><td>1342</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1343</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'axesFig3D')&nbsp;&amp;&amp;&nbsp;isfield(handles,'fig3D')&nbsp;&amp;&amp;&nbsp;isgraphics(handles.axesFig3D)&nbsp;&amp;&amp;&nbsp;isgraphics(handles.fig3D)</td></tr>
<tr><td>1344</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;axesFig3D&nbsp;=&nbsp;handles.axesFig3D;</td></tr>
<tr><td>1345</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;fig3D&nbsp;=&nbsp;handles.fig3D;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1346</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>1347</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>1348</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1349</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1350</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;==&nbsp;0</td></tr>
<tr><td>1351</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>1352</td><td bgcolor="#FFFFFF">elseif&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>1353</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>1354</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>1355</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Result&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>1356</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1357</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1358</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>1359</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>1360</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>1361</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1362</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('stf',AllVarNames)</td></tr>
<tr><td>1363</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;=&nbsp;evalin('base','stf');</td></tr>
<tr><td>1364</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1365</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%validate&nbsp;stf&nbsp;with&nbsp;current&nbsp;pln&nbsp;settings</td></tr>
<tr><td>1366</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validStf&nbsp;=&nbsp;true;</td></tr>
<tr><td>1367</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gantryAngles&nbsp;=&nbsp;[stf.gantryAngle];</td></tr>
<tr><td>1368</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validStf&nbsp;=&nbsp;isequal(gantryAngles,pln.propStf.gantryAngles)&nbsp;&amp;&nbsp;validStf;</td></tr>
<tr><td>1369</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;couchAngles&nbsp;=&nbsp;[stf.couchAngle];</td></tr>
<tr><td>1370</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validStf&nbsp;=&nbsp;isequal(couchAngles,pln.propStf.couchAngles)&nbsp;&amp;&nbsp;validStf;</td></tr>
<tr><td>1371</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isoCenter&nbsp;=&nbsp;vertcat(stf.isoCenter);</td></tr>
<tr><td>1372</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;validStf&nbsp;=&nbsp;isequal(isoCenter,pln.propStf.isoCenter)&nbsp;&amp;&nbsp;validStf;</td></tr>
<tr><td>1373</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1374</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~validStf</td></tr>
<tr><td>1375</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg&nbsp;=&nbsp;MatRad_Config.instance();</td></tr>
<tr><td>1376</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg.dispWarning('stf&nbsp;and&nbsp;pln&nbsp;are&nbsp;not&nbsp;consistent,&nbsp;using&nbsp;pln&nbsp;for&nbsp;geometry&nbsp;display!');</td></tr>
<tr><td>1377</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;=&nbsp;[];</td></tr>
<tr><td>1378</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1379</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1380</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1381</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;=&nbsp;[];</td></tr>
<tr><td>1382</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1383</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1384</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1385</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1386</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1387</td><td bgcolor="#FF0000">oldView&nbsp;=&nbsp;get(axesFig3D,'View');</td></tr>
<tr><td>1388</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1389</td><td bgcolor="#FF0000">cla(axesFig3D);</td></tr>
<tr><td>1390</td><td bgcolor="#FFFFFF">%delete(allchild(axesFig3D));</td></tr>
<tr><td>1391</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1392</td><td bgcolor="#FFFFFF">%test&nbsp;=&nbsp;allchild(axesFig3D);</td></tr>
<tr><td>1393</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1394</td><td bgcolor="#FF0000">plane&nbsp;=&nbsp;get(handles.popupPlane,'Value');</td></tr>
<tr><td>1395</td><td bgcolor="#FF0000">slice&nbsp;=&nbsp;round(get(handles.sliderSlice,'Value'));</td></tr>
<tr><td>1396</td><td bgcolor="#FF0000">defaultFontSize&nbsp;=&nbsp;8;</td></tr>
<tr><td>1397</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1398</td><td bgcolor="#FFFFFF">%Check&nbsp;if&nbsp;we&nbsp;need&nbsp;to&nbsp;precompute&nbsp;the&nbsp;surface&nbsp;data</td></tr>
<tr><td>1399</td><td bgcolor="#FF0000">if&nbsp;size(cst,2)&nbsp;&lt;&nbsp;8</td></tr>
<tr><td>1400</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;matRad_computeAllVoiSurfaces(ct,cst);</td></tr>
<tr><td>1401</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);</td></tr>
<tr><td>1402</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1403</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1404</td><td bgcolor="#FF0000">set(fig3D,'Color',0.5*[1&nbsp;1&nbsp;1]);</td></tr>
<tr><td>1405</td><td bgcolor="#FF0000">set(axesFig3D,'Color',1*[0&nbsp;0&nbsp;0]);</td></tr>
<tr><td>1406</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1407</td><td bgcolor="#FFFFFF">%%&nbsp;Plot&nbsp;3D&nbsp;structures</td></tr>
<tr><td>1408</td><td bgcolor="#FF0000">hold(axesFig3D,'on');</td></tr>
<tr><td>1409</td><td bgcolor="#FF0000">if&nbsp;get(handles.radiobtnContour,'Value')&nbsp;&amp;&amp;&nbsp;handles.State&gt;0</td></tr>
<tr><td>1410</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;voiPatches&nbsp;=&nbsp;matRad_plotVois3D(axesFig3D,ct,cst,handles.VOIPlotFlag,colorcube);</td></tr>
<tr><td>1411</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1412</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1413</td><td bgcolor="#FFFFFF">%%&nbsp;plot&nbsp;the&nbsp;CT&nbsp;slice</td></tr>
<tr><td>1414</td><td bgcolor="#FF0000">if&nbsp;get(handles.radiobtnCT,'Value')</td></tr>
<tr><td>1415</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=&nbsp;handles.dispWindow{2,1};&nbsp;%(2&nbsp;for&nbsp;ct)</td></tr>
<tr><td>1416</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ctMap&nbsp;=&nbsp;matRad_getColormap(handles.ctColorMap,handles.cMapSize);</td></tr>
<tr><td>1417</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ctHandle&nbsp;=&nbsp;matRad_plotCtSlice3D(axesFig3D,ct,1,plane,slice,ctMap,window);</td></tr>
<tr><td>1418</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1419</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1420</td><td bgcolor="#FFFFFF">%%&nbsp;plot&nbsp;the&nbsp;dose&nbsp;slice</td></tr>
<tr><td>1421</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;=&nbsp;1&nbsp;&amp;&amp;&nbsp;exist('Result','var')</td></tr>
<tr><td>1422</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;doseMap&nbsp;=&nbsp;matRad_getColormap(handles.doseColorMap,handles.cMapSize);</td></tr>
<tr><td>1423</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;doseIx&nbsp;&nbsp;=&nbsp;3;</td></tr>
<tr><td>1424</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;if&nbsp;the&nbsp;selected&nbsp;display&nbsp;option&nbsp;doesn't&nbsp;exist&nbsp;then&nbsp;simply&nbsp;display</td></tr>
<tr><td>1425</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;the&nbsp;first&nbsp;cube&nbsp;of&nbsp;the&nbsp;Result&nbsp;struct</td></tr>
<tr><td>1426</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(Result,handles.SelectedDisplayOption)</td></tr>
<tr><td>1427</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CubeNames&nbsp;=&nbsp;fieldnames(Result);</td></tr>
<tr><td>1428</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;CubeNames{1,1};</td></tr>
<tr><td>1429</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1430</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1431</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;dose&nbsp;=&nbsp;Result.(handles.SelectedDisplayOption);</td></tr>
<tr><td>1432</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1433</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;dose&nbsp;colorwash</td></tr>
<tr><td>1434</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(dose)&nbsp;&amp;&amp;&nbsp;~isvector(dose)</td></tr>
<tr><td>1435</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1436</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isempty(handles.dispWindow{doseIx,2})</td></tr>
<tr><td>1437</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{doseIx,2}&nbsp;=&nbsp;[min(dose(:))&nbsp;max(dose(:))];&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;min&nbsp;and&nbsp;max&nbsp;dose&nbsp;values</td></tr>
<tr><td>1438</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1439</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1440</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobtnDose,'Value')</td></tr>
<tr><td>1441</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[doseHandle,~,handles.dispWindow{doseIx,1}]&nbsp;=&nbsp;matRad_plotDoseSlice3D(axesFig3D,ct,dose,plane,slice,handles.CutOffLevel,handles.doseOpacity,doseMap,handles.dispWindow{doseIx,1});</td></tr>
<tr><td>1442</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1443</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobtnIsoDoseLines,'Value')</td></tr>
<tr><td>1444</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_plotIsoDoseLines3D(axesFig3D,ct,dose,handles.IsoDose.Contours,handles.IsoDose.Levels,plane,slice,doseMap,handles.dispWindow{doseIx,1},'LineWidth',1.5);</td></tr>
<tr><td>1445</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1446</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1447</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1448</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1449</td><td bgcolor="#FF0000">if&nbsp;get(handles.radiobtnPlan,'Value')</td></tr>
<tr><td>1450</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_plotPlan3D(axesFig3D,pln,stf);</td></tr>
<tr><td>1451</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1452</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1453</td><td bgcolor="#FFFFFF">%hLight&nbsp;=&nbsp;light('Parent',axesFig3D);</td></tr>
<tr><td>1454</td><td bgcolor="#FFFFFF">%camlight(hLight,'left');</td></tr>
<tr><td>1455</td><td bgcolor="#FFFFFF">%lighting('gouraud');</td></tr>
<tr><td>1456</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1457</td><td bgcolor="#FF0000">xlabel(axesFig3D,'x&nbsp;[voxels]','FontSize',defaultFontSize)</td></tr>
<tr><td>1458</td><td bgcolor="#FF0000">ylabel(axesFig3D,'y&nbsp;[voxels]','FontSize',defaultFontSize)</td></tr>
<tr><td>1459</td><td bgcolor="#FF0000">zlabel(axesFig3D,'z&nbsp;[voxels]','FontSize',defaultFontSize)</td></tr>
<tr><td>1460</td><td bgcolor="#FF0000">title(axesFig3D,'matRad&nbsp;3D&nbsp;view');</td></tr>
<tr><td>1461</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1462</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;axis&nbsp;ratio</td></tr>
<tr><td>1463</td><td bgcolor="#FF0000">ratios&nbsp;=&nbsp;[1&nbsp;1&nbsp;1];&nbsp;%[1/ct.resolution.x&nbsp;1/ct.resolution.y&nbsp;1/ct.resolution.z];</td></tr>
<tr><td>1464</td><td bgcolor="#FF0000">ratios&nbsp;=&nbsp;ratios([2&nbsp;1&nbsp;3]);</td></tr>
<tr><td>1465</td><td bgcolor="#FF0000">set(axesFig3D,'DataAspectRatioMode','manual');</td></tr>
<tr><td>1466</td><td bgcolor="#FF0000">set(axesFig3D,'DataAspectRatio',ratios./max(ratios));</td></tr>
<tr><td>1467</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1468</td><td bgcolor="#FF0000">set(axesFig3D,'Ydir','reverse');</td></tr>
<tr><td>1469</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1470</td><td bgcolor="#FF0000">set(axesFig3D,'view',oldView);</td></tr>
<tr><td>1471</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1472</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1473</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupPlane.</td></tr>
<tr><td>1474</td><td bgcolor="#FFFFFF">function&nbsp;popupPlane_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1475</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupPlane&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1476</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1477</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1478</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1479</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;contents&nbsp;=&nbsp;cellstr(get(hObject,'String'))&nbsp;returns&nbsp;popupPlane&nbsp;contents&nbsp;as&nbsp;cell&nbsp;array</td></tr>
<tr><td>1480</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents{get(hObject,'Value')}&nbsp;returns&nbsp;selected&nbsp;item&nbsp;from&nbsp;popupPlane</td></tr>
<tr><td>1481</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1482</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;slice&nbsp;slider</td></tr>
<tr><td>1483</td><td bgcolor="#FF0000">handles.plane&nbsp;=&nbsp;get(hObject,'value');</td></tr>
<tr><td>1484</td><td bgcolor="#FF0000">initViewSliceSlider(handles);</td></tr>
<tr><td>1485</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1486</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>1487</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>1488</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>1489</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>1490</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1491</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>1492</td><td bgcolor="#FFFFFF">function&nbsp;sliderSlice_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1493</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;sliderSlice&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1494</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1495</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1496</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1497</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>1498</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get(hObject,'Min')&nbsp;and&nbsp;get(hObject,'Max')&nbsp;to&nbsp;determine&nbsp;range&nbsp;of&nbsp;slider</td></tr>
<tr><td>1499</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>1500</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1501</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobtnContour.</td></tr>
<tr><td>1502</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnContour_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1503</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobtnContour&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1504</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1505</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1506</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1507</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobtnContour</td></tr>
<tr><td>1508</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>1509</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1510</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobtnDose.</td></tr>
<tr><td>1511</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnDose_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1512</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobtnDose&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1513</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1514</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1515</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1516</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobtnDose</td></tr>
<tr><td>1517</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>1518</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1519</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobtnIsoDoseLines.</td></tr>
<tr><td>1520</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnIsoDoseLines_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1521</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobtnIsoDoseLines&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1522</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1523</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1524</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1525</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobtnIsoDoseLines</td></tr>
<tr><td>1526</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>1527</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1528</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnOptimize.</td></tr>
<tr><td>1529</td><td bgcolor="#FFFFFF">function&nbsp;btnOptimize_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>1530</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnOptimize&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1531</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1532</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1533</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1534</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>1535</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;indicate&nbsp;that&nbsp;matRad&nbsp;is&nbsp;busy</td></tr>
<tr><td>1536</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;mouse&nbsp;pointer&nbsp;to&nbsp;hour&nbsp;glass&nbsp;</td></tr>
<tr><td>1537</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Figures&nbsp;=&nbsp;gcf;%findobj('type','figure');</td></tr>
<tr><td>1538</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'watch');&nbsp;</td></tr>
<tr><td>1539</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;drawnow;</td></tr>
<tr><td>1540</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;disable&nbsp;all&nbsp;active&nbsp;objects</td></tr>
<tr><td>1541</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;InterfaceObj&nbsp;=&nbsp;findobj(Figures,'Enable','on');</td></tr>
<tr><td>1542</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','off');</td></tr>
<tr><td>1543</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;wait&nbsp;until&nbsp;the&nbsp;table&nbsp;is&nbsp;updated</td></tr>
<tr><td>1544</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;btnTableSave_Callback([],[],handles);&nbsp;%We&nbsp;don't&nbsp;need&nbsp;it?</td></tr>
<tr><td>1545</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1546</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1547</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;if&nbsp;a&nbsp;critical&nbsp;change&nbsp;to&nbsp;the&nbsp;cst&nbsp;has&nbsp;been&nbsp;made&nbsp;which&nbsp;affects&nbsp;the&nbsp;dij&nbsp;matrix</td></tr>
<tr><td>1548</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.DijCalcWarning&nbsp;==&nbsp;true</td></tr>
<tr><td>1549</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1550</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;choice&nbsp;=&nbsp;questdlg('Overlap&nbsp;priorites&nbsp;of&nbsp;OAR&nbsp;constraints&nbsp;have&nbsp;been&nbsp;edited,&nbsp;a&nbsp;new&nbsp;OAR&nbsp;VOI&nbsp;was&nbsp;added&nbsp;or&nbsp;a&nbsp;critical&nbsp;row&nbsp;constraint&nbsp;was&nbsp;deleted.&nbsp;A&nbsp;new&nbsp;Dij&nbsp;calculation&nbsp;might&nbsp;be&nbsp;necessary.',&nbsp;...</td></tr>
<tr><td>1551</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Title','Cancel','Calculate&nbsp;Dij&nbsp;then&nbsp;Optimize','Optimze&nbsp;directly','Optimze&nbsp;directly');</td></tr>
<tr><td>1552</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1553</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;choice</td></tr>
<tr><td>1554</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'Cancel'</td></tr>
<tr><td>1555</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>1556</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>1557</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>1558</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>1559</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'Calculate&nbsp;dij&nbsp;again&nbsp;and&nbsp;optimize'</td></tr>
<tr><td>1560</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.DijCalcWarning&nbsp;=&nbsp;false;</td></tr>
<tr><td>1561</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;btnCalcDose_Callback(hObject,&nbsp;eventdata,&nbsp;handles)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1562</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;'Optimze&nbsp;directly'</td></tr>
<tr><td>1563</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.DijCalcWarning&nbsp;=&nbsp;false;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1564</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1565</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1566</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1567</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>1568</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>1569</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1570</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;optimize</td></tr>
<tr><td>1571</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;get(handles.radiobutton3Dconf,'Value')&nbsp;&amp;&amp;&nbsp;strcmp(handles.Modalities{get(handles.popupRadMode,'Value')},'photons')</td></tr>
<tr><td>1572</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;conformal&nbsp;plan&nbsp;if&nbsp;photons&nbsp;and&nbsp;3d&nbsp;conformal</td></tr>
<tr><td>1573</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~matRad_checkForConnectedBixelRows(evalin('base','stf'))</td></tr>
<tr><td>1574</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error('disconnetced&nbsp;dose&nbsp;influence&nbsp;data&nbsp;in&nbsp;BEV&nbsp;-&nbsp;run&nbsp;dose&nbsp;calculation&nbsp;again&nbsp;with&nbsp;consistent&nbsp;settings');</td></tr>
<tr><td>1575</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1576</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[resultGUIcurrentRun,usedOptimizer]&nbsp;=&nbsp;matRad_fluenceOptimization(matRad_collapseDij(evalin('base','dij')),evalin('base','cst'),pln);</td></tr>
<tr><td>1577</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUIcurrentRun.w&nbsp;=&nbsp;resultGUIcurrentRun.w&nbsp;*&nbsp;ones(evalin('base','dij.totalNumOfBixels'),1);</td></tr>
<tr><td>1578</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUIcurrentRun.wUnsequenced&nbsp;=&nbsp;resultGUIcurrentRun.w;</td></tr>
<tr><td>1579</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1580</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;pln.propOpt.runDAO</td></tr>
<tr><td>1581</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~matRad_checkForConnectedBixelRows(evalin('base','stf'))</td></tr>
<tr><td>1582</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;error('disconnetced&nbsp;dose&nbsp;influence&nbsp;data&nbsp;in&nbsp;BEV&nbsp;-&nbsp;run&nbsp;dose&nbsp;calculation&nbsp;again&nbsp;with&nbsp;consistent&nbsp;settings');</td></tr>
<tr><td>1583</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1584</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1585</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1586</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[resultGUIcurrentRun,usedOptimizer]&nbsp;=&nbsp;matRad_fluenceOptimization(evalin('base','dij'),evalin('base','cst'),pln);</td></tr>
<tr><td>1587</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1588</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1589</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%if&nbsp;resultGUI&nbsp;already&nbsp;exists&nbsp;then&nbsp;overwrite&nbsp;the&nbsp;"standard"&nbsp;fields</td></tr>
<tr><td>1590</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>1591</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>1592</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>1593</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sNames&nbsp;=&nbsp;fieldnames(resultGUIcurrentRun);</td></tr>
<tr><td>1594</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oldNames&nbsp;=&nbsp;fieldnames(resultGUI);</td></tr>
<tr><td>1595</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(length(oldNames)&nbsp;&gt;&nbsp;length(sNames))</td></tr>
<tr><td>1596</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:length(oldNames)</td></tr>
<tr><td>1597</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strfind(oldNames{j},&nbsp;'beam')</td></tr>
<tr><td>1598</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,&nbsp;oldNames{j});</td></tr>
<tr><td>1599</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1600</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1601</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1602</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:length(sNames)</td></tr>
<tr><td>1603</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(sNames{j})&nbsp;=&nbsp;resultGUIcurrentRun.(sNames{j});</td></tr>
<tr><td>1604</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1605</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1606</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;resultGUIcurrentRun;</td></tr>
<tr><td>1607</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1608</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>1609</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1610</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;some&nbsp;values</td></tr>
<tr><td>1611</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.plane&nbsp;==&nbsp;1</td></tr>
<tr><td>1612</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Value',ceil(pln.propStf.isoCenter(1,2)/ct.resolution.x));</td></tr>
<tr><td>1613</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;handles.plane&nbsp;==&nbsp;2</td></tr>
<tr><td>1614</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Value',ceil(pln.propStf.isoCenter(1,1)/ct.resolution.y));</td></tr>
<tr><td>1615</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;handles.plane&nbsp;==&nbsp;3</td></tr>
<tr><td>1616</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Value',ceil(pln.propStf.isoCenter(1,3)/ct.resolution.z));</td></tr>
<tr><td>1617</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1618</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1619</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;3;</td></tr>
<tr><td>1620</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOptionIdx&nbsp;=&nbsp;1;</td></tr>
<tr><td>1621</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'carbon')&nbsp;||&nbsp;(strcmp(pln.radiationMode,'protons')&nbsp;&amp;&amp;&nbsp;strcmp(pln.propOpt.bioOptimization,'const_RBExD'))</td></tr>
<tr><td>1622</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;'RBExDose';</td></tr>
<tr><td>1623</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1624</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;'physicalDose';</td></tr>
<tr><td>1625</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1626</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.selectedBeam&nbsp;=&nbsp;1;</td></tr>
<tr><td>1627</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;check&nbsp;IPOPT&nbsp;status&nbsp;and&nbsp;return&nbsp;message&nbsp;for&nbsp;GUI&nbsp;user&nbsp;if&nbsp;no&nbsp;DAO&nbsp;or</td></tr>
<tr><td>1628</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;particles</td></tr>
<tr><td>1629</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~pln.propOpt.runDAO&nbsp;||&nbsp;~strcmp(pln.radiationMode,'photons')</td></tr>
<tr><td>1630</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckOptimizerStatus(usedOptimizer,'Fluence')</td></tr>
<tr><td>1631</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1632</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1633</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>1634</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'OptimizeCallback:&nbsp;Could&nbsp;not&nbsp;optimize!',ME);&nbsp;</td></tr>
<tr><td>1635</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>1636</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>1637</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>1638</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>1639</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>1640</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1641</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1642</td><td bgcolor="#FFFFFF">%&nbsp;perform&nbsp;sequencing&nbsp;and&nbsp;DAO</td></tr>
<tr><td>1643</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>1644</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1645</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%%&nbsp;sequencing</td></tr>
<tr><td>1646</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;(pln.propOpt.runSequencing&nbsp;||&nbsp;pln.propOpt.runDAO)</td></tr>
<tr><td>1647</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;matRad_xiaLeafSequencing(resultGUI,evalin('base','stf'),evalin('base','dij')...</td></tr>
<tr><td>1648</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,get(handles.editSequencingLevel,'Value'));</td></tr>
<tr><td>1649</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;matRad_engelLeafSequencing(resultGUI,evalin('base','stf'),evalin('base','dij')...</td></tr>
<tr><td>1650</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,str2double(get(handles.editSequencingLevel,'String')));</td></tr>
<tr><td>1651</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;matRad_siochiLeafSequencing(resultGUI,evalin('base','stf'),evalin('base','dij')...</td></tr>
<tr><td>1652</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;,str2double(get(handles.editSequencingLevel,'String')));</td></tr>
<tr><td>1653</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1654</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>1655</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1656</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1657</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>1658</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'OptimizeCallback:&nbsp;Could&nbsp;not&nbsp;perform&nbsp;sequencing',ME);&nbsp;</td></tr>
<tr><td>1659</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>1660</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>1661</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>1662</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>1663</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>1664</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1665</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1666</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>1667</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%%&nbsp;DAO</td></tr>
<tr><td>1668</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;pln.propOpt.runDAO</td></tr>
<tr><td>1669</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showWarning(handles,['Observe:&nbsp;You&nbsp;are&nbsp;running&nbsp;direct&nbsp;aperture&nbsp;optimization'&nbsp;filesep&nbsp;'This&nbsp;is&nbsp;experimental&nbsp;code&nbsp;that&nbsp;has&nbsp;not&nbsp;been&nbsp;thoroughly&nbsp;debugged&nbsp;-&nbsp;especially&nbsp;in&nbsp;combination&nbsp;with&nbsp;constrained&nbsp;optimization.']);</td></tr>
<tr><td>1670</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[resultGUI,usedOptimizer]&nbsp;=&nbsp;matRad_directApertureOptimization(evalin('base','dij'),evalin('base','cst'),...</td></tr>
<tr><td>1671</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.apertureInfo,resultGUI,pln);</td></tr>
<tr><td>1672</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>1673</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;check&nbsp;IPOPT&nbsp;status&nbsp;and&nbsp;return&nbsp;message&nbsp;for&nbsp;GUI&nbsp;user</td></tr>
<tr><td>1674</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CheckOptimizerStatus(usedOptimizer,'DAO');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1675</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1676</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1677</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;(pln.propOpt.runSequencing&nbsp;||&nbsp;pln.propOpt.runDAO)</td></tr>
<tr><td>1678</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;matRad_visApertureInfo(resultGUI.apertureInfo);</td></tr>
<tr><td>1679</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1680</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1681</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>1682</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'OptimizeCallback:&nbsp;Could&nbsp;not&nbsp;perform&nbsp;direct&nbsp;aperture&nbsp;optimization',ME);&nbsp;</td></tr>
<tr><td>1683</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>1684</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>1685</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>1686</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>1687</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>1688</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1689</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1690</td><td bgcolor="#FFFFFF">%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>1691</td><td bgcolor="#FF0000">set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>1692</td><td bgcolor="#FF0000">set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>1693</td><td bgcolor="#FF0000">handles.dispWindow{3,1}&nbsp;&nbsp;=&nbsp;[];&nbsp;&nbsp;&nbsp;%&nbsp;reset&nbsp;dose&nbsp;ranges</td></tr>
<tr><td>1694</td><td bgcolor="#FF0000">handles.dispWindow{3,2}&nbsp;&nbsp;=&nbsp;[];&nbsp;&nbsp;&nbsp;%&nbsp;reset&nbsp;min&nbsp;max&nbsp;dose&nbsp;values</td></tr>
<tr><td>1695</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>1696</td><td bgcolor="#FF0000">handles.IsoDose.Levels&nbsp;&nbsp;&nbsp;=&nbsp;0;&nbsp;&nbsp;%&nbsp;ensure&nbsp;to&nbsp;use&nbsp;default&nbsp;iso&nbsp;dose&nbsp;line&nbsp;spacing</td></tr>
<tr><td>1697</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;true;</td></tr>
<tr><td>1698</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1699</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>1700</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>1701</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>1702</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>1703</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;true;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1704</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>1705</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1706</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1707</td><td bgcolor="#FFFFFF">%&nbsp;the&nbsp;function&nbsp;CheckValidityPln&nbsp;checks&nbsp;if&nbsp;the&nbsp;provided&nbsp;plan&nbsp;is&nbsp;valid&nbsp;so</td></tr>
<tr><td>1708</td><td bgcolor="#FFFFFF">%&nbsp;that&nbsp;it&nbsp;can&nbsp;be&nbsp;used&nbsp;further&nbsp;on&nbsp;for&nbsp;optimization</td></tr>
<tr><td>1709</td><td bgcolor="#FFFFFF">function&nbsp;FlagValid&nbsp;=&nbsp;CheckValidityPln(cst)</td></tr>
<tr><td>1710</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1711</td><td bgcolor="#FF0000">FlagValid&nbsp;=&nbsp;true;</td></tr>
<tr><td>1712</td><td bgcolor="#FFFFFF">%check&nbsp;if&nbsp;mean&nbsp;constraint&nbsp;is&nbsp;always&nbsp;used&nbsp;in&nbsp;combination</td></tr>
<tr><td>1713</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>1714</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(cst{i,6})</td></tr>
<tr><td>1715</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(strfind([cst{i,6}.type],'mean'))&nbsp;&amp;&amp;&nbsp;isempty(strfind([cst{i,6}.type],'square'))</td></tr>
<tr><td>1716</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FlagValid&nbsp;=&nbsp;false;</td></tr>
<tr><td>1717</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warndlg('mean&nbsp;constraint&nbsp;needs&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;addition&nbsp;to&nbsp;a&nbsp;second&nbsp;constraint&nbsp;(e.g.&nbsp;squared&nbsp;deviation)');</td></tr>
<tr><td>1718</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1719</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1720</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1721</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1722</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1723</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1724</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupTypeOfPlot</td></tr>
<tr><td>1725</td><td bgcolor="#FFFFFF">function&nbsp;popupTypeOfPlot_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1726</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1727</td><td bgcolor="#FFFFFF">&nbsp;%&nbsp;intensity&nbsp;plot</td></tr>
<tr><td>1728</td><td bgcolor="#FF0000">if&nbsp;get(hObject,'Value')&nbsp;==&nbsp;1&nbsp;&nbsp;</td></tr>
<tr><td>1729</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1730</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderBeamSelection,'Enable','off')</td></tr>
<tr><td>1731</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderOffset,'Enable','off')</td></tr>
<tr><td>1732</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'Enable','on')</td></tr>
<tr><td>1733</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnProfileType,'Enable','off');</td></tr>
<tr><td>1734</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupPlane,'Enable','on');</td></tr>
<tr><td>1735</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnCT,'Enable','on');</td></tr>
<tr><td>1736</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnContour,'Enable','on');</td></tr>
<tr><td>1737</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnDose,'Enable','on');</td></tr>
<tr><td>1738</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnIsoDoseLines,'Enable','on');</td></tr>
<tr><td>1739</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnIsoDoseLinesLabels,'Enable','on');</td></tr>
<tr><td>1740</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Enable','on');</td></tr>
<tr><td>1741</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1742</td><td bgcolor="#FFFFFF">%&nbsp;profile&nbsp;plot</td></tr>
<tr><td>1743</td><td bgcolor="#FFFFFF">elseif&nbsp;get(hObject,'Value')&nbsp;==&nbsp;2</td></tr>
<tr><td>1744</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1745</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>1746</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;length(parseStringAsNum(get(handles.editGantryAngle,'String'),true))&nbsp;&gt;&nbsp;1</td></tr>
<tr><td>1747</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1748</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderBeamSelection,'Enable','on');</td></tr>
<tr><td>1749</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.selectedBeam&nbsp;=&nbsp;1;</td></tr>
<tr><td>1750</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>1751</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderBeamSelection,'Min',handles.selectedBeam,'Max',pln.propStf.numOfBeams,...</td></tr>
<tr><td>1752</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Value',handles.selectedBeam,...</td></tr>
<tr><td>1753</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'SliderStep',[1/(pln.propStf.numOfBeams-1)&nbsp;1/(pln.propStf.numOfBeams-1)],...</td></tr>
<tr><td>1754</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Enable','on');</td></tr>
<tr><td>1755</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1756</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1757</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.selectedBeam&nbsp;=&nbsp;1;</td></tr>
<tr><td>1758</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1759</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1760</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.profileOffset&nbsp;=&nbsp;get(handles.sliderOffset,'Value');</td></tr>
<tr><td>1761</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1762</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vMinMax&nbsp;=&nbsp;[-100&nbsp;100];</td></tr>
<tr><td>1763</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vRange&nbsp;=&nbsp;sum(abs(vMinMax));</td></tr>
<tr><td>1764</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1765</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>1766</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(get(handles.btnProfileType,'String'),'lateral')</td></tr>
<tr><td>1767</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SliderStep&nbsp;=&nbsp;vRange/ct.resolution.x;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1768</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1769</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SliderStep&nbsp;=&nbsp;vRange/ct.resolution.y;&nbsp;&nbsp;</td></tr>
<tr><td>1770</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1771</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1772</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderOffset,'Min',vMinMax(1),'Max',vMinMax(2),...</td></tr>
<tr><td>1773</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Value',handles.profileOffset,...</td></tr>
<tr><td>1774</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'SliderStep',[1/SliderStep&nbsp;1/SliderStep],...</td></tr>
<tr><td>1775</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Enable','on');</td></tr>
<tr><td>1776</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1777</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1778</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1779</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'Enable','on');</td></tr>
<tr><td>1780</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnProfileType,'Enable','on');</td></tr>
<tr><td>1781</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupPlane,'Enable','off');</td></tr>
<tr><td>1782</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnCT,'Enable','off');</td></tr>
<tr><td>1783</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnContour,'Enable','off');</td></tr>
<tr><td>1784</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnDose,'Enable','off');</td></tr>
<tr><td>1785</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnIsoDoseLines,'Enable','off');</td></tr>
<tr><td>1786</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Enable','off');</td></tr>
<tr><td>1787</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobtnIsoDoseLinesLabels,'Enable','off');</td></tr>
<tr><td>1788</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1789</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1790</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnProfileType,'Enable','on')</td></tr>
<tr><td>1791</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1792</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(get(handles.btnProfileType,'String'),'lateral')</td></tr>
<tr><td>1793</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.ProfileType&nbsp;=&nbsp;'longitudinal';</td></tr>
<tr><td>1794</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1795</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.ProfileType&nbsp;=&nbsp;'lateral';</td></tr>
<tr><td>1796</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1797</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1798</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1799</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1800</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>1801</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1802</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>1803</td><td bgcolor="#FF0000">cla(handles.axesFig,'reset');</td></tr>
<tr><td>1804</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>1805</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>1806</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>1807</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1808</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupDisplayOption.</td></tr>
<tr><td>1809</td><td bgcolor="#FFFFFF">function&nbsp;popupDisplayOption_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1810</td><td bgcolor="#FF0000">content&nbsp;=&nbsp;get(hObject,'String');</td></tr>
<tr><td>1811</td><td bgcolor="#FF0000">handles.SelectedDisplayOption&nbsp;=&nbsp;content{get(hObject,'Value'),1};</td></tr>
<tr><td>1812</td><td bgcolor="#FF0000">handles.SelectedDisplayOptionIdx&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>1813</td><td bgcolor="#FFFFFF">%handles.dispWindow{3,1}&nbsp;=&nbsp;[];&nbsp;handles.dispWindow{3,2}&nbsp;=&nbsp;[];</td></tr>
<tr><td>1814</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1815</td><td bgcolor="#FF0000">if&nbsp;~isfield(handles,'colormapLocked')&nbsp;||&nbsp;~handles.colormapLocked</td></tr>
<tr><td>1816</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{3,1}&nbsp;=&nbsp;[];&nbsp;handles.dispWindow{3,2}&nbsp;=&nbsp;[];</td></tr>
<tr><td>1817</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1818</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1819</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>1820</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>1821</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>1822</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>1823</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>1824</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1825</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>1826</td><td bgcolor="#FFFFFF">function&nbsp;sliderBeamSelection_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1827</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;sliderBeamSelection&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1828</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1829</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1830</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1831</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>1832</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get(hObject,'Min')&nbsp;and&nbsp;get(hObject,'Max')&nbsp;to&nbsp;determine&nbsp;range&nbsp;of&nbsp;slider</td></tr>
<tr><td>1833</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1834</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1835</td><td bgcolor="#FF0000">handles.selectedBeam&nbsp;=&nbsp;round(get(hObject,'Value'));</td></tr>
<tr><td>1836</td><td bgcolor="#FF0000">set(hObject,&nbsp;'Value',&nbsp;handles.selectedBeam);</td></tr>
<tr><td>1837</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>1838</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>1839</td><td bgcolor="#FF0000">handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>1840</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>1841</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1842</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnProfileType.</td></tr>
<tr><td>1843</td><td bgcolor="#FFFFFF">function&nbsp;btnProfileType_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>1844</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnProfileType&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>1845</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>1846</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>1847</td><td bgcolor="#FF0000">if&nbsp;strcmp(get(hObject,'Enable')&nbsp;,'on')</td></tr>
<tr><td>1848</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(handles.ProfileType,'lateral')</td></tr>
<tr><td>1849</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.ProfileType&nbsp;=&nbsp;'longitudinal';</td></tr>
<tr><td>1850</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'String','lateral');</td></tr>
<tr><td>1851</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1852</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.ProfileType&nbsp;=&nbsp;'lateral';</td></tr>
<tr><td>1853</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'String','longitudinal');</td></tr>
<tr><td>1854</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1855</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1856</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>1857</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>1858</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>1859</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1860</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>1861</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>1862</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1863</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1864</td><td bgcolor="#FFFFFF">%&nbsp;enables/&nbsp;disables&nbsp;buttons&nbsp;according&nbsp;to&nbsp;the&nbsp;current&nbsp;state&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1865</td><td bgcolor="#FFFFFF">function&nbsp;UpdateState(handles)</td></tr>
<tr><td>1866</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1867</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>1868</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>1869</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1870</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'carbon')</td></tr>
<tr><td>1871</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','on');</td></tr>
<tr><td>1872</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','on');</td></tr>
<tr><td>1873</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strcmp(pln.radiationMode,'protons')</td></tr>
<tr><td>1874</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','on');</td></tr>
<tr><td>1875</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','off');</td></tr>
<tr><td>1876</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>1877</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','off');</td></tr>
<tr><td>1878</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','off');&nbsp;</td></tr>
<tr><td>1879</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1880</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1881</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cMapControls&nbsp;=&nbsp;allchild(handles.uipanel_colormapOptions);</td></tr>
<tr><td>1882</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;runHandles&nbsp;=&nbsp;cMapControls</td></tr>
<tr><td>1883</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(runHandles,'Enable','on');</td></tr>
<tr><td>1884</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1885</td><td bgcolor="#FFFFFF">end&nbsp;</td></tr>
<tr><td>1886</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1887</td><td bgcolor="#FF0000">if&nbsp;handles.cubeHUavailable</td></tr>
<tr><td>1888</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cMapOptionsSelectList&nbsp;=&nbsp;{'None','CT&nbsp;(HU)','Result&nbsp;(i.e.&nbsp;dose)'};</td></tr>
<tr><td>1889</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_windowPreset,'Visible','on');</td></tr>
<tr><td>1890</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.text_windowPreset,'String','Window&nbsp;Preset');</td></tr>
<tr><td>1891</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>1892</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cMapOptionsSelectList&nbsp;=&nbsp;{'None','CT&nbsp;(ED)','Result&nbsp;(i.e.&nbsp;dose)'};</td></tr>
<tr><td>1893</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_windowPreset,'Visible','off');</td></tr>
<tr><td>1894</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.text_windowPreset,'String','No&nbsp;available&nbsp;Window&nbsp;Presets');</td></tr>
<tr><td>1895</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>1896</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>1897</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1898</td><td bgcolor="#FF0000">&nbsp;switch&nbsp;handles.State</td></tr>
<tr><td>1899</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1900</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;0</td></tr>
<tr><td>1901</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1902</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtInfo,'String','no&nbsp;data&nbsp;loaded');</td></tr>
<tr><td>1903</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnCalcDose,'Enable','off');</td></tr>
<tr><td>1904</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnOptimize&nbsp;,'Enable','off');</td></tr>
<tr><td>1905</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','off');</td></tr>
<tr><td>1906</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','off');</td></tr>
<tr><td>1907</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','off');&nbsp;</td></tr>
<tr><td>1908</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.importDoseButton,'Enable','off');</td></tr>
<tr><td>1909</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn_export,'Enable','off');</td></tr>
<tr><td>1910</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn3Dview,'Enable','off');</td></tr>
<tr><td>1911</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1912</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cMapControls&nbsp;=&nbsp;allchild(handles.uipanel_colormapOptions);</td></tr>
<tr><td>1913</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;runHandles&nbsp;=&nbsp;cMapControls</td></tr>
<tr><td>1914</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(runHandles,'Enable','off');</td></tr>
<tr><td>1915</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1916</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1917</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList{1})</td></tr>
<tr><td>1918</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',1);</td></tr>
<tr><td>1919</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1920</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;1</td></tr>
<tr><td>1921</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1922</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtInfo,'String','ready&nbsp;for&nbsp;dose&nbsp;calculation');</td></tr>
<tr><td>1923</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnCalcDose,'Enable','on');</td></tr>
<tr><td>1924</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnOptimize&nbsp;,'Enable','off');</td></tr>
<tr><td>1925</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','off');</td></tr>
<tr><td>1926</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','off');</td></tr>
<tr><td>1927</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','off');</td></tr>
<tr><td>1928</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.importDoseButton,'Enable','off');</td></tr>
<tr><td>1929</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn_export,'Enable','on');</td></tr>
<tr><td>1930</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn3Dview,'Enable','on');</td></tr>
<tr><td>1931</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1932</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList(1:2))</td></tr>
<tr><td>1933</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',2);</td></tr>
<tr><td>1934</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>1935</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(AllVarNames)</td></tr>
<tr><td>1936</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>1937</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','on');</td></tr>
<tr><td>1938</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','on');</td></tr>
<tr><td>1939</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','on');</td></tr>
<tr><td>1940</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList(1:3))</td></tr>
<tr><td>1941</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',3);</td></tr>
<tr><td>1942</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1943</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1944</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1945</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2</td></tr>
<tr><td>1946</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1947</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtInfo,'String','ready&nbsp;for&nbsp;optimization');&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1948</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnCalcDose,'Enable','on');</td></tr>
<tr><td>1949</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnOptimize&nbsp;,'Enable','on');</td></tr>
<tr><td>1950</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','off');</td></tr>
<tr><td>1951</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','off');</td></tr>
<tr><td>1952</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','off');</td></tr>
<tr><td>1953</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.importDoseButton,'Enable','off');</td></tr>
<tr><td>1954</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn_export,'Enable','on');</td></tr>
<tr><td>1955</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn3Dview,'Enable','on');</td></tr>
<tr><td>1956</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList(1:2))</td></tr>
<tr><td>1957</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',2);</td></tr>
<tr><td>1958</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>1959</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1960</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(AllVarNames)</td></tr>
<tr><td>1961</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('resultGUI',AllVarNames)</td></tr>
<tr><td>1962</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','on');</td></tr>
<tr><td>1963</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','on');</td></tr>
<tr><td>1964</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','on');</td></tr>
<tr><td>1965</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList(1:3))</td></tr>
<tr><td>1966</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',3);</td></tr>
<tr><td>1967</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1968</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>1969</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1970</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3</td></tr>
<tr><td>1971</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtInfo,'String','plan&nbsp;is&nbsp;optimized');&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>1972</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnCalcDose,'Enable','on');</td></tr>
<tr><td>1973</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnOptimize&nbsp;,'Enable','on');</td></tr>
<tr><td>1974</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.pushbutton_recalc,'Enable','on');</td></tr>
<tr><td>1975</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSaveToGUI,'Enable','on');</td></tr>
<tr><td>1976</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnDVH,'Enable','on');</td></tr>
<tr><td>1977</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn_export,'Enable','on');</td></tr>
<tr><td>1978</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btn3Dview,'Enable','on');</td></tr>
<tr><td>1979</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;resultGUI&nbsp;struct&nbsp;needs&nbsp;to&nbsp;be&nbsp;available&nbsp;to&nbsp;import&nbsp;dose</td></tr>
<tr><td>1980</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;otherwise&nbsp;inconsistent&nbsp;states&nbsp;can&nbsp;be&nbsp;achieved</td></tr>
<tr><td>1981</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.importDoseButton,'Enable','on');</td></tr>
<tr><td>1982</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'String',cMapOptionsSelectList(1:3))</td></tr>
<tr><td>1983</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupmenu_chooseColorData,'Value',3);</td></tr>
<tr><td>1984</td><td bgcolor="#FFFFFF">&nbsp;end</td></tr>
<tr><td>1985</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1986</td><td bgcolor="#FF0000">guidata(handles.figure1,handles);&nbsp;</td></tr>
<tr><td>1987</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>1988</td><td bgcolor="#FFFFFF">%&nbsp;fill&nbsp;GUI&nbsp;elements&nbsp;with&nbsp;plan&nbsp;information</td></tr>
<tr><td>1989</td><td bgcolor="#FFFFFF">function&nbsp;setPln(handles)</td></tr>
<tr><td>1990</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1991</td><td bgcolor="#FF0000">matRad_cfg&nbsp;=&nbsp;MatRad_Config.instance();</td></tr>
<tr><td>1992</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>1993</td><td bgcolor="#FF0000">pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>1994</td><td bgcolor="#FFFFFF">%&nbsp;sanity&nbsp;check&nbsp;of&nbsp;isoCenter</td></tr>
<tr><td>1995</td><td bgcolor="#FF0000">if&nbsp;size(pln.propStf.isoCenter,1)&nbsp;~=&nbsp;pln.propStf.numOfBeams&nbsp;&amp;&amp;&nbsp;size(pln.propStf.isoCenter,1)&nbsp;==&nbsp;1</td></tr>
<tr><td>1996</td><td bgcolor="#FF0000">&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)&nbsp;*&nbsp;pln.propStf.isoCenter(1,:);</td></tr>
<tr><td>1997</td><td bgcolor="#FFFFFF">elseif&nbsp;size(pln.propStf.isoCenter,1)&nbsp;~=&nbsp;pln.propStf.numOfBeams&nbsp;&amp;&amp;&nbsp;size(pln.propStf.isoCenter,1)&nbsp;~=&nbsp;1</td></tr>
<tr><td>1998</td><td bgcolor="#FF0000">&nbsp;&nbsp;matRad_cfg.dispError('Isocenter&nbsp;in&nbsp;plan&nbsp;file&nbsp;are&nbsp;incosistent.');</td></tr>
<tr><td>1999</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2000</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2001</td><td bgcolor="#FFFFFF">%Sanity&nbsp;check&nbsp;for&nbsp;the&nbsp;bixelWidth&nbsp;field</td></tr>
<tr><td>2002</td><td bgcolor="#FF0000">bixelWidth&nbsp;=&nbsp;pln.propStf.bixelWidth;</td></tr>
<tr><td>2003</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2004</td><td bgcolor="#FF0000">if&nbsp;isnumeric(bixelWidth)&nbsp;&amp;&amp;&nbsp;isscalar(bixelWidth)</td></tr>
<tr><td>2005</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;bixelWidth&nbsp;=&nbsp;num2str(pln.propStf.bixelWidth);</td></tr>
<tr><td>2006</td><td bgcolor="#FFFFFF">elseif&nbsp;~isnumeric(bixelWidth)&nbsp;&amp;&amp;&nbsp;~strcmp(bixelWidth,'field')</td></tr>
<tr><td>2007</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;matRad_cfg.dispError('Invalid&nbsp;bixel&nbsp;width!&nbsp;Must&nbsp;be&nbsp;a&nbsp;scalar&nbsp;number&nbsp;or&nbsp;''field''&nbsp;for&nbsp;field-based&nbsp;dose&nbsp;calculation&nbsp;with&nbsp;shapes&nbsp;stored&nbsp;in&nbsp;stf!');</td></tr>
<tr><td>2008</td><td bgcolor="#FFFFFF">end&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2009</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2010</td><td bgcolor="#FF0000">set(handles.editBixelWidth,'String',bixelWidth);</td></tr>
<tr><td>2011</td><td bgcolor="#FF0000">set(handles.editFraction,'String',num2str(pln.numOfFractions));</td></tr>
<tr><td>2012</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2013</td><td bgcolor="#FF0000">if&nbsp;isfield(pln.propStf,'isoCenter')</td></tr>
<tr><td>2014</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;size(unique(pln.propStf.isoCenter,'rows'),1)&nbsp;==&nbsp;1</td></tr>
<tr><td>2015</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'String',regexprep(num2str((round(pln.propStf.isoCenter(1,:)*10))./10),&nbsp;'\s+',&nbsp;'&nbsp;'));</td></tr>
<tr><td>2016</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'Enable','on');</td></tr>
<tr><td>2017</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.checkIsoCenter,'Enable','on');</td></tr>
<tr><td>2018</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>2019</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'String','multiple&nbsp;isoCenter');</td></tr>
<tr><td>2020</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'Enable','off');</td></tr>
<tr><td>2021</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.checkIsoCenter,'Value',0);</td></tr>
<tr><td>2022</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.checkIsoCenter,'Enable','off');</td></tr>
<tr><td>2023</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2024</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2025</td><td bgcolor="#FF0000">set(handles.editGantryAngle,'String',num2str((pln.propStf.gantryAngles)));</td></tr>
<tr><td>2026</td><td bgcolor="#FF0000">set(handles.editCouchAngle,'String',num2str((pln.propStf.couchAngles)));</td></tr>
<tr><td>2027</td><td bgcolor="#FF0000">set(handles.popupRadMode,'Value',find(strcmp(get(handles.popupRadMode,'String'),pln.radiationMode)));</td></tr>
<tr><td>2028</td><td bgcolor="#FF0000">set(handles.popUpMachine,'Value',find(strcmp(get(handles.popUpMachine,'String'),pln.machine)));</td></tr>
<tr><td>2029</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2030</td><td bgcolor="#FF0000">if&nbsp;~strcmp(pln.propOpt.bioOptimization,'none')&nbsp;&nbsp;</td></tr>
<tr><td>2031</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','on');</td></tr>
<tr><td>2032</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;contentPopUp&nbsp;=&nbsp;get(handles.popMenuBioOpt,'String');</td></tr>
<tr><td>2033</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ix&nbsp;=&nbsp;find(strcmp(pln.propOpt.bioOptimization,contentPopUp));</td></tr>
<tr><td>2034</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Value',ix);</td></tr>
<tr><td>2035</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','on');</td></tr>
<tr><td>2036</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2037</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popMenuBioOpt,'Enable','off');</td></tr>
<tr><td>2038</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnSetTissue,'Enable','off');</td></tr>
<tr><td>2039</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2040</td><td bgcolor="#FFFFFF">%%&nbsp;enable&nbsp;sequencing&nbsp;and&nbsp;DAO&nbsp;button&nbsp;if&nbsp;radiation&nbsp;mode&nbsp;is&nbsp;set&nbsp;to&nbsp;photons</td></tr>
<tr><td>2041</td><td bgcolor="#FF0000">if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;pln.propOpt.runSequencing</td></tr>
<tr><td>2042</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','on');</td></tr>
<tr><td>2043</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Value',1);</td></tr>
<tr><td>2044</td><td bgcolor="#FFFFFF">elseif&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;~pln.propOpt.runSequencing</td></tr>
<tr><td>2045</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','on');</td></tr>
<tr><td>2046</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Value',0);</td></tr>
<tr><td>2047</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2048</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunSequencing,'Enable','off');</td></tr>
<tr><td>2049</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2050</td><td bgcolor="#FFFFFF">%%&nbsp;enable&nbsp;DAO&nbsp;button&nbsp;if&nbsp;radiation&nbsp;mode&nbsp;is&nbsp;set&nbsp;to&nbsp;photons</td></tr>
<tr><td>2051</td><td bgcolor="#FF0000">if&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;pln.propOpt.runDAO</td></tr>
<tr><td>2052</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','on');</td></tr>
<tr><td>2053</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Value',1);</td></tr>
<tr><td>2054</td><td bgcolor="#FFFFFF">elseif&nbsp;strcmp(pln.radiationMode,'photons')&nbsp;&amp;&amp;&nbsp;~pln.propOpt.runDAO</td></tr>
<tr><td>2055</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','on');</td></tr>
<tr><td>2056</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Value',0);</td></tr>
<tr><td>2057</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2058</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.btnRunDAO,'Enable','off');</td></tr>
<tr><td>2059</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2060</td><td bgcolor="#FFFFFF">%%&nbsp;enable&nbsp;stratification&nbsp;level&nbsp;input&nbsp;if&nbsp;radiation&nbsp;mode&nbsp;is&nbsp;set&nbsp;to&nbsp;photons</td></tr>
<tr><td>2061</td><td bgcolor="#FF0000">if&nbsp;strcmp(pln.radiationMode,'photons')</td></tr>
<tr><td>2062</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtSequencing,'Enable','on');</td></tr>
<tr><td>2063</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobutton3Dconf,'Enable','on');</td></tr>
<tr><td>2064</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editSequencingLevel,'Enable','on');</td></tr>
<tr><td>2065</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2066</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.txtSequencing,'Enable','off');</td></tr>
<tr><td>2067</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.radiobutton3Dconf,'Enable','off');</td></tr>
<tr><td>2068</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editSequencingLevel,'Enable','off');</td></tr>
<tr><td>2069</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2070</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2071</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnTableSave.</td></tr>
<tr><td>2072</td><td bgcolor="#FFFFFF">function&nbsp;btnTableSave_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2073</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btnTableSave&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>2074</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>2075</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>2076</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2077</td><td bgcolor="#FF0000">if&nbsp;get(handles.checkIsoCenter,'Value')</td></tr>
<tr><td>2078</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');&nbsp;</td></tr>
<tr><td>2079</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)&nbsp;*&nbsp;matRad_getIsoCenter(evalin('base','cst'),evalin('base','ct'));&nbsp;</td></tr>
<tr><td>2080</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'String',regexprep(num2str((round(pln.propStf.isoCenter(1,:)&nbsp;*&nbsp;10))./10),&nbsp;'\s+',&nbsp;'&nbsp;'));</td></tr>
<tr><td>2081</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','pln',pln);</td></tr>
<tr><td>2082</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2083</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>2084</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2085</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;listBoxCmd.</td></tr>
<tr><td>2086</td><td bgcolor="#FFFFFF">function&nbsp;listBoxCmd_Callback(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2087</td><td bgcolor="#FF0000">numLines&nbsp;=&nbsp;size(get(hObject,'String'),1);</td></tr>
<tr><td>2088</td><td bgcolor="#FF0000">set(hObject,&nbsp;'ListboxTop',&nbsp;numLines);</td></tr>
<tr><td>2089</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2090</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>2091</td><td bgcolor="#FFFFFF">function&nbsp;sliderOffset_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2092</td><td bgcolor="#FF0000">handles.profileOffset&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>2093</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>2094</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2095</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>2096</td><td bgcolor="#FFFFFF">%%&nbsp;HELPER&nbsp;FUNCTIONS</td></tr>
<tr><td>2097</td><td bgcolor="#FFFFFF">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</td></tr>
<tr><td>2098</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2099</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;validity&nbsp;of&nbsp;input&nbsp;for&nbsp;cst</td></tr>
<tr><td>2100</td><td bgcolor="#FFFFFF">function&nbsp;flagValidity&nbsp;=&nbsp;CheckValidity(Val)&nbsp;</td></tr>
<tr><td>2101</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2102</td><td bgcolor="#FF0000">flagValidity&nbsp;=&nbsp;true;</td></tr>
<tr><td>2103</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2104</td><td bgcolor="#FF0000">if&nbsp;ischar(Val)</td></tr>
<tr><td>2105</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Val&nbsp;=&nbsp;str2num(Val);</td></tr>
<tr><td>2106</td><td bgcolor="#FFFFFF">end&nbsp;</td></tr>
<tr><td>2107</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2108</td><td bgcolor="#FF0000">if&nbsp;length(Val)&nbsp;&gt;&nbsp;2</td></tr>
<tr><td>2109</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;warndlg('invalid&nbsp;input!');</td></tr>
<tr><td>2110</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2111</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2112</td><td bgcolor="#FF0000">if&nbsp;isempty(Val)</td></tr>
<tr><td>2113</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;warndlg('Input&nbsp;not&nbsp;a&nbsp;number!');</td></tr>
<tr><td>2114</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;flagValidity&nbsp;=&nbsp;false;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2115</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2116</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2117</td><td bgcolor="#FF0000">if&nbsp;any(Val&nbsp;&lt;&nbsp;0)&nbsp;</td></tr>
<tr><td>2118</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;warndlg('Input&nbsp;not&nbsp;a&nbsp;positive&nbsp;number!');</td></tr>
<tr><td>2119</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;flagValidity&nbsp;=&nbsp;false;&nbsp;&nbsp;</td></tr>
<tr><td>2120</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2121</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2122</td><td bgcolor="#FFFFFF">%&nbsp;return&nbsp;IPOPT&nbsp;status&nbsp;as&nbsp;message&nbsp;box</td></tr>
<tr><td>2123</td><td bgcolor="#FFFFFF">function&nbsp;CheckOptimizerStatus(usedOptimizer,OptCase)&nbsp;</td></tr>
<tr><td>2124</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2125</td><td bgcolor="#FF0000">[statusmsg,statusflag]&nbsp;=&nbsp;usedOptimizer.GetStatus();</td></tr>
<tr><td>2126</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2127</td><td bgcolor="#FF0000">if&nbsp;statusflag&nbsp;==&nbsp;0&nbsp;||&nbsp;statusflag&nbsp;==&nbsp;1</td></tr>
<tr><td>2128</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;=&nbsp;'none';</td></tr>
<tr><td>2129</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2130</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;status&nbsp;=&nbsp;'warn';</td></tr>
<tr><td>2131</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2132</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2133</td><td bgcolor="#FF0000">msgbox(['Optimizer&nbsp;finished&nbsp;with&nbsp;status&nbsp;'&nbsp;num2str(statusflag)&nbsp;'&nbsp;('&nbsp;statusmsg&nbsp;')'],'Optimizer',status,'modal');</td></tr>
<tr><td>2134</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2135</td><td bgcolor="#FFFFFF">%&nbsp;get&nbsp;pln&nbsp;file&nbsp;form&nbsp;GUI&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2136</td><td bgcolor="#FFFFFF">function&nbsp;getPlnFromGUI(handles)</td></tr>
<tr><td>2137</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2138</td><td bgcolor="#FFFFFF">%&nbsp;evalin&nbsp;pln&nbsp;(if&nbsp;existant)&nbsp;in&nbsp;order&nbsp;to&nbsp;decide&nbsp;whether&nbsp;isoCenter&nbsp;should&nbsp;be&nbsp;calculated</td></tr>
<tr><td>2139</td><td bgcolor="#FFFFFF">%&nbsp;automatically</td></tr>
<tr><td>2140</td><td bgcolor="#FF0000">if&nbsp;evalin('base','exist(''pln'',''var'')')</td></tr>
<tr><td>2141</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2142</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2143</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2144</td><td bgcolor="#FFFFFF">%&nbsp;Special&nbsp;parsing&nbsp;of&nbsp;bixelWidth&nbsp;(since&nbsp;it&nbsp;can&nbsp;also&nbsp;be&nbsp;"field")&nbsp;for&nbsp;imported</td></tr>
<tr><td>2145</td><td bgcolor="#FFFFFF">%&nbsp;shapes</td></tr>
<tr><td>2146</td><td bgcolor="#FF0000">bixelWidth&nbsp;=&nbsp;get(handles.editBixelWidth,'String');&nbsp;%&nbsp;[mm]&nbsp;/&nbsp;also&nbsp;corresponds&nbsp;to&nbsp;lateral&nbsp;spot&nbsp;spacing&nbsp;for&nbsp;particles</td></tr>
<tr><td>2147</td><td bgcolor="#FF0000">if&nbsp;strcmp(bixelWidth,'field')</td></tr>
<tr><td>2148</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.bixelWidth&nbsp;=&nbsp;bixelWidth;&nbsp;</td></tr>
<tr><td>2149</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2150</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.bixelWidth&nbsp;=&nbsp;parseStringAsNum(bixelWidth,false);</td></tr>
<tr><td>2151</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isnan(pln.propStf.bixelWidth)</td></tr>
<tr><td>2152</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warndlg('Invalid&nbsp;bixel&nbsp;width!&nbsp;Use&nbsp;standard&nbsp;bixel&nbsp;width&nbsp;of&nbsp;5mm!');</td></tr>
<tr><td>2153</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.bixelWidth&nbsp;=&nbsp;5;</td></tr>
<tr><td>2154</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editBixelWidth,'String','5');</td></tr>
<tr><td>2155</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2156</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2157</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2158</td><td bgcolor="#FF0000">pln.propStf.gantryAngles&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;parseStringAsNum(get(handles.editGantryAngle,'String'),true);&nbsp;%&nbsp;[???]</td></tr>
<tr><td>2159</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2160</td><td bgcolor="#FF0000">if&nbsp;handles.eduMode</td></tr>
<tr><td>2161</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editCouchAngle,'String',num2str(zeros(size(pln.propStf.gantryAngles))));</td></tr>
<tr><td>2162</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2163</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2164</td><td bgcolor="#FF0000">pln.propStf.couchAngles&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;parseStringAsNum(get(handles.editCouchAngle,'String'),true);&nbsp;%&nbsp;[???]</td></tr>
<tr><td>2165</td><td bgcolor="#FF0000">pln.propStf.numOfBeams&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;numel(pln.propStf.gantryAngles);</td></tr>
<tr><td>2166</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2167</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>2168</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.numOfVoxels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;prod(ct.cubeDim);</td></tr>
<tr><td>2169</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.voxelDimensions&nbsp;=&nbsp;ct.cubeDim;</td></tr>
<tr><td>2170</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>2171</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2172</td><td bgcolor="#FF0000">pln.numOfFractions&nbsp;&nbsp;=&nbsp;parseStringAsNum(get(handles.editFraction,'String'),false);</td></tr>
<tr><td>2173</td><td bgcolor="#FF0000">contents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popupRadMode,'String');&nbsp;</td></tr>
<tr><td>2174</td><td bgcolor="#FF0000">pln.radiationMode&nbsp;&nbsp;&nbsp;=&nbsp;contents{get(handles.popupRadMode,'Value')};&nbsp;%&nbsp;either&nbsp;photons&nbsp;/&nbsp;protons&nbsp;/&nbsp;carbon</td></tr>
<tr><td>2175</td><td bgcolor="#FF0000">contents&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popUpMachine,'String');&nbsp;</td></tr>
<tr><td>2176</td><td bgcolor="#FF0000">pln.machine&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;contents{get(handles.popUpMachine,'Value')};&nbsp;</td></tr>
<tr><td>2177</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2178</td><td bgcolor="#FF0000">if&nbsp;(~strcmp(pln.radiationMode,'photons'))</td></tr>
<tr><td>2179</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;contentBioOpt&nbsp;=&nbsp;get(handles.popMenuBioOpt,'String');</td></tr>
<tr><td>2180</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.propOpt.bioOptimization&nbsp;=&nbsp;contentBioOpt{get(handles.popMenuBioOpt,'Value'),:};</td></tr>
<tr><td>2181</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2182</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln.propOpt.bioOptimization&nbsp;=&nbsp;'none';</td></tr>
<tr><td>2183</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2184</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2185</td><td bgcolor="#FF0000">pln.propOpt.runSequencing&nbsp;=&nbsp;logical(get(handles.btnRunSequencing,'Value'));</td></tr>
<tr><td>2186</td><td bgcolor="#FF0000">pln.propOpt.runDAO&nbsp;=&nbsp;logical(get(handles.btnRunDAO,'Value'));</td></tr>
<tr><td>2187</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2188</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2189</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2190</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(sum(strcmp('TARGET',cst(:,3)))&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;get(handles.checkIsoCenter,'Value'))&nbsp;||&nbsp;...</td></tr>
<tr><td>2191</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(sum(strcmp('TARGET',cst(:,3)))&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;~isfield(pln.propStf,'isoCenter'))</td></tr>
<tr><td>2192</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)&nbsp;*&nbsp;matRad_getIsoCenter(cst,ct);</td></tr>
<tr><td>2193</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.checkIsoCenter,'Value',1);</td></tr>
<tr><td>2194</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>2195</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~strcmp(get(handles.editIsoCenter,'String'),'multiple&nbsp;isoCenter')</td></tr>
<tr><td>2196</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)&nbsp;*&nbsp;str2num(get(handles.editIsoCenter,'String'));</td></tr>
<tr><td>2197</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2198</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2199</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>2200</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;warning('couldnt&nbsp;set&nbsp;isocenter&nbsp;in&nbsp;getPln&nbsp;function')</td></tr>
<tr><td>2201</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2202</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2203</td><td bgcolor="#FF0000">handles.pln&nbsp;=&nbsp;pln;</td></tr>
<tr><td>2204</td><td bgcolor="#FF0000">assignin('base','pln',pln);</td></tr>
<tr><td>2205</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2206</td><td bgcolor="#FFFFFF">%&nbsp;parsing&nbsp;a&nbsp;string&nbsp;as&nbsp;number&nbsp;array</td></tr>
<tr><td>2207</td><td bgcolor="#FFFFFF">function&nbsp;number&nbsp;=&nbsp;parseStringAsNum(stringIn,isVector)</td></tr>
<tr><td>2208</td><td bgcolor="#FF0000">if&nbsp;isnumeric(stringIn)</td></tr>
<tr><td>2209</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;stringIn;</td></tr>
<tr><td>2210</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2211</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;str2num(stringIn);</td></tr>
<tr><td>2212</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isempty(number)&nbsp;||&nbsp;length(number)&nbsp;&gt;&nbsp;1&nbsp;&amp;&amp;&nbsp;~isVector</td></tr>
<tr><td>2213</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warndlg(['could&nbsp;not&nbsp;parse&nbsp;all&nbsp;parameters&nbsp;(pln,&nbsp;optimization&nbsp;parameter)']);&nbsp;</td></tr>
<tr><td>2214</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;NaN;</td></tr>
<tr><td>2215</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;isVector&nbsp;&amp;&amp;&nbsp;iscolumn(number)</td></tr>
<tr><td>2216</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;number&nbsp;=&nbsp;number';</td></tr>
<tr><td>2217</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2218</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2219</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2220</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2221</td><td bgcolor="#FFFFFF">%&nbsp;show&nbsp;error</td></tr>
<tr><td>2222</td><td bgcolor="#FFFFFF">function&nbsp;handles&nbsp;=&nbsp;showError(handles,Message,ME)</td></tr>
<tr><td>2223</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2224</td><td bgcolor="#FF0000">if&nbsp;nargin&nbsp;==&nbsp;3</td></tr>
<tr><td>2225</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Add&nbsp;exception&nbsp;message</td></tr>
<tr><td>2226</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(handles,'devMode')&nbsp;&amp;&amp;&nbsp;handles.devMode</td></tr>
<tr><td>2227</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meType&nbsp;=&nbsp;'extended';</td></tr>
<tr><td>2228</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</td></tr>
<tr><td>2229</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meType&nbsp;=&nbsp;'basic';</td></tr>
<tr><td>2230</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2231</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Message&nbsp;=&nbsp;{Message,ME.getReport(meType,'hyperlinks','off')};&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2232</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2233</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2234</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'ErrorDlg')</td></tr>
<tr><td>2235</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;ishandle(handles.ErrorDlg)</td></tr>
<tr><td>2236</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close(handles.ErrorDlg);</td></tr>
<tr><td>2237</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2238</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2239</td><td bgcolor="#FF0000">handles.ErrorDlg&nbsp;=&nbsp;errordlg(Message);</td></tr>
<tr><td>2240</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2241</td><td bgcolor="#FFFFFF">%&nbsp;show&nbsp;warning</td></tr>
<tr><td>2242</td><td bgcolor="#FFFFFF">function&nbsp;handles&nbsp;=&nbsp;showWarning(handles,Message,ME)</td></tr>
<tr><td>2243</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2244</td><td bgcolor="#FF0000">if&nbsp;nargin&nbsp;==&nbsp;3</td></tr>
<tr><td>2245</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Add&nbsp;exception&nbsp;message</td></tr>
<tr><td>2246</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(handles,'devMode')&nbsp;&amp;&amp;&nbsp;handles.devMode</td></tr>
<tr><td>2247</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meType&nbsp;=&nbsp;'extended';</td></tr>
<tr><td>2248</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</td></tr>
<tr><td>2249</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meType&nbsp;=&nbsp;'basic';</td></tr>
<tr><td>2250</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2251</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Message&nbsp;=&nbsp;{Message,ME.getReport(meType,'hyperlinks','off')};&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2252</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2253</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2254</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'WarnDlg')</td></tr>
<tr><td>2255</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;ishandle(handles.WarnDlg)</td></tr>
<tr><td>2256</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;close(handles.WarnDlg);</td></tr>
<tr><td>2257</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2258</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2259</td><td bgcolor="#FF0000">handles.WarnDlg&nbsp;=&nbsp;warndlg(Message);</td></tr>
<tr><td>2260</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2261</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;for&nbsp;valid&nbsp;machine&nbsp;data&nbsp;input&nbsp;file</td></tr>
<tr><td>2262</td><td bgcolor="#FFFFFF">function&nbsp;flag&nbsp;=&nbsp;checkRadiationComposition(handles)</td></tr>
<tr><td>2263</td><td bgcolor="#FF0000">flag&nbsp;=&nbsp;true;</td></tr>
<tr><td>2264</td><td bgcolor="#FF0000">contents&nbsp;=&nbsp;cellstr(get(handles.popUpMachine,'String'));</td></tr>
<tr><td>2265</td><td bgcolor="#FF0000">Machine&nbsp;=&nbsp;contents{get(handles.popUpMachine,'Value')};</td></tr>
<tr><td>2266</td><td bgcolor="#FF0000">contents&nbsp;=&nbsp;cellstr(get(handles.popupRadMode,'String'));</td></tr>
<tr><td>2267</td><td bgcolor="#FF0000">radMod&nbsp;=&nbsp;contents{get(handles.popupRadMode,'Value')};</td></tr>
<tr><td>2268</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2269</td><td bgcolor="#FF0000">if&nbsp;isdeployed</td></tr>
<tr><td>2270</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;baseroot&nbsp;=&nbsp;[ctfroot&nbsp;filesep&nbsp;'matRad'];</td></tr>
<tr><td>2271</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2272</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;baseroot&nbsp;=&nbsp;fileparts(mfilename('fullpath'));</td></tr>
<tr><td>2273</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2274</td><td bgcolor="#FF0000">FoundFile&nbsp;=&nbsp;dir([baseroot&nbsp;filesep&nbsp;'basedata'&nbsp;filesep&nbsp;radMod&nbsp;'_'&nbsp;Machine&nbsp;'.mat']);</td></tr>
<tr><td>2275</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2276</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2277</td><td bgcolor="#FF0000">if&nbsp;isempty(FoundFile)</td></tr>
<tr><td>2278</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;warndlg(['No&nbsp;base&nbsp;data&nbsp;available&nbsp;for&nbsp;machine:&nbsp;'&nbsp;Machine]);</td></tr>
<tr><td>2279</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;flag&nbsp;=&nbsp;false;</td></tr>
<tr><td>2280</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2281</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2282</td><td bgcolor="#FFFFFF">function&nbsp;matRadScrollWheelFcn(src,event)</td></tr>
<tr><td>2283</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2284</td><td bgcolor="#FFFFFF">%&nbsp;get&nbsp;handles</td></tr>
<tr><td>2285</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;guidata(src);</td></tr>
<tr><td>2286</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2287</td><td bgcolor="#FFFFFF">%&nbsp;compute&nbsp;new&nbsp;slice</td></tr>
<tr><td>2288</td><td bgcolor="#FF0000">currSlice&nbsp;=&nbsp;round(get(handles.sliderSlice,'Value'));</td></tr>
<tr><td>2289</td><td bgcolor="#FF0000">newSlice&nbsp;&nbsp;=&nbsp;currSlice&nbsp;-&nbsp;event.VerticalScrollCount;</td></tr>
<tr><td>2290</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2291</td><td bgcolor="#FFFFFF">%&nbsp;project&nbsp;to&nbsp;allowed&nbsp;set</td></tr>
<tr><td>2292</td><td bgcolor="#FF0000">newSlice&nbsp;=&nbsp;min(newSlice,get(handles.sliderSlice,'Max'));</td></tr>
<tr><td>2293</td><td bgcolor="#FF0000">newSlice&nbsp;=&nbsp;max(newSlice,get(handles.sliderSlice,'Min'));</td></tr>
<tr><td>2294</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2295</td><td bgcolor="#FFFFFF">%&nbsp;update&nbsp;slider</td></tr>
<tr><td>2296</td><td bgcolor="#FF0000">set(handles.sliderSlice,'Value',newSlice);</td></tr>
<tr><td>2297</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2298</td><td bgcolor="#FFFFFF">%&nbsp;update&nbsp;handles&nbsp;object</td></tr>
<tr><td>2299</td><td bgcolor="#FF0000">guidata(src,handles);</td></tr>
<tr><td>2300</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2301</td><td bgcolor="#FFFFFF">%&nbsp;update&nbsp;plot</td></tr>
<tr><td>2302</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>2303</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2304</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2305</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2306</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2307</td><td bgcolor="#FFFFFF">%%&nbsp;CALLBACKS</td></tr>
<tr><td>2308</td><td bgcolor="#FFFFFF">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</td></tr>
<tr><td>2309</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2310</td><td bgcolor="#FFFFFF">%&nbsp;button:&nbsp;show&nbsp;DVH</td></tr>
<tr><td>2311</td><td bgcolor="#FFFFFF">function&nbsp;btnDVH_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2312</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2313</td><td bgcolor="#FF0000">resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>2314</td><td bgcolor="#FF0000">Content&nbsp;=&nbsp;get(handles.popupDisplayOption,'String');</td></tr>
<tr><td>2315</td><td bgcolor="#FF0000">SelectedCube&nbsp;=&nbsp;Content{get(handles.popupDisplayOption,'Value')};</td></tr>
<tr><td>2316</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2317</td><td bgcolor="#FF0000">pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2318</td><td bgcolor="#FF0000">resultGUI_SelectedCube.physicalDose&nbsp;=&nbsp;resultGUI.(SelectedCube);</td></tr>
<tr><td>2319</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2320</td><td bgcolor="#FF0000">if&nbsp;~strcmp(pln.propOpt.bioOptimization,'none')</td></tr>
<tr><td>2321</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2322</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%check&nbsp;if&nbsp;one&nbsp;of&nbsp;the&nbsp;default&nbsp;fields&nbsp;is&nbsp;selected</td></tr>
<tr><td>2323</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(strcmp(SelectedCube,{'physicalDose','effect','RBE,','RBExDose','alpha','beta'}))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2324</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI_SelectedCube.physicalDose&nbsp;=&nbsp;resultGUI.physicalDose;</td></tr>
<tr><td>2325</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI_SelectedCube.RBExDose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;resultGUI.RBExDose;</td></tr>
<tr><td>2326</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>2327</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Idx&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;find(SelectedCube&nbsp;==&nbsp;'_');</td></tr>
<tr><td>2328</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SelectedSuffix&nbsp;=&nbsp;SelectedCube(Idx(1):end);</td></tr>
<tr><td>2329</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI_SelectedCube.physicalDose&nbsp;=&nbsp;resultGUI.(['physicalDose'&nbsp;SelectedSuffix]);</td></tr>
<tr><td>2330</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI_SelectedCube.RBExDose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;resultGUI.(['RBExDose'&nbsp;SelectedSuffix]);</td></tr>
<tr><td>2331</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2332</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2333</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2334</td><td bgcolor="#FFFFFF">%adapt&nbsp;visibilty</td></tr>
<tr><td>2335</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2336</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>2337</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{i,5}.Visible&nbsp;=&nbsp;handles.VOIPlotFlag(i);</td></tr>
<tr><td>2338</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2339</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2340</td><td bgcolor="#FF0000">matRad_indicatorWrapper(cst,pln,resultGUI_SelectedCube);</td></tr>
<tr><td>2341</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2342</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>2343</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2344</td><td bgcolor="#FFFFFF">%&nbsp;radio&nbsp;button:&nbsp;plot&nbsp;isolines&nbsp;labels</td></tr>
<tr><td>2345</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnIsoDoseLinesLabels_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2346</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>2347</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2348</td><td bgcolor="#FFFFFF">%&nbsp;button:&nbsp;refresh</td></tr>
<tr><td>2349</td><td bgcolor="#FFFFFF">function&nbsp;btnRefresh_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2350</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2351</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;resetGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>2352</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2353</td><td bgcolor="#FFFFFF">%%&nbsp;parse&nbsp;variables&nbsp;from&nbsp;base&nbsp;workspace</td></tr>
<tr><td>2354</td><td bgcolor="#FF0000">AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>2355</td><td bgcolor="#FF0000">handles.AllVarNames&nbsp;=&nbsp;AllVarNames;</td></tr>
<tr><td>2356</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2357</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>2358</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>2359</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2360</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%cst&nbsp;=&nbsp;setCstTable(handles,cst);</td></tr>
<tr><td>2361</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;generateCstTable(handles,cst);</td></tr>
<tr><td>2362</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>2363</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;matRad_computeVoiContoursWrapper(cst,ct);</td></tr>
<tr><td>2364</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);</td></tr>
<tr><td>2365</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles,&nbsp;ct,&nbsp;cst);</td></tr>
<tr><td>2366</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;~ismember('cst',AllVarNames)</td></tr>
<tr><td>2367</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;could&nbsp;not&nbsp;find&nbsp;cst&nbsp;file');</td></tr>
<tr><td>2368</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>2369</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,handles,ct);</td></tr>
<tr><td>2370</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;~ismember('ct',AllVarNames)&nbsp;&amp;&amp;&nbsp;&nbsp;ismember('cst',AllVarNames)</td></tr>
<tr><td>2371</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;could&nbsp;not&nbsp;find&nbsp;ct&nbsp;file');</td></tr>
<tr><td>2372</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>2373</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>2374</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>2375</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2376</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>2377</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'GUI&nbsp;OpeningFunc:&nbsp;Could&nbsp;not&nbsp;load&nbsp;ct&nbsp;and&nbsp;cst&nbsp;file');</td></tr>
<tr><td>2378</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;reloadGUI(hObject,&nbsp;handles);</td></tr>
<tr><td>2379</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2380</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2381</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>2382</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2383</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2384</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;#&nbsp;fractions</td></tr>
<tr><td>2385</td><td bgcolor="#FFFFFF">function&nbsp;editFraction_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2386</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>2387</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>2388</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2389</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;stratification&nbsp;levels</td></tr>
<tr><td>2390</td><td bgcolor="#FFFFFF">function&nbsp;editSequencingLevel_Callback(~,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2391</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2392</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;isoCenter&nbsp;in&nbsp;[mm]</td></tr>
<tr><td>2393</td><td bgcolor="#FFFFFF">function&nbsp;editIsoCenter_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2394</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2395</td><td bgcolor="#FF0000">pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2396</td><td bgcolor="#FF0000">tmpIsoCenter&nbsp;=&nbsp;str2num(get(hObject,'String'));</td></tr>
<tr><td>2397</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2398</td><td bgcolor="#FF0000">if&nbsp;length(tmpIsoCenter)&nbsp;==&nbsp;3</td></tr>
<tr><td>2399</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(any(unique(pln.propStf.isoCenter,'rows')~=tmpIsoCenter))</td></tr>
<tr><td>2400</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)*tmpIsoCenter;</td></tr>
<tr><td>2401</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>2402</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>2403</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2404</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2405</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'EditIsoCenterCallback:&nbsp;Could&nbsp;not&nbsp;set&nbsp;iso&nbsp;center');</td></tr>
<tr><td>2406</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2407</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2408</td><td bgcolor="#FF0000">assignin('base','pln',pln);</td></tr>
<tr><td>2409</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>2410</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2411</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;box:&nbsp;iso&nbsp;center&nbsp;auto</td></tr>
<tr><td>2412</td><td bgcolor="#FFFFFF">function&nbsp;checkIsoCenter_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2413</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2414</td><td bgcolor="#FF0000">W&nbsp;=&nbsp;evalin('base','whos');</td></tr>
<tr><td>2415</td><td bgcolor="#FF0000">doesPlnExist&nbsp;=&nbsp;ismember('pln',{W(:).name});</td></tr>
<tr><td>2416</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2417</td><td bgcolor="#FF0000">if&nbsp;get(hObject,'Value')&nbsp;&amp;&amp;&nbsp;doesPlnExist</td></tr>
<tr><td>2418</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2419</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(pln.propStf,'isoCenter')</td></tr>
<tr><td>2420</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;NaN;</td></tr>
<tr><td>2421</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2422</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmpIsoCenter&nbsp;=&nbsp;matRad_getIsoCenter(evalin('base','cst'),evalin('base','ct'));</td></tr>
<tr><td>2423</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isequal(tmpIsoCenter,pln.propStf.isoCenter)</td></tr>
<tr><td>2424</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln.propStf.isoCenter&nbsp;=&nbsp;ones(pln.propStf.numOfBeams,1)*tmpIsoCenter;</td></tr>
<tr><td>2425</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>2426</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>2427</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2428</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'String',regexprep(num2str((round(tmpIsoCenter*10))./10),&nbsp;'\s+',&nbsp;'&nbsp;'));</td></tr>
<tr><td>2429</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'Enable','off')</td></tr>
<tr><td>2430</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','pln',pln);</td></tr>
<tr><td>2431</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2432</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.editIsoCenter,'Enable','on')</td></tr>
<tr><td>2433</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2434</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2435</td><td bgcolor="#FFFFFF">%&nbsp;radio&nbsp;button:&nbsp;run&nbsp;sequencing</td></tr>
<tr><td>2436</td><td bgcolor="#FFFFFF">function&nbsp;btnRunSequencing_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2437</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>2438</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2439</td><td bgcolor="#FFFFFF">%&nbsp;radio&nbsp;button:&nbsp;run&nbsp;direct&nbsp;aperture&nbsp;optimization</td></tr>
<tr><td>2440</td><td bgcolor="#FFFFFF">function&nbsp;btnRunDAO_Callback(~,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2441</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>2442</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2443</td><td bgcolor="#FFFFFF">%&nbsp;button:&nbsp;set&nbsp;iso&nbsp;dose&nbsp;levels</td></tr>
<tr><td>2444</td><td bgcolor="#FFFFFF">function&nbsp;btnSetIsoDoseLevels_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2445</td><td bgcolor="#FF0000">prompt&nbsp;=&nbsp;{['Enter&nbsp;iso&nbsp;dose&nbsp;levels&nbsp;in&nbsp;[Gy].&nbsp;Enter&nbsp;space-separated&nbsp;numbers,&nbsp;e.g.&nbsp;1.5&nbsp;2&nbsp;3&nbsp;4.98.&nbsp;Enter&nbsp;0&nbsp;to&nbsp;use&nbsp;default&nbsp;values']};</td></tr>
<tr><td>2446</td><td bgcolor="#FF0000">if&nbsp;isequal(handles.IsoDose.Levels,0)&nbsp;||&nbsp;~isvector(handles.IsoDose.Levels)&nbsp;||&nbsp;any(~isnumeric(handles.IsoDose.Levels))&nbsp;||&nbsp;any(isnan(handles.IsoDose.Levels))</td></tr>
<tr><td>2447</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;defaultLine&nbsp;=&nbsp;{'1&nbsp;2&nbsp;3&nbsp;'};</td></tr>
<tr><td>2448</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2449</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isrow(handles.IsoDose.Levels)</td></tr>
<tr><td>2450</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultLine&nbsp;=&nbsp;cellstr(num2str(handles.IsoDose.Levels,'%.2g&nbsp;'));</td></tr>
<tr><td>2451</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else&nbsp;</td></tr>
<tr><td>2452</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defaultLine&nbsp;=&nbsp;cellstr(num2str(handles.IsoDose.Levels','%.2g&nbsp;'));</td></tr>
<tr><td>2453</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2454</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2455</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2456</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2457</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Input&nbsp;=&nbsp;inputdlg(prompt,'Set&nbsp;iso&nbsp;dose&nbsp;levels&nbsp;',&nbsp;[1&nbsp;70],defaultLine);</td></tr>
<tr><td>2458</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isempty(Input)</td></tr>
<tr><td>2459</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Levels&nbsp;=&nbsp;(sort(str2num(Input{1})));</td></tr>
<tr><td>2460</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;length(handles.IsoDose.Levels)&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;(handles.IsoDose.Levels(1)&nbsp;~=&nbsp;0)</td></tr>
<tr><td>2461</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Levels&nbsp;=&nbsp;[handles.IsoDose.Levels&nbsp;handles.IsoDose.Levels];</td></tr>
<tr><td>2462</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2463</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.NewIsoDoseFlag&nbsp;=&nbsp;true;</td></tr>
<tr><td>2464</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2465</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>2466</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;warning('Couldnt&nbsp;parse&nbsp;iso&nbsp;dose&nbsp;levels&nbsp;-&nbsp;using&nbsp;default&nbsp;values');</td></tr>
<tr><td>2467</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Levels&nbsp;=&nbsp;0;</td></tr>
<tr><td>2468</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2469</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>2470</td><td bgcolor="#FF0000">handles.IsoDose.NewIsoDoseFlag&nbsp;=&nbsp;false;</td></tr>
<tr><td>2471</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>2472</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>2473</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2474</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2475</td><td bgcolor="#FFFFFF">%&nbsp;popup&nbsp;menu:&nbsp;machine</td></tr>
<tr><td>2476</td><td bgcolor="#FFFFFF">function&nbsp;popUpMachine_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2477</td><td bgcolor="#FF0000">contents&nbsp;=&nbsp;cellstr(get(hObject,'String'));</td></tr>
<tr><td>2478</td><td bgcolor="#FF0000">checkRadiationComposition(handles);</td></tr>
<tr><td>2479</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2480</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2481</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;0&nbsp;&amp;&amp;&nbsp;~strcmp(contents(get(hObject,'Value')),pln.machine)</td></tr>
<tr><td>2482</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>2483</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>2484</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>2485</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2486</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>2487</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2488</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2489</td><td bgcolor="#FFFFFF">%&nbsp;toolbar&nbsp;load&nbsp;button</td></tr>
<tr><td>2490</td><td bgcolor="#FFFFFF">function&nbsp;toolbarLoad_ClickedCallback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>2491</td><td bgcolor="#FF0000">btnLoadMat_Callback(hObject,&nbsp;eventdata,&nbsp;handles);</td></tr>
<tr><td>2492</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2493</td><td bgcolor="#FFFFFF">%&nbsp;toolbar&nbsp;save&nbsp;button</td></tr>
<tr><td>2494</td><td bgcolor="#FFFFFF">function&nbsp;toolbarSave_ClickedCallback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>2495</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2496</td><td bgcolor="#FF0000">btnTableSave_Callback(hObject,&nbsp;eventdata,&nbsp;handles);</td></tr>
<tr><td>2497</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2498</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2499</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2500</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2501</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>2502</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2503</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2504</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2505</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2506</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;1</td></tr>
<tr><td>2507</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;=&nbsp;evalin('base','stf');</td></tr>
<tr><td>2508</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dij&nbsp;=&nbsp;evalin('base','dij');</td></tr>
<tr><td>2509</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2510</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2511</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;2</td></tr>
<tr><td>2512</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>2513</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2514</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2515</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;handles.State</td></tr>
<tr><td>2516</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;1</td></tr>
<tr><td>2517</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uisave({'cst','ct','pln'});</td></tr>
<tr><td>2518</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2</td></tr>
<tr><td>2519</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uisave({'cst','ct','pln','stf','dij'});</td></tr>
<tr><td>2520</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3</td></tr>
<tr><td>2521</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uisave({'cst','ct','pln','stf','dij','resultGUI'});</td></tr>
<tr><td>2522</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2523</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2524</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>2525</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showWarning(handles,'Could&nbsp;not&nbsp;save&nbsp;files');&nbsp;</td></tr>
<tr><td>2526</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2527</td><td bgcolor="#FF0000">guidata(hObject,handles);&nbsp;</td></tr>
<tr><td>2528</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2529</td><td bgcolor="#FFFFFF">%&nbsp;button:&nbsp;about</td></tr>
<tr><td>2530</td><td bgcolor="#FFFFFF">function&nbsp;btnAbout_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>2531</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2532</td><td bgcolor="#FF0000">[~,matRadVer]&nbsp;=&nbsp;matRad_version;</td></tr>
<tr><td>2533</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2534</td><td bgcolor="#FF0000">msg{1}&nbsp;=&nbsp;['matRad&nbsp;'''&nbsp;matRadVer.name&nbsp;''''];&nbsp;%Name</td></tr>
<tr><td>2535</td><td bgcolor="#FF0000">if&nbsp;handles.eduMode</td></tr>
<tr><td>2536</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;msg{1}&nbsp;=&nbsp;[msg{1}&nbsp;'&nbsp;Educational'];</td></tr>
<tr><td>2537</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2538</td><td bgcolor="#FF0000">msg{end+1}&nbsp;=&nbsp;sprintf('v%d.%d.%d',matRadVer.major,matRadVer.minor,matRadVer.patch);&nbsp;%Version&nbsp;Number</td></tr>
<tr><td>2539</td><td bgcolor="#FF0000">if&nbsp;isdeployed</td></tr>
<tr><td>2540</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;msg{end+1}&nbsp;=&nbsp;'Standalone&nbsp;Version';</td></tr>
<tr><td>2541</td><td bgcolor="#FFFFFF">elseif&nbsp;~isempty(matRadVer.branch)&nbsp;&amp;&amp;&nbsp;~isempty(matRadVer.commitID)</td></tr>
<tr><td>2542</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;msg{end+1}&nbsp;=&nbsp;sprintf('Git:&nbsp;Branch&nbsp;%s,&nbsp;commit&nbsp;%s',matRadVer.branch,matRadVer.commitID(1:8));</td></tr>
<tr><td>2543</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2544</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2545</td><td bgcolor="#FF0000">[env,envver]&nbsp;&nbsp;=&nbsp;matRad_getEnvironment();</td></tr>
<tr><td>2546</td><td bgcolor="#FF0000">msg{end+1}&nbsp;=&nbsp;sprintf('Environment:&nbsp;%s&nbsp;v%s&nbsp;%s',env,envver,version('-release'));</td></tr>
<tr><td>2547</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2548</td><td bgcolor="#FF0000">msg{end+1}&nbsp;=&nbsp;'Web:&nbsp;www.matrad.org';</td></tr>
<tr><td>2549</td><td bgcolor="#FF0000">msg{end+1}&nbsp;=&nbsp;'E-Mail:&nbsp;contact@matrad.org';</td></tr>
<tr><td>2550</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2551</td><td bgcolor="#FF0000">msgbox(msg,'About&nbsp;matRad');</td></tr>
<tr><td>2552</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2553</td><td bgcolor="#FFFFFF">%&nbsp;button:&nbsp;close</td></tr>
<tr><td>2554</td><td bgcolor="#FFFFFF">function&nbsp;figure1_CloseRequestFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2555</td><td bgcolor="#FF0000">set(0,'DefaultUicontrolBackgroundColor',[0.5&nbsp;0.5&nbsp;0.5]);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2556</td><td bgcolor="#FF0000">selection&nbsp;=&nbsp;questdlg('Do&nbsp;you&nbsp;really&nbsp;want&nbsp;to&nbsp;close&nbsp;matRad?',...</td></tr>
<tr><td>2557</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Close&nbsp;matRad',...</td></tr>
<tr><td>2558</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Yes','No','Yes');</td></tr>
<tr><td>2559</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2560</td><td bgcolor="#FFFFFF">%BackgroundColor',[0.5&nbsp;0.5&nbsp;0.5]</td></tr>
<tr><td>2561</td><td bgcolor="#FF0000">&nbsp;switch&nbsp;selection</td></tr>
<tr><td>2562</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;case&nbsp;'Yes'</td></tr>
<tr><td>2563</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delete(hObject);</td></tr>
<tr><td>2564</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;case&nbsp;'No'</td></tr>
<tr><td>2565</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>2566</td><td bgcolor="#FFFFFF">&nbsp;end</td></tr>
<tr><td>2567</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2568</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;pushbutton_recalc.</td></tr>
<tr><td>2569</td><td bgcolor="#FFFFFF">function&nbsp;pushbutton_recalc_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2570</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2571</td><td bgcolor="#FFFFFF">%&nbsp;recalculation&nbsp;only&nbsp;makes&nbsp;sense&nbsp;if&nbsp;...</td></tr>
<tr><td>2572</td><td bgcolor="#FF0000">if&nbsp;evalin('base','exist(''pln'',''var'')')&nbsp;&amp;&amp;&nbsp;...</td></tr>
<tr><td>2573</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;evalin('base','exist(''stf'',''var'')')&nbsp;&amp;&amp;&nbsp;...</td></tr>
<tr><td>2574</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;evalin('base','exist(''ct'',''var'')')&nbsp;&amp;&amp;&nbsp;...</td></tr>
<tr><td>2575</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;evalin('base','exist(''cst'',''var'')')&nbsp;&amp;&amp;&nbsp;...</td></tr>
<tr><td>2576</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;evalin('base','exist(''resultGUI'',''var'')')</td></tr>
<tr><td>2577</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2578</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>2579</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2580</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;indicate&nbsp;that&nbsp;matRad&nbsp;is&nbsp;busy</td></tr>
<tr><td>2581</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;mouse&nbsp;pointer&nbsp;to&nbsp;hour&nbsp;glass&nbsp;</td></tr>
<tr><td>2582</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Figures&nbsp;=&nbsp;gcf;%findobj('type','figure');</td></tr>
<tr><td>2583</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'watch');&nbsp;</td></tr>
<tr><td>2584</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;drawnow;</td></tr>
<tr><td>2585</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;disable&nbsp;all&nbsp;active&nbsp;objects</td></tr>
<tr><td>2586</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;InterfaceObj&nbsp;=&nbsp;findobj(Figures,'Enable','on');</td></tr>
<tr><td>2587</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','off');</td></tr>
<tr><td>2588</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2589</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;get&nbsp;all&nbsp;data&nbsp;from&nbsp;workspace</td></tr>
<tr><td>2590</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pln&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2591</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;stf&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;evalin('base','stf');</td></tr>
<tr><td>2592</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>2593</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2594</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>2595</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2596</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;get&nbsp;weights&nbsp;of&nbsp;the&nbsp;selected&nbsp;cube</td></tr>
<tr><td>2597</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;=&nbsp;get(handles.popupDisplayOption,'String');</td></tr>
<tr><td>2598</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;SelectedCube&nbsp;=&nbsp;Content{get(handles.popupDisplayOption,'Value')};</td></tr>
<tr><td>2599</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;strsplit(SelectedCube,'_');</td></tr>
<tr><td>2600</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;length(Suffix)&gt;1</td></tr>
<tr><td>2601</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;['_'&nbsp;Suffix{2}];</td></tr>
<tr><td>2602</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>2603</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;'';</td></tr>
<tr><td>2604</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2605</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2606</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;wField&nbsp;=&nbsp;['w'&nbsp;Suffix];</td></tr>
<tr><td>2607</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2608</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(resultGUI,wField)&nbsp;</td></tr>
<tr><td>2609</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warndlg(['No&nbsp;exact&nbsp;match&nbsp;found&nbsp;for&nbsp;weight&nbsp;vector&nbsp;'''&nbsp;wField&nbsp;'''&nbsp;with&nbsp;selected&nbsp;dose&nbsp;insance.&nbsp;Trying&nbsp;common&nbsp;weight&nbsp;vector&nbsp;''w''&nbsp;instead!']);</td></tr>
<tr><td>2610</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wField&nbsp;=&nbsp;'w';</td></tr>
<tr><td>2611</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2612</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2613</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Second&nbsp;sanity&nbsp;check&nbsp;to&nbsp;exclude&nbsp;case&nbsp;with&nbsp;no&nbsp;'w'&nbsp;present</td></tr>
<tr><td>2614</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(resultGUI,wField)</td></tr>
<tr><td>2615</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errordlg('No&nbsp;weight&nbsp;vector&nbsp;found&nbsp;for&nbsp;forward&nbsp;dose&nbsp;recalculation!');</td></tr>
<tr><td>2616</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>2617</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2618</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2619</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum([stf.totalNumOfBixels])&nbsp;~=&nbsp;length(resultGUI.(wField))</td></tr>
<tr><td>2620</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errordlg('Selected&nbsp;weight&nbsp;vector&nbsp;does&nbsp;not&nbsp;correspond&nbsp;to&nbsp;current&nbsp;steering&nbsp;file&nbsp;(wrong&nbsp;number&nbsp;of&nbsp;entries/bixels!)!');</td></tr>
<tr><td>2621</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>2622</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2623</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2624</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;isocenter&nbsp;if&nbsp;that&nbsp;was&nbsp;changed&nbsp;and&nbsp;do&nbsp;_not_&nbsp;recreate&nbsp;steering</td></tr>
<tr><td>2625</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;information</td></tr>
<tr><td>2626</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:numel(pln.propStf.gantryAngles)</td></tr>
<tr><td>2627</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stf(i).isoCenter&nbsp;=&nbsp;pln.propStf.isoCenter(i,:);</td></tr>
<tr><td>2628</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2629</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2630</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;recalculate&nbsp;influence&nbsp;matrix</td></tr>
<tr><td>2631</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'photons')</td></tr>
<tr><td>2632</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dij&nbsp;=&nbsp;matRad_calcPhotonDose(ct,stf,pln,cst);</td></tr>
<tr><td>2633</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;strcmp(pln.radiationMode,'protons')&nbsp;||&nbsp;strcmp(pln.radiationMode,'carbon')</td></tr>
<tr><td>2634</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dij&nbsp;=&nbsp;matRad_calcParticleDose(ct,stf,pln,cst);</td></tr>
<tr><td>2635</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2636</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2637</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;recalculate&nbsp;cubes&nbsp;in&nbsp;resultGUI</td></tr>
<tr><td>2638</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;resultGUIreCalc&nbsp;=&nbsp;matRad_calcCubes(resultGUI.(wField),dij);</td></tr>
<tr><td>2639</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2640</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;old&nbsp;variables&nbsp;to&nbsp;avoid&nbsp;confusion</td></tr>
<tr><td>2641</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'effect')</td></tr>
<tr><td>2642</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'effect');</td></tr>
<tr><td>2643</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'RBExDose');&nbsp;</td></tr>
<tr><td>2644</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'RBE');&nbsp;</td></tr>
<tr><td>2645</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'alpha');&nbsp;</td></tr>
<tr><td>2646</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI&nbsp;=&nbsp;rmfield(resultGUI,'beta');</td></tr>
<tr><td>2647</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2648</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2649</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;overwrite&nbsp;the&nbsp;"standard"&nbsp;fields</td></tr>
<tr><td>2650</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sNames&nbsp;=&nbsp;fieldnames(resultGUIreCalc);</td></tr>
<tr><td>2651</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:length(sNames)</td></tr>
<tr><td>2652</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(sNames{j})&nbsp;=&nbsp;resultGUIreCalc.(sNames{j});</td></tr>
<tr><td>2653</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2654</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2655</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;assign&nbsp;results&nbsp;to&nbsp;base&nbsp;worksapce</td></tr>
<tr><td>2656</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','dij',dij);</td></tr>
<tr><td>2657</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>2658</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2659</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;3;</td></tr>
<tr><td>2660</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2661</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;show&nbsp;physicalDose&nbsp;of&nbsp;newly&nbsp;computed&nbsp;state</td></tr>
<tr><td>2662</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.SelectedDisplayOption&nbsp;=&nbsp;'physicalDose';</td></tr>
<tr><td>2663</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'Value',find(strcmp('physicalDose',Content)));</td></tr>
<tr><td>2664</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2665</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>2666</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>2667</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>2668</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2669</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>2670</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2671</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>2672</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2673</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>2674</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2675</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>2676</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>2677</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;true;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2678</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2679</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>2680</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2681</td><td bgcolor="#FF0000">catch&nbsp;ME</td></tr>
<tr><td>2682</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'CalcDoseCallback:&nbsp;Error&nbsp;in&nbsp;dose&nbsp;recalculation!',ME);&nbsp;</td></tr>
<tr><td>2683</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2684</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;change&nbsp;state&nbsp;from&nbsp;busy&nbsp;to&nbsp;normal</td></tr>
<tr><td>2685</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(Figures,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>2686</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(InterfaceObj,'Enable','on');</td></tr>
<tr><td>2687</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2688</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>2689</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>2690</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2691</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2692</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2693</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2694</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2695</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2696</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnSetTissue.</td></tr>
<tr><td>2697</td><td bgcolor="#FFFFFF">function&nbsp;btnSetTissue_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2698</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2699</td><td bgcolor="#FFFFFF">%check&nbsp;if&nbsp;patient&nbsp;is&nbsp;loaded</td></tr>
<tr><td>2700</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;==&nbsp;0</td></tr>
<tr><td>2701</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return</td></tr>
<tr><td>2702</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2703</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2704</td><td bgcolor="#FFFFFF">%parse&nbsp;variables&nbsp;from&nbsp;base-workspace</td></tr>
<tr><td>2705</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>2706</td><td bgcolor="#FF0000">pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2707</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2708</td><td bgcolor="#FF0000">fileName&nbsp;=&nbsp;[pln.radiationMode&nbsp;'_'&nbsp;pln.machine];</td></tr>
<tr><td>2709</td><td bgcolor="#FF0000">load(['basedata'&nbsp;filesep&nbsp;fileName]);</td></tr>
<tr><td>2710</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2711</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;for&nbsp;available&nbsp;cell&nbsp;types&nbsp;characterized&nbsp;by&nbsp;alphaX&nbsp;and&nbsp;betaX&nbsp;</td></tr>
<tr><td>2712</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(machine.data(1).alphaX,2)</td></tr>
<tr><td>2713</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;CellType{i}&nbsp;=&nbsp;[num2str(machine.data(1).alphaX(i))&nbsp;'&nbsp;'&nbsp;num2str(machine.data(1).betaX(i))];</td></tr>
<tr><td>2714</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2715</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2716</td><td bgcolor="#FFFFFF">%fill&nbsp;table&nbsp;data&nbsp;array</td></tr>
<tr><td>2717</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>2718</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;data{i,1}&nbsp;=&nbsp;cst{i,2};</td></tr>
<tr><td>2719</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;data{i,2}&nbsp;=&nbsp;[num2str(cst{i,5}.alphaX)&nbsp;'&nbsp;'&nbsp;num2str(cst{i,5}.betaX)];</td></tr>
<tr><td>2720</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;data{i,3}&nbsp;=&nbsp;(cst{i,5}.alphaX&nbsp;/&nbsp;cst{i,5}.betaX&nbsp;);</td></tr>
<tr><td>2721</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2722</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2723</td><td bgcolor="#FF0000">Width&nbsp;&nbsp;=&nbsp;400;</td></tr>
<tr><td>2724</td><td bgcolor="#FF0000">Height&nbsp;=&nbsp;200&nbsp;+&nbsp;20*size(data,1);</td></tr>
<tr><td>2725</td><td bgcolor="#FF0000">ScreenSize&nbsp;=&nbsp;get(0,'ScreenSize');</td></tr>
<tr><td>2726</td><td bgcolor="#FFFFFF">%&nbsp;show&nbsp;"set&nbsp;tissue&nbsp;parameter"&nbsp;window</td></tr>
<tr><td>2727</td><td bgcolor="#FF0000">figHandles&nbsp;=&nbsp;get(0,'Children');</td></tr>
<tr><td>2728</td><td bgcolor="#FF0000">if&nbsp;~isempty(figHandles)</td></tr>
<tr><td>2729</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;IdxHandle&nbsp;=&nbsp;strcmp(get(figHandles,'Name'),'Set&nbsp;Tissue&nbsp;Parameters');</td></tr>
<tr><td>2730</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2731</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;IdxHandle&nbsp;=&nbsp;[];</td></tr>
<tr><td>2732</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2733</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2734</td><td bgcolor="#FFFFFF">%check&nbsp;if&nbsp;window&nbsp;is&nbsp;already&nbsp;exists&nbsp;</td></tr>
<tr><td>2735</td><td bgcolor="#FF0000">if&nbsp;any(IdxHandle)</td></tr>
<tr><td>2736</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;IdxTable&nbsp;=&nbsp;find(strcmp({figHandles(IdxHandle).Children.Type},'uitable'));</td></tr>
<tr><td>2737</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(figHandles(IdxHandle).Children(IdxTable),&nbsp;'Data',&nbsp;[]);</td></tr>
<tr><td>2738</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figTissue&nbsp;=&nbsp;figHandles(IdxHandle);</td></tr>
<tr><td>2739</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%set&nbsp;focus</td></tr>
<tr><td>2740</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figure(figTissue);</td></tr>
<tr><td>2741</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2742</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figTissue&nbsp;=&nbsp;figure('Name','Set&nbsp;Tissue&nbsp;Parameters','Color',[.5&nbsp;.5&nbsp;.5],'NumberTitle','off','Position',...</td></tr>
<tr><td>2743</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ceil(ScreenSize(3)/2)&nbsp;ceil(ScreenSize(4)/2)&nbsp;Width&nbsp;Height]);</td></tr>
<tr><td>2744</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2745</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2746</td><td bgcolor="#FFFFFF">%&nbsp;define&nbsp;the&nbsp;tissue&nbsp;parameter&nbsp;table</td></tr>
<tr><td>2747</td><td bgcolor="#FF0000">cNames&nbsp;=&nbsp;{'VOI','alphaX&nbsp;betaX','alpha&nbsp;beta&nbsp;ratio'};</td></tr>
<tr><td>2748</td><td bgcolor="#FF0000">columnformat&nbsp;=&nbsp;{'char',CellType,'numeric'};</td></tr>
<tr><td>2749</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2750</td><td bgcolor="#FF0000">tissueTable&nbsp;=&nbsp;uitable('Parent',&nbsp;figTissue,'Data',&nbsp;data,'ColumnEditable',[false&nbsp;true&nbsp;false],...</td></tr>
<tr><td>2751</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'ColumnName',cNames,&nbsp;'ColumnFormat',columnformat,'Position',[50&nbsp;150&nbsp;10&nbsp;10]);</td></tr>
<tr><td>2752</td><td bgcolor="#FF0000">set(tissueTable,'CellEditCallback',@tissueTable_CellEditCallback);</td></tr>
<tr><td>2753</td><td bgcolor="#FFFFFF">%&nbsp;set&nbsp;width&nbsp;and&nbsp;height</td></tr>
<tr><td>2754</td><td bgcolor="#FF0000">currTablePos&nbsp;=&nbsp;get(tissueTable,'Position');</td></tr>
<tr><td>2755</td><td bgcolor="#FF0000">currTableExt&nbsp;=&nbsp;get(tissueTable,'Extent');</td></tr>
<tr><td>2756</td><td bgcolor="#FF0000">currTablePos(3)&nbsp;=&nbsp;currTableExt(3);</td></tr>
<tr><td>2757</td><td bgcolor="#FF0000">currTablePos(4)&nbsp;=&nbsp;currTableExt(4);</td></tr>
<tr><td>2758</td><td bgcolor="#FF0000">set(tissueTable,'Position',currTablePos);</td></tr>
<tr><td>2759</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2760</td><td bgcolor="#FFFFFF">%&nbsp;define&nbsp;two&nbsp;buttons&nbsp;with&nbsp;callbacks</td></tr>
<tr><td>2761</td><td bgcolor="#FF0000">uicontrol('Parent',&nbsp;figTissue,'Style',&nbsp;'pushbutton',&nbsp;'String',&nbsp;'Save&amp;Close',...</td></tr>
<tr><td>2762</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Position',&nbsp;[Width-(0.25*Width)&nbsp;0.1&nbsp;*&nbsp;Height&nbsp;70&nbsp;30],...</td></tr>
<tr><td>2763</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Callback',&nbsp;@(hpb,eventdata)SaveTissueParameters(hpb,eventdata,handles,tissueTable));</td></tr>
<tr><td>2764</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2765</td><td bgcolor="#FF0000">uicontrol('Parent',&nbsp;figTissue,'Style',&nbsp;'pushbutton',&nbsp;'String',&nbsp;'Cancel&amp;Close',...</td></tr>
<tr><td>2766</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Position',&nbsp;[Width-(0.5*Width)&nbsp;0.1&nbsp;*&nbsp;Height&nbsp;80&nbsp;30],...</td></tr>
<tr><td>2767</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Callback',&nbsp;'close');&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2768</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2769</td><td bgcolor="#FF0000">guidata(hObject,handles);&nbsp;</td></tr>
<tr><td>2770</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>2771</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2772</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2773</td><td bgcolor="#FFFFFF">function&nbsp;SaveTissueParameters(~,&nbsp;~,&nbsp;handles,tissueTable)&nbsp;</td></tr>
<tr><td>2774</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2775</td><td bgcolor="#FFFFFF">%&nbsp;get&nbsp;handle&nbsp;to&nbsp;uiTable</td></tr>
<tr><td>2776</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2777</td><td bgcolor="#FFFFFF">%&nbsp;retrieve&nbsp;data&nbsp;from&nbsp;uitable</td></tr>
<tr><td>2778</td><td bgcolor="#FF0000">data&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(tissueTable,'data');</td></tr>
<tr><td>2779</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2780</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>2781</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:size(data,1)</td></tr>
<tr><td>2782</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(cst{i,2},data{j,1})</td></tr>
<tr><td>2783</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alphaXBetaX&nbsp;=&nbsp;str2num(data{j,2});</td></tr>
<tr><td>2784</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{i,5}.alphaX&nbsp;=&nbsp;alphaXBetaX(1);</td></tr>
<tr><td>2785</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{i,5}.betaX&nbsp;&nbsp;=&nbsp;alphaXBetaX(2);</td></tr>
<tr><td>2786</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2787</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2788</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2789</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>2790</td><td bgcolor="#FF0000">close(get(tissueTable,'Parent'));</td></tr>
<tr><td>2791</td><td bgcolor="#FF0000">handles.State&nbsp;=&nbsp;2;</td></tr>
<tr><td>2792</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>2793</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2794</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2795</td><td bgcolor="#FFFFFF">function&nbsp;tissueTable_CellEditCallback(hObject,&nbsp;eventdata,&nbsp;~)&nbsp;</td></tr>
<tr><td>2796</td><td bgcolor="#FF0000">if&nbsp;eventdata.Indices(2)&nbsp;==&nbsp;2</td></tr>
<tr><td>2797</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;alphaXBetaX&nbsp;=&nbsp;str2num(eventdata.NewData);</td></tr>
<tr><td>2798</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;data&nbsp;=&nbsp;get(hObject,'Data');</td></tr>
<tr><td>2799</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;data{eventdata.Indices(1),3}&nbsp;=&nbsp;alphaXBetaX(1)/alphaXBetaX(2);</td></tr>
<tr><td>2800</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;set(hObject,'Data',data);</td></tr>
<tr><td>2801</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2802</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2803</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btnSaveToGUI.</td></tr>
<tr><td>2804</td><td bgcolor="#FFFFFF">function&nbsp;btnSaveToGUI_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>2805</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2806</td><td bgcolor="#FF0000">Width&nbsp;&nbsp;=&nbsp;400;</td></tr>
<tr><td>2807</td><td bgcolor="#FF0000">Height&nbsp;=&nbsp;200;</td></tr>
<tr><td>2808</td><td bgcolor="#FF0000">ScreenSize&nbsp;=&nbsp;get(0,'ScreenSize');</td></tr>
<tr><td>2809</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2810</td><td bgcolor="#FFFFFF">%&nbsp;show&nbsp;"Provide&nbsp;result&nbsp;name"&nbsp;window</td></tr>
<tr><td>2811</td><td bgcolor="#FF0000">figHandles&nbsp;=&nbsp;get(0,'Children');</td></tr>
<tr><td>2812</td><td bgcolor="#FF0000">if&nbsp;~isempty(figHandles)</td></tr>
<tr><td>2813</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;IdxHandle&nbsp;=&nbsp;strcmp(get(figHandles,'Name'),'Provide&nbsp;result&nbsp;name');</td></tr>
<tr><td>2814</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2815</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;IdxHandle&nbsp;=&nbsp;[];</td></tr>
<tr><td>2816</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2817</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2818</td><td bgcolor="#FFFFFF">%check&nbsp;if&nbsp;window&nbsp;is&nbsp;already&nbsp;exists&nbsp;</td></tr>
<tr><td>2819</td><td bgcolor="#FF0000">if&nbsp;any(IdxHandle)</td></tr>
<tr><td>2820</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figDialog&nbsp;=&nbsp;figHandles(IdxHandle);</td></tr>
<tr><td>2821</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%set&nbsp;focus</td></tr>
<tr><td>2822</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figure(figDialog);</td></tr>
<tr><td>2823</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2824</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;figDialog&nbsp;=&nbsp;dialog('Position',[ceil(ScreenSize(3)/2)&nbsp;ceil(ScreenSize(4)/2)&nbsp;Width&nbsp;Height],'Name','Provide&nbsp;result&nbsp;name','Color',[0.5&nbsp;0.5&nbsp;0.5]);</td></tr>
<tr><td>2825</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2826</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uicontrol('Parent',figDialog,...</td></tr>
<tr><td>2827</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Style','text',...</td></tr>
<tr><td>2828</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Position',[20&nbsp;Height&nbsp;-&nbsp;(0.35*Height)&nbsp;350&nbsp;60],...</td></tr>
<tr><td>2829</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'String','Please&nbsp;provide&nbsp;a&nbsp;decriptive&nbsp;name&nbsp;for&nbsp;your&nbsp;optimization&nbsp;result:','FontSize',10,'BackgroundColor',[0.5&nbsp;0.5&nbsp;0.5]);</td></tr>
<tr><td>2830</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2831</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uicontrol('Parent',figDialog,...</td></tr>
<tr><td>2832</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Style','edit',...</td></tr>
<tr><td>2833</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Position',[30&nbsp;60&nbsp;350&nbsp;60],...&nbsp;</td></tr>
<tr><td>2834</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'String','Please&nbsp;enter&nbsp;name&nbsp;here...','FontSize',10,'BackgroundColor',[0.55&nbsp;0.55&nbsp;0.55]);</td></tr>
<tr><td>2835</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2836</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uicontrol('Parent',&nbsp;figDialog,'Style',&nbsp;'pushbutton',&nbsp;'String',&nbsp;'Save','FontSize',10,...</td></tr>
<tr><td>2837</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Position',&nbsp;[0.42*Width&nbsp;0.1&nbsp;*&nbsp;Height&nbsp;70&nbsp;30],...</td></tr>
<tr><td>2838</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Callback',&nbsp;@(hpb,eventdata)SaveResultToGUI(hpb,eventdata,guidata(hpb)));&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2839</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2840</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2841</td><td bgcolor="#FF0000">uiwait(figDialog);</td></tr>
<tr><td>2842</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>2843</td><td bgcolor="#FF0000">UpdateState(handles)</td></tr>
<tr><td>2844</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>2845</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2846</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2847</td><td bgcolor="#FFFFFF">function&nbsp;SaveResultToGUI(~,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2848</td><td bgcolor="#FF0000">AllFigHandles&nbsp;=&nbsp;get(0,'Children');&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2849</td><td bgcolor="#FF0000">ixHandle&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;strcmp(get(AllFigHandles,'Name'),'Provide&nbsp;result&nbsp;name');</td></tr>
<tr><td>2850</td><td bgcolor="#FF0000">uiEdit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(AllFigHandles(ixHandle),'Children');</td></tr>
<tr><td>2851</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2852</td><td bgcolor="#FF0000">if&nbsp;strcmp(get(uiEdit(2),'String'),'Please&nbsp;enter&nbsp;name&nbsp;here...')</td></tr>
<tr><td>2853</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;</td></tr>
<tr><td>2854</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;formatOut&nbsp;=&nbsp;'mmddyyHHMM';</td></tr>
<tr><td>2855</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;['_'&nbsp;datestr(now,formatOut)];</td></tr>
<tr><td>2856</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2857</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;special&nbsp;characters</td></tr>
<tr><td>2858</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;get(uiEdit(2),'String');</td></tr>
<tr><td>2859</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;logIx&nbsp;=&nbsp;isstrprop(Suffix,'alphanum');</td></tr>
<tr><td>2860</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;Suffix&nbsp;=&nbsp;['_'&nbsp;Suffix(logIx)];</td></tr>
<tr><td>2861</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2862</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2863</td><td bgcolor="#FF0000">pln&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>2864</td><td bgcolor="#FF0000">resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>2865</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2866</td><td bgcolor="#FF0000">if&nbsp;isfield(resultGUI,'physicalDose')</td></tr>
<tr><td>2867</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['physicalDose'&nbsp;Suffix])&nbsp;&nbsp;=&nbsp;resultGUI.physicalDose;&nbsp;</td></tr>
<tr><td>2868</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2869</td><td bgcolor="#FF0000">if&nbsp;isfield(resultGUI,'w')</td></tr>
<tr><td>2870</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['w'&nbsp;Suffix])&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;resultGUI.w;</td></tr>
<tr><td>2871</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2872</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2873</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2874</td><td bgcolor="#FF0000">if&nbsp;~strcmp(pln.propOpt.bioOptimization,'none')</td></tr>
<tr><td>2875</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2876</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'RBExDose')</td></tr>
<tr><td>2877</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['RBExDose'&nbsp;Suffix])&nbsp;=&nbsp;resultGUI.RBExDose;&nbsp;</td></tr>
<tr><td>2878</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2879</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2880</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(pln.radiationMode,'carbon')&nbsp;==&nbsp;1&nbsp;</td></tr>
<tr><td>2881</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'effect')</td></tr>
<tr><td>2882</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['effect'&nbsp;Suffix])=&nbsp;resultGUI.effect;&nbsp;</td></tr>
<tr><td>2883</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2884</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2885</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'RBE')</td></tr>
<tr><td>2886</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['RBE'&nbsp;Suffix])&nbsp;=&nbsp;resultGUI.RBE;</td></tr>
<tr><td>2887</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2888</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'alpha')</td></tr>
<tr><td>2889</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['alpha'&nbsp;Suffix])&nbsp;=&nbsp;resultGUI.alpha;</td></tr>
<tr><td>2890</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2891</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(resultGUI,'beta')</td></tr>
<tr><td>2892</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(['beta'&nbsp;Suffix])&nbsp;=&nbsp;resultGUI.beta;</td></tr>
<tr><td>2893</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2894</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2895</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2896</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2897</td><td bgcolor="#FF0000">close(AllFigHandles(ixHandle));</td></tr>
<tr><td>2898</td><td bgcolor="#FF0000">assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>2899</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2900</td><td bgcolor="#FFFFFF">%&nbsp;precompute&nbsp;contours&nbsp;of&nbsp;VOIs</td></tr>
<tr><td>2901</td><td bgcolor="#FFFFFF">function&nbsp;cst&nbsp;=&nbsp;precomputeContours(ct,cst)</td></tr>
<tr><td>2902</td><td bgcolor="#FF0000">mask&nbsp;=&nbsp;zeros(ct.cubeDim);&nbsp;%&nbsp;create&nbsp;zero&nbsp;cube&nbsp;with&nbsp;same&nbsp;dimeonsions&nbsp;like&nbsp;dose&nbsp;cube</td></tr>
<tr><td>2903</td><td bgcolor="#FF0000">for&nbsp;s&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>2904</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{s,7}&nbsp;=&nbsp;cell(max(ct.cubeDim(:)),3);</td></tr>
<tr><td>2905</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;mask(:)&nbsp;=&nbsp;0;</td></tr>
<tr><td>2906</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;mask(cst{s,4}{1})&nbsp;=&nbsp;1;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2907</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;slice&nbsp;=&nbsp;1:ct.cubeDim(1)</td></tr>
<tr><td>2908</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(sum(mask(slice,:,:)))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2909</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{s,7}{slice,1}&nbsp;=&nbsp;contourc(squeeze(mask(slice,:,:)),.5*[1&nbsp;1]);</td></tr>
<tr><td>2910</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2911</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2912</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;slice&nbsp;=&nbsp;1:ct.cubeDim(2)</td></tr>
<tr><td>2913</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(sum(mask(:,slice,:)))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2914</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{s,7}{slice,2}&nbsp;=&nbsp;contourc(squeeze(mask(:,slice,:)),.5*[1&nbsp;1]);</td></tr>
<tr><td>2915</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2916</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2917</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;slice&nbsp;=&nbsp;1:ct.cubeDim(3)</td></tr>
<tr><td>2918</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(sum(mask(:,:,slice)))&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>2919</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{s,7}{slice,3}&nbsp;=&nbsp;contourc(squeeze(mask(:,:,slice)),.5*[1&nbsp;1]);</td></tr>
<tr><td>2920</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2921</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>2922</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2923</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2924</td><td bgcolor="#FFFFFF">%Update&nbsp;IsodoseLines</td></tr>
<tr><td>2925</td><td bgcolor="#FFFFFF">function&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles)</td></tr>
<tr><td>2926</td><td bgcolor="#FF0000">resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>2927</td><td bgcolor="#FFFFFF">%&nbsp;select&nbsp;first&nbsp;cube&nbsp;if&nbsp;selected&nbsp;option&nbsp;does&nbsp;not&nbsp;exist</td></tr>
<tr><td>2928</td><td bgcolor="#FF0000">if&nbsp;~isfield(resultGUI,handles.SelectedDisplayOption)</td></tr>
<tr><td>2929</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;CubeNames&nbsp;=&nbsp;fieldnames(resultGUI);</td></tr>
<tr><td>2930</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;dose&nbsp;=&nbsp;resultGUI.(CubeNames{1,1});</td></tr>
<tr><td>2931</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>2932</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;dose&nbsp;=&nbsp;resultGUI.(handles.SelectedDisplayOption);</td></tr>
<tr><td>2933</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2934</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2935</td><td bgcolor="#FFFFFF">%if&nbsp;function&nbsp;is&nbsp;called&nbsp;for&nbsp;the&nbsp;first&nbsp;time&nbsp;then&nbsp;set&nbsp;display&nbsp;parameters&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2936</td><td bgcolor="#FF0000">if&nbsp;isempty(handles.dispWindow{3,2})</td></tr>
<tr><td>2937</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{3,1}&nbsp;=&nbsp;[min(dose(:))&nbsp;max(dose(:))];&nbsp;%&nbsp;set&nbsp;default&nbsp;dose&nbsp;range</td></tr>
<tr><td>2938</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow{3,2}&nbsp;=&nbsp;[min(dose(:))&nbsp;max(dose(:))];&nbsp;%&nbsp;set&nbsp;min&nbsp;max&nbsp;values&nbsp;&nbsp;</td></tr>
<tr><td>2939</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2940</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2941</td><td bgcolor="#FF0000">minMaxRange&nbsp;=&nbsp;handles.dispWindow{3,1};</td></tr>
<tr><td>2942</td><td bgcolor="#FFFFFF">%&nbsp;if&nbsp;upper&nbsp;colorrange&nbsp;is&nbsp;defined&nbsp;then&nbsp;use&nbsp;it&nbsp;otherwise&nbsp;120%&nbsp;iso&nbsp;dose&nbsp;</td></tr>
<tr><td>2943</td><td bgcolor="#FF0000">&nbsp;upperMargin&nbsp;=&nbsp;1;</td></tr>
<tr><td>2944</td><td bgcolor="#FF0000">if&nbsp;abs((max(dose(:))&nbsp;-&nbsp;handles.dispWindow{3,1}(1,2)))&nbsp;&lt;&nbsp;0.01&nbsp;&nbsp;*&nbsp;max(dose(:))</td></tr>
<tr><td>2945</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;upperMargin&nbsp;=&nbsp;1.2;</td></tr>
<tr><td>2946</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2947</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2948</td><td bgcolor="#FF0000">if&nbsp;(length(handles.IsoDose.Levels)&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;handles.IsoDose.Levels(1,1)&nbsp;==&nbsp;0)&nbsp;||&nbsp;~handles.IsoDose.NewIsoDoseFlag</td></tr>
<tr><td>2949</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;vLevels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;[0.1:0.1:0.9&nbsp;0.95:0.05:upperMargin];&nbsp;&nbsp;</td></tr>
<tr><td>2950</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;referenceDose&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;(minMaxRange(1,2))/(upperMargin);</td></tr>
<tr><td>2951</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.IsoDose.Levels&nbsp;&nbsp;&nbsp;=&nbsp;minMaxRange(1,1)&nbsp;+&nbsp;(referenceDose-minMaxRange(1,1))&nbsp;*&nbsp;vLevels;</td></tr>
<tr><td>2952</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2953</td><td bgcolor="#FF0000">handles.IsoDose.Contours&nbsp;=&nbsp;matRad_computeIsoDoseContours(dose,handles.IsoDose.Levels);</td></tr>
<tr><td>2954</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2955</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2956</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>2957</td><td bgcolor="#FFFFFF">%%&nbsp;CREATE&nbsp;FUNCTIONS</td></tr>
<tr><td>2958</td><td bgcolor="#FFFFFF">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</td></tr>
<tr><td>2959</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2960</td><td bgcolor="#FFFFFF">%&nbsp;popup&nbsp;menu:&nbsp;machine</td></tr>
<tr><td>2961</td><td bgcolor="#FFFFFF">function&nbsp;popUpMachine_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2962</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2963</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2964</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2965</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2966</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;max&nbsp;value</td></tr>
<tr><td>2967</td><td bgcolor="#FFFFFF">function&nbsp;txtMaxVal_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2968</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2969</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2970</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2971</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2972</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2973</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;edit&nbsp;iso&nbsp;center</td></tr>
<tr><td>2974</td><td bgcolor="#FFFFFF">function&nbsp;editIsoCenter_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2975</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2976</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2977</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2978</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2979</td><td bgcolor="#FFFFFF">%&nbsp;text&nbsp;box:&nbsp;stratification&nbsp;levels</td></tr>
<tr><td>2980</td><td bgcolor="#FFFFFF">function&nbsp;editSequencingLevel_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2981</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2982</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2983</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2984</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2985</td><td bgcolor="#FFFFFF">function&nbsp;slicerPrecision_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2986</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2987</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>2988</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2989</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2990</td><td bgcolor="#FFFFFF">function&nbsp;editBixelWidth_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2991</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2992</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2993</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2994</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>2995</td><td bgcolor="#FFFFFF">function&nbsp;editGantryAngle_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>2996</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>2997</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>2998</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>2999</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3000</td><td bgcolor="#FFFFFF">function&nbsp;editCouchAngle_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3001</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3002</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3003</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3004</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3005</td><td bgcolor="#FFFFFF">function&nbsp;popupRadMode_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3006</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3007</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3008</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3009</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3010</td><td bgcolor="#FFFFFF">function&nbsp;editFraction_CreateFcn(hObject,&nbsp;~,&nbsp;~)&nbsp;</td></tr>
<tr><td>3011</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3012</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3013</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3014</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3015</td><td bgcolor="#FFFFFF">function&nbsp;popupPlane_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3016</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3017</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3018</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3019</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3020</td><td bgcolor="#FFFFFF">function&nbsp;sliderSlice_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3021</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3022</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3023</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3024</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3025</td><td bgcolor="#FFFFFF">function&nbsp;popupTypeOfPlot_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3026</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3027</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3028</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3029</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3030</td><td bgcolor="#FFFFFF">function&nbsp;popupDisplayOption_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3031</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3032</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3033</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3034</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3035</td><td bgcolor="#FFFFFF">function&nbsp;sliderBeamSelection_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3036</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3037</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3038</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3039</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3040</td><td bgcolor="#FFFFFF">function&nbsp;listBoxCmd_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3041</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3042</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3043</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3044</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3045</td><td bgcolor="#FFFFFF">function&nbsp;sliderOffset_CreateFcn(hObject,&nbsp;~,&nbsp;~)</td></tr>
<tr><td>3046</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3047</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3048</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3049</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3050</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;legendTable.</td></tr>
<tr><td>3051</td><td bgcolor="#FFFFFF">function&nbsp;legendTable_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3052</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;legendTable&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3053</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3054</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3055</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3056</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;contents&nbsp;=&nbsp;cellstr(get(hObject,'String'))&nbsp;returns&nbsp;legendTable&nbsp;contents&nbsp;as&nbsp;cell&nbsp;array</td></tr>
<tr><td>3057</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents{get(hObject,'Value')}&nbsp;returns&nbsp;selected&nbsp;item&nbsp;from&nbsp;legendTable</td></tr>
<tr><td>3058</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>3059</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3060</td><td bgcolor="#FF0000">idx&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3061</td><td bgcolor="#FF0000">clr&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;dec2hex(round(cst{idx,5}.visibleColor(:)*255),2)';</td></tr>
<tr><td>3062</td><td bgcolor="#FF0000">clr&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;['#';clr(:)]';</td></tr>
<tr><td>3063</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3064</td><td bgcolor="#FFFFFF">%Get&nbsp;the&nbsp;string&nbsp;entries</td></tr>
<tr><td>3065</td><td bgcolor="#FF0000">tmpString&nbsp;=&nbsp;get(handles.legendTable,'String');</td></tr>
<tr><td>3066</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3067</td><td bgcolor="#FF0000">if&nbsp;handles.VOIPlotFlag(idx)</td></tr>
<tr><td>3068</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(idx)&nbsp;=&nbsp;false;</td></tr>
<tr><td>3069</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{idx,5}.Visible&nbsp;=&nbsp;false;</td></tr>
<tr><td>3070</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmpString{idx}&nbsp;=&nbsp;['&lt;html&gt;&lt;table&nbsp;border=0&nbsp;&gt;&lt;TR&gt;&lt;TD&nbsp;bgcolor=',clr,'&nbsp;width="18"&gt;&lt;/TD&gt;&lt;TD&gt;',cst{idx,2},'&lt;/TD&gt;&lt;/TR&gt;&nbsp;&lt;/table&gt;&lt;/html&gt;'];</td></tr>
<tr><td>3071</td><td bgcolor="#FFFFFF">elseif&nbsp;~handles.VOIPlotFlag(idx)</td></tr>
<tr><td>3072</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(idx)&nbsp;=&nbsp;true;</td></tr>
<tr><td>3073</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{idx,5}.Visible&nbsp;=&nbsp;true;</td></tr>
<tr><td>3074</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmpString{idx}&nbsp;=&nbsp;['&lt;html&gt;&lt;table&nbsp;border=0&nbsp;&gt;&lt;TR&gt;&lt;TD&nbsp;bgcolor=',clr,'&nbsp;width="18"&gt;&lt;center&gt;&amp;#10004;&lt;/center&gt;&lt;/TD&gt;&lt;TD&gt;',cst{idx,2},'&lt;/TD&gt;&lt;/TR&gt;&nbsp;&lt;/table&gt;&lt;/html&gt;'];</td></tr>
<tr><td>3075</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3076</td><td bgcolor="#FF0000">set(handles.legendTable,'String',tmpString);</td></tr>
<tr><td>3077</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3078</td><td bgcolor="#FFFFFF">%&nbsp;update&nbsp;cst&nbsp;in&nbsp;workspace&nbsp;accordingly</td></tr>
<tr><td>3079</td><td bgcolor="#FF0000">assignin('base','cst',cst)</td></tr>
<tr><td>3080</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3081</td><td bgcolor="#FF0000">guidata(hObject,&nbsp;handles);</td></tr>
<tr><td>3082</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>3083</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3084</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3085</td><td bgcolor="#FFFFFF">function&nbsp;legendTable_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3086</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;legendTable&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3087</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3088</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3089</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3090</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;listbox&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3091</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3092</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3093</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3094</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3095</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3096</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3097</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;importDoseButton.</td></tr>
<tr><td>3098</td><td bgcolor="#FFFFFF">function&nbsp;importDoseButton_Callback(hObject,eventdata,&nbsp;handles)</td></tr>
<tr><td>3099</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;importDoseButton&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3100</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3101</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3102</td><td bgcolor="#FF0000">extensions{1}&nbsp;=&nbsp;'*.nrrd';</td></tr>
<tr><td>3103</td><td bgcolor="#FF0000">[filenames,filepath,~]&nbsp;=&nbsp;uigetfile(extensions,'MultiSelect','on');</td></tr>
<tr><td>3104</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3105</td><td bgcolor="#FF0000">if&nbsp;~iscell(filenames)</td></tr>
<tr><td>3106</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;tmp&nbsp;=&nbsp;filenames;</td></tr>
<tr><td>3107</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;filenames&nbsp;=&nbsp;cell(1);</td></tr>
<tr><td>3108</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;filenames{1}&nbsp;=&nbsp;tmp;</td></tr>
<tr><td>3109</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3110</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3111</td><td bgcolor="#FF0000">ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>3112</td><td bgcolor="#FF0000">resultGUI&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>3113</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3114</td><td bgcolor="#FF0000">for&nbsp;filename&nbsp;=&nbsp;filenames</td></tr>
<tr><td>3115</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;[~,name,~]&nbsp;=&nbsp;fileparts(filename{1});</td></tr>
<tr><td>3116</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;[cube,~]&nbsp;=&nbsp;matRad_readCube(fullfile(filepath,filename{1}));</td></tr>
<tr><td>3117</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isequal(ct.cubeDim,&nbsp;size(cube))</td></tr>
<tr><td>3118</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errordlg('Dimensions&nbsp;of&nbsp;the&nbsp;imported&nbsp;cube&nbsp;do&nbsp;not&nbsp;match&nbsp;with&nbsp;ct','Import&nbsp;failed!','modal');</td></tr>
<tr><td>3119</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td></tr>
<tr><td>3120</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3121</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3122</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;fieldname&nbsp;=&nbsp;['import_'&nbsp;matlab.lang.makeValidName(name,&nbsp;'ReplacementStyle','delete')];</td></tr>
<tr><td>3123</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;resultGUI.(fieldname)&nbsp;=&nbsp;cube;</td></tr>
<tr><td>3124</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3125</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3126</td><td bgcolor="#FF0000">assignin('base','resultGUI',resultGUI);</td></tr>
<tr><td>3127</td><td bgcolor="#FF0000">btnRefresh_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3128</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3129</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;pushbutton_importFromBinary.</td></tr>
<tr><td>3130</td><td bgcolor="#FFFFFF">function&nbsp;pushbutton_importFromBinary_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3131</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;pushbutton_importFromBinary&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3132</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3133</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3134</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3135</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>3136</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;delete&nbsp;existing&nbsp;workspace&nbsp;-&nbsp;parse&nbsp;variables&nbsp;from&nbsp;base&nbsp;workspace</td></tr>
<tr><td>3137</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupDisplayOption,'String','no&nbsp;option&nbsp;available');</td></tr>
<tr><td>3138</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;AllVarNames&nbsp;=&nbsp;evalin('base','who');</td></tr>
<tr><td>3139</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;RefVarNames&nbsp;=&nbsp;{'ct','cst','pln','stf','dij','resultGUI'};</td></tr>
<tr><td>3140</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:length(RefVarNames)&nbsp;&nbsp;</td></tr>
<tr><td>3141</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;sum(ismember(AllVarNames,RefVarNames{i}))&gt;0</td></tr>
<tr><td>3142</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;evalin('base',['clear&nbsp;',&nbsp;RefVarNames{i}]);</td></tr>
<tr><td>3143</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3144</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3145</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;0;</td></tr>
<tr><td>3146</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3147</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%call&nbsp;the&nbsp;gui</td></tr>
<tr><td>3148</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uiwait(matRad_importGUI);</td></tr>
<tr><td>3149</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3150</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Check&nbsp;if&nbsp;we&nbsp;have&nbsp;the&nbsp;variables&nbsp;in&nbsp;the&nbsp;workspace</td></tr>
<tr><td>3151</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;evalin('base','exist(''cst'',''var'')')&nbsp;==&nbsp;1&nbsp;&amp;&amp;&nbsp;evalin('base','exist(''ct'',''var'')')&nbsp;==&nbsp;1</td></tr>
<tr><td>3152</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>3153</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>3154</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%setCstTable(handles,cst);</td></tr>
<tr><td>3155</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generateCstTable(handles,cst);</td></tr>
<tr><td>3156</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.TableChanged&nbsp;=&nbsp;false;</td></tr>
<tr><td>3157</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.popupTypeOfPlot,'Value',1);</td></tr>
<tr><td>3158</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3159</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;compute&nbsp;HU&nbsp;values</td></tr>
<tr><td>3160</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(ct,&nbsp;'cubeHU')</td></tr>
<tr><td>3161</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;matRad_electronDensitiesToHU(ct);</td></tr>
<tr><td>3162</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','ct',ct);</td></tr>
<tr><td>3163</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3164</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(ct,&nbsp;'cubeHU')</td></tr>
<tr><td>3165</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cubeHUavailable&nbsp;=&nbsp;false;</td></tr>
<tr><td>3166</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3167</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.cubeHUavailable&nbsp;=&nbsp;true;</td></tr>
<tr><td>3168</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3169</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3170</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;precompute&nbsp;contours&nbsp;</td></tr>
<tr><td>3171</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst&nbsp;=&nbsp;precomputeContours(ct,cst);</td></tr>
<tr><td>3172</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3173</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','ct',ct);</td></tr>
<tr><td>3174</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);</td></tr>
<tr><td>3175</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3176</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;evalin('base','exist(''pln'',''var'')')</td></tr>
<tr><td>3177</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','pln',pln);</td></tr>
<tr><td>3178</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setPln(handles);</td></tr>
<tr><td>3179</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3180</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getPlnFromGUI(handles);</td></tr>
<tr><td>3181</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setPln(handles);</td></tr>
<tr><td>3182</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3183</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>3184</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3185</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3186</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;set&nbsp;slice&nbsp;slider</td></tr>
<tr><td>3187</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.plane&nbsp;=&nbsp;get(handles.popupPlane,'value');</td></tr>
<tr><td>3188</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;0</td></tr>
<tr><td>3189</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set(handles.sliderSlice,'Min',1,'Max',ct.cubeDim(handles.plane),...</td></tr>
<tr><td>3190</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Value',round(ct.cubeDim(handles.plane)/2),...</td></tr>
<tr><td>3191</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'SliderStep',[1/(ct.cubeDim(handles.plane)-1)&nbsp;1/(ct.cubeDim(handles.plane)-1)]);</td></tr>
<tr><td>3192</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3193</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3194</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>3195</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;define&nbsp;context&nbsp;menu&nbsp;for&nbsp;structures</td></tr>
<tr><td>3196</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>3197</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;cst{i,5}.Visible</td></tr>
<tr><td>3198</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(i)&nbsp;=&nbsp;true;</td></tr>
<tr><td>3199</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3200</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(i)&nbsp;=&nbsp;false;</td></tr>
<tr><td>3201</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3202</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3203</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3204</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3205</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.dispWindow&nbsp;=&nbsp;cell(3,2);</td></tr>
<tr><td>3206</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3207</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3208</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>3209</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;false;</td></tr>
<tr><td>3210</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;UpdatePlot(handles);</td></tr>
<tr><td>3211</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.rememberCurrAxes&nbsp;=&nbsp;true;</td></tr>
<tr><td>3212</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>3213</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;showError(handles,'Binary&nbsp;Patient&nbsp;Import:&nbsp;Could&nbsp;not&nbsp;import&nbsp;data');</td></tr>
<tr><td>3214</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;UpdateState(handles);</td></tr>
<tr><td>3215</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3216</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3217</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3218</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3219</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radioBtnIsoCenter.</td></tr>
<tr><td>3220</td><td bgcolor="#FFFFFF">function&nbsp;radioBtnIsoCenter_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3221</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radioBtnIsoCenter&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3222</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3223</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3224</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>3225</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radioBtnIsoCenter</td></tr>
<tr><td>3226</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3227</td><td bgcolor="#FFFFFF">%&nbsp;--------------------------------------------------------------------</td></tr>
<tr><td>3228</td><td bgcolor="#FFFFFF">function&nbsp;uipushtool_screenshot_ClickedCallback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3229</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;uipushtool_screenshot&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3230</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3231</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3232</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3233</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>3234</td><td bgcolor="#FF0000">tmpFig&nbsp;=&nbsp;figure('position',[100&nbsp;100&nbsp;700&nbsp;600],'Visible','off','name','Current&nbsp;View');&nbsp;</td></tr>
<tr><td>3235</td><td bgcolor="#FF0000">cBarHandle&nbsp;=&nbsp;findobj(handles.figure1,'Type','colorbar');</td></tr>
<tr><td>3236</td><td bgcolor="#FF0000">if&nbsp;~isempty(cBarHandle)</td></tr>
<tr><td>3237</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;new_handle&nbsp;=&nbsp;copyobj([handles.axesFig&nbsp;cBarHandle],tmpFig);</td></tr>
<tr><td>3238</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3239</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;new_handle&nbsp;=&nbsp;copyobj(handles.axesFig,tmpFig);</td></tr>
<tr><td>3240</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3241</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3242</td><td bgcolor="#FF0000">oldPos&nbsp;=&nbsp;get(handles.axesFig,'Position');</td></tr>
<tr><td>3243</td><td bgcolor="#FF0000">set(new_handle(1),'units','normalized',&nbsp;'Position',oldPos);</td></tr>
<tr><td>3244</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3245</td><td bgcolor="#FF0000">if&nbsp;~isfield(handles,'lastStoragePath')&nbsp;||&nbsp;exist(handles.lastStoragePath,'dir')&nbsp;~=&nbsp;7</td></tr>
<tr><td>3246</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;lastStoragePath&nbsp;=&nbsp;[];&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3247</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3248</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;lastStoragePath&nbsp;=&nbsp;handles.lastStoragePath;</td></tr>
<tr><td>3249</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3250</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3251</td><td bgcolor="#FF0000">[filename,&nbsp;pathname]&nbsp;=&nbsp;uiputfile({'*.jpg;*.tif;*.png;*.gif','All&nbsp;Image&nbsp;Files';&nbsp;'*.fig','MATLAB&nbsp;figure&nbsp;file'},'Save&nbsp;current&nbsp;view',[lastStoragePath&nbsp;'screenshot.png']);</td></tr>
<tr><td>3252</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3253</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3254</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3255</td><td bgcolor="#FF0000">if&nbsp;~isequal(filename,0)&nbsp;&amp;&amp;&nbsp;~isequal(pathname,0)</td></tr>
<tr><td>3256</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.lastStoragePath&nbsp;=&nbsp;pathname;</td></tr>
<tr><td>3257</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(gcf,&nbsp;'pointer',&nbsp;'watch');</td></tr>
<tr><td>3258</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;saveas(tmpFig,fullfile(pathname,filename));</td></tr>
<tr><td>3259</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(gcf,&nbsp;'pointer',&nbsp;'arrow');</td></tr>
<tr><td>3260</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;close(tmpFig);</td></tr>
<tr><td>3261</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uiwait(msgbox('Current&nbsp;view&nbsp;has&nbsp;been&nbsp;succesfully&nbsp;saved!'));</td></tr>
<tr><td>3262</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3263</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uiwait(msgbox('Aborted&nbsp;saving,&nbsp;showing&nbsp;figure&nbsp;instead!'));</td></tr>
<tr><td>3264</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(tmpFig,'Visible','on');</td></tr>
<tr><td>3265</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3266</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3267</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3268</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3269</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3270</td><td bgcolor="#FFFFFF">%%&nbsp;Callbacks&nbsp;&amp;&nbsp;Functions&nbsp;for&nbsp;color&nbsp;setting</td></tr>
<tr><td>3271</td><td bgcolor="#FFFFFF">function&nbsp;UpdateColormapOptions(handles)</td></tr>
<tr><td>3272</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3273</td><td bgcolor="#FF0000">if&nbsp;isfield(handles,'colormapLocked')&nbsp;&amp;&amp;&nbsp;handles.colormapLocked</td></tr>
<tr><td>3274</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>3275</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3276</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3277</td><td bgcolor="#FF0000">selectionIndex&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3278</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3279</td><td bgcolor="#FF0000">cMapSelectionIndex&nbsp;=&nbsp;get(handles.popupmenu_chooseColormap,'Value');</td></tr>
<tr><td>3280</td><td bgcolor="#FF0000">cMapStrings&nbsp;=&nbsp;get(handles.popupmenu_chooseColormap,'String');</td></tr>
<tr><td>3281</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3282</td><td bgcolor="#FF0000">if&nbsp;selectionIndex&nbsp;&gt;&nbsp;1&nbsp;</td></tr>
<tr><td>3283</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.uitoggletool8,'State','on');</td></tr>
<tr><td>3284</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3285</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(handles.uitoggletool8,'State','off');</td></tr>
<tr><td>3286</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3287</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3288</td><td bgcolor="#FF0000">try&nbsp;</td></tr>
<tr><td>3289</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;selectionIndex&nbsp;==&nbsp;2</td></tr>
<tr><td>3290</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>3291</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentMap&nbsp;=&nbsp;handles.ctColorMap;</td></tr>
<tr><td>3292</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=&nbsp;handles.dispWindow{selectionIndex,1};</td></tr>
<tr><td>3293</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.cubeHUavailable</td></tr>
<tr><td>3294</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minMax&nbsp;=&nbsp;[min(ct.cubeHU{1}(:))&nbsp;max(ct.cubeHU{1}(:))];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3295</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3296</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minMax&nbsp;=&nbsp;[min(ct.cube{1}(:))&nbsp;max(ct.cube{1}(:))];</td></tr>
<tr><td>3297</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3298</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;adjust&nbsp;value&nbsp;for&nbsp;custom&nbsp;window&nbsp;to&nbsp;current</td></tr>
<tr><td>3299</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.windowPresets(1).width&nbsp;=&nbsp;max(window)&nbsp;-&nbsp;min(window);</td></tr>
<tr><td>3300</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.windowPresets(1).center&nbsp;=&nbsp;mean(window);</td></tr>
<tr><td>3301</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;update&nbsp;full&nbsp;window&nbsp;information</td></tr>
<tr><td>3302</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.windowPresets(2).width&nbsp;=&nbsp;minMax(2)&nbsp;-&nbsp;minMax(1);</td></tr>
<tr><td>3303</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.windowPresets(2).center&nbsp;=&nbsp;mean(minMax);</td></tr>
<tr><td>3304</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;selectionIndex&nbsp;==&nbsp;3</td></tr>
<tr><td>3305</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;evalin('base','resultGUI');&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3306</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dose&nbsp;=&nbsp;result.(handles.SelectedDisplayOption);</td></tr>
<tr><td>3307</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentMap&nbsp;=&nbsp;handles.doseColorMap;</td></tr>
<tr><td>3308</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minMax&nbsp;=&nbsp;[min(dose(:))&nbsp;max(dose(:))];</td></tr>
<tr><td>3309</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=&nbsp;handles.dispWindow{selectionIndex,1};</td></tr>
<tr><td>3310</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3311</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=&nbsp;[0&nbsp;1];</td></tr>
<tr><td>3312</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minMax&nbsp;=&nbsp;window;</td></tr>
<tr><td>3313</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentMap&nbsp;=&nbsp;'bone';</td></tr>
<tr><td>3314</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3315</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>3316</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;window&nbsp;=&nbsp;[0&nbsp;1];</td></tr>
<tr><td>3317</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;minMax&nbsp;=&nbsp;window;</td></tr>
<tr><td>3318</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;currentMap&nbsp;=&nbsp;'bone';</td></tr>
<tr><td>3319</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3320</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3321</td><td bgcolor="#FF0000">valueRange&nbsp;=&nbsp;minMax(2)&nbsp;-&nbsp;minMax(1);</td></tr>
<tr><td>3322</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3323</td><td bgcolor="#FF0000">windowWidth&nbsp;=&nbsp;window(2)&nbsp;-&nbsp;window(1);</td></tr>
<tr><td>3324</td><td bgcolor="#FF0000">windowCenter&nbsp;=&nbsp;mean(window);</td></tr>
<tr><td>3325</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3326</td><td bgcolor="#FFFFFF">%This&nbsp;are&nbsp;some&nbsp;arbritrary&nbsp;settings&nbsp;to&nbsp;configure&nbsp;the&nbsp;sliders</td></tr>
<tr><td>3327</td><td bgcolor="#FF0000">sliderCenterMinMax&nbsp;=&nbsp;[minMax(1)-valueRange/2&nbsp;minMax(2)+valueRange/2];</td></tr>
<tr><td>3328</td><td bgcolor="#FF0000">sliderWidthMinMax&nbsp;=&nbsp;[0&nbsp;valueRange*2];</td></tr>
<tr><td>3329</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3330</td><td bgcolor="#FFFFFF">%if&nbsp;we&nbsp;have&nbsp;selected&nbsp;a&nbsp;value&nbsp;outside&nbsp;this&nbsp;range,&nbsp;we&nbsp;adapt&nbsp;the&nbsp;slider</td></tr>
<tr><td>3331</td><td bgcolor="#FFFFFF">%windows</td></tr>
<tr><td>3332</td><td bgcolor="#FF0000">if&nbsp;windowCenter&nbsp;&lt;&nbsp;sliderCenterMinMax(1)</td></tr>
<tr><td>3333</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderCenterMinMax(1)&nbsp;=&nbsp;windowCenter;</td></tr>
<tr><td>3334</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3335</td><td bgcolor="#FF0000">if&nbsp;windowCenter&nbsp;&gt;&nbsp;sliderCenterMinMax(2)</td></tr>
<tr><td>3336</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderCenterMinMax(2)&nbsp;=&nbsp;windowCenter;</td></tr>
<tr><td>3337</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3338</td><td bgcolor="#FF0000">if&nbsp;windowWidth&nbsp;&lt;&nbsp;sliderWidthMinMax(1)</td></tr>
<tr><td>3339</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderWidthMinMax(1)&nbsp;=&nbsp;windowWidth;</td></tr>
<tr><td>3340</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3341</td><td bgcolor="#FF0000">if&nbsp;windowCenter&nbsp;&gt;&nbsp;sliderCenterMinMax(2)</td></tr>
<tr><td>3342</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderWidthMinMax(2)&nbsp;=&nbsp;windowWidth;</td></tr>
<tr><td>3343</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3344</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3345</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3346</td><td bgcolor="#FF0000">set(handles.edit_windowCenter,'String',num2str(windowCenter,3));&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3347</td><td bgcolor="#FF0000">set(handles.edit_windowWidth,'String',num2str(windowWidth,3));</td></tr>
<tr><td>3348</td><td bgcolor="#FF0000">set(handles.edit_windowRange,'String',num2str(window,4));</td></tr>
<tr><td>3349</td><td bgcolor="#FF0000">set(handles.slider_windowCenter,'Min',sliderCenterMinMax(1),'Max',sliderCenterMinMax(2),'Value',windowCenter);</td></tr>
<tr><td>3350</td><td bgcolor="#FF0000">set(handles.slider_windowWidth,'Min',sliderWidthMinMax(1),'Max',sliderWidthMinMax(2),'Value',windowWidth);</td></tr>
<tr><td>3351</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3352</td><td bgcolor="#FF0000">cMapPopupIndex&nbsp;=&nbsp;find(strcmp(currentMap,cMapStrings));</td></tr>
<tr><td>3353</td><td bgcolor="#FF0000">set(handles.popupmenu_chooseColormap,'Value',cMapPopupIndex);</td></tr>
<tr><td>3354</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3355</td><td bgcolor="#FF0000">guidata(gcf,handles);</td></tr>
<tr><td>3356</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3357</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupmenu_chooseColorData.</td></tr>
<tr><td>3358</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_chooseColorData_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3359</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_chooseColorData&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3360</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3361</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3362</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3363</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;contents&nbsp;=&nbsp;cellstr(get(hObject,'String'))&nbsp;returns&nbsp;popupmenu_chooseColorData&nbsp;contents&nbsp;as&nbsp;cell&nbsp;array</td></tr>
<tr><td>3364</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents{get(hObject,'Value')}&nbsp;returns&nbsp;selected&nbsp;item&nbsp;from&nbsp;popupmenu_chooseColorData</td></tr>
<tr><td>3365</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3366</td><td bgcolor="#FFFFFF">%index&nbsp;=&nbsp;get(hObject,'Value')&nbsp;-&nbsp;1;</td></tr>
<tr><td>3367</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3368</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3369</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3370</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3371</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3372</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3373</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3374</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3375</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_chooseColorData_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3376</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_chooseColorData&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3377</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3378</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3379</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3380</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;popupmenu&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3381</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3382</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3383</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3384</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3385</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3386</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3387</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>3388</td><td bgcolor="#FFFFFF">function&nbsp;slider_windowCenter_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3389</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;slider_windowCenter&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3390</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3391</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3392</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3393</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>3394</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get(hObject,'Min')&nbsp;and&nbsp;get(hObject,'Max')&nbsp;to&nbsp;determine&nbsp;range&nbsp;of&nbsp;slider</td></tr>
<tr><td>3395</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3396</td><td bgcolor="#FF0000">newCenter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3397</td><td bgcolor="#FF0000">range&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.slider_windowWidth,'Value');</td></tr>
<tr><td>3398</td><td bgcolor="#FF0000">selectionIndex&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3399</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3400</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndex,1}&nbsp;&nbsp;=&nbsp;[newCenter-range/2&nbsp;newCenter+range/2];</td></tr>
<tr><td>3401</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3402</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3403</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3404</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3405</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3406</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3407</td><td bgcolor="#FFFFFF">function&nbsp;slider_windowCenter_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3408</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;slider_windowCenter&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3409</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3410</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3411</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3412</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;slider&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;light&nbsp;gray&nbsp;background.</td></tr>
<tr><td>3413</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3414</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3415</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3416</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3417</td><td bgcolor="#FF0000">set(hObject,'Value',0.5);</td></tr>
<tr><td>3418</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3419</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>3420</td><td bgcolor="#FFFFFF">function&nbsp;slider_windowWidth_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3421</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;slider_windowWidth&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3422</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3423</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3424</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3425</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>3426</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get(hObject,'Min')&nbsp;and&nbsp;get(hObject,'Max')&nbsp;to&nbsp;determine&nbsp;range&nbsp;of&nbsp;slider</td></tr>
<tr><td>3427</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3428</td><td bgcolor="#FF0000">newWidth&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3429</td><td bgcolor="#FF0000">center&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.slider_windowCenter,'Value');</td></tr>
<tr><td>3430</td><td bgcolor="#FF0000">selectionIndex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3431</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndex,1}&nbsp;&nbsp;=&nbsp;[center-newWidth/2&nbsp;center+newWidth/2];</td></tr>
<tr><td>3432</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3433</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3434</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3435</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3436</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3437</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3438</td><td bgcolor="#FFFFFF">function&nbsp;slider_windowWidth_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3439</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;slider_windowWidth&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3440</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3441</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3442</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3443</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;slider&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;light&nbsp;gray&nbsp;background.</td></tr>
<tr><td>3444</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3445</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3446</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3447</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3448</td><td bgcolor="#FF0000">set(hObject,'Value',1.0);</td></tr>
<tr><td>3449</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3450</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3451</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupmenu_chooseColormap.</td></tr>
<tr><td>3452</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_chooseColormap_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3453</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_chooseColormap&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3454</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3455</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3456</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3457</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;contents&nbsp;=&nbsp;cellstr(get(hObject,'String'))&nbsp;returns&nbsp;popupmenu_chooseColormap&nbsp;contents&nbsp;as&nbsp;cell&nbsp;array</td></tr>
<tr><td>3458</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents{get(hObject,'Value')}&nbsp;returns&nbsp;selected&nbsp;item&nbsp;from&nbsp;popupmenu_chooseColormap</td></tr>
<tr><td>3459</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3460</td><td bgcolor="#FF0000">index&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3461</td><td bgcolor="#FF0000">strings&nbsp;=&nbsp;get(hObject,'String');</td></tr>
<tr><td>3462</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3463</td><td bgcolor="#FF0000">selectionIndex&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3464</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3465</td><td bgcolor="#FF0000">switch&nbsp;selectionIndex&nbsp;</td></tr>
<tr><td>3466</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2</td></tr>
<tr><td>3467</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.ctColorMap&nbsp;=&nbsp;strings{index};</td></tr>
<tr><td>3468</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3</td></tr>
<tr><td>3469</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.doseColorMap&nbsp;=&nbsp;strings{index};</td></tr>
<tr><td>3470</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;otherwise</td></tr>
<tr><td>3471</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3472</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3473</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3474</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3475</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3476</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3477</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3478</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3479</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_chooseColormap_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3480</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_chooseColormap&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3481</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3482</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3483</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3484</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;popupmenu&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3485</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3486</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3487</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3488</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3489</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3490</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3491</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowRange_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3492</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowRange&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3493</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3494</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3495</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3496</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowRange&nbsp;as&nbsp;text</td></tr>
<tr><td>3497</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowRange&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>3498</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3499</td><td bgcolor="#FF0000">selectionIndex&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3500</td><td bgcolor="#FF0000">vRange&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;str2num(get(hObject,'String'));</td></tr>
<tr><td>3501</td><td bgcolor="#FFFFFF">%&nbsp;matlab&nbsp;adds&nbsp;a&nbsp;zero&nbsp;in&nbsp;the&nbsp;beginning&nbsp;when&nbsp;text&nbsp;field&nbsp;is&nbsp;changed</td></tr>
<tr><td>3502</td><td bgcolor="#FF0000">if&nbsp;numel(vRange)&nbsp;==&nbsp;3</td></tr>
<tr><td>3503</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;vRange&nbsp;=&nbsp;vRange(vRange~=0);</td></tr>
<tr><td>3504</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3505</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3506</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndex,1}&nbsp;=&nbsp;sort(vRange);</td></tr>
<tr><td>3507</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3508</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3509</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3510</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;compute&nbsp;new&nbsp;iso&nbsp;dose&nbsp;lines</td></tr>
<tr><td>3511</td><td bgcolor="#FF0000">if&nbsp;selectionIndex&nbsp;&gt;&nbsp;2&nbsp;</td></tr>
<tr><td>3512</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;guidata(hObject,handles);</td></tr>
<tr><td>3513</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles&nbsp;=&nbsp;updateIsoDoseLineCache(handles);</td></tr>
<tr><td>3514</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3515</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3516</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3517</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3518</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3519</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3520</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowRange_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3521</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowRange&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3522</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3523</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3524</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3525</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;edit&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3526</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3527</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3528</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3529</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3530</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3531</td><td bgcolor="#FF0000">set(hObject,'String','0&nbsp;1');</td></tr>
<tr><td>3532</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3533</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3534</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowCenter_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3535</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowCenter&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3536</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3537</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3538</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3539</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowCenter&nbsp;as&nbsp;text</td></tr>
<tr><td>3540</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowCenter&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>3541</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3542</td><td bgcolor="#FF0000">newCenter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;str2double(get(hObject,'String'));</td></tr>
<tr><td>3543</td><td bgcolor="#FF0000">width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.slider_windowWidth,'Value');</td></tr>
<tr><td>3544</td><td bgcolor="#FF0000">selectionIndex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3545</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndex,1}&nbsp;&nbsp;=&nbsp;[newCenter-width/2&nbsp;newCenter+width/2];</td></tr>
<tr><td>3546</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3547</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3548</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3549</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3550</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3551</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowCenter_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3552</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowCenter&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3553</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3554</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3555</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3556</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;edit&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3557</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3558</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3559</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3560</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3561</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3562</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3563</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3564</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowWidth_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3565</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowWidth&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3566</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3567</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3568</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3569</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'String')&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowWidth&nbsp;as&nbsp;text</td></tr>
<tr><td>3570</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str2double(get(hObject,'String'))&nbsp;returns&nbsp;contents&nbsp;of&nbsp;edit_windowWidth&nbsp;as&nbsp;a&nbsp;double</td></tr>
<tr><td>3571</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3572</td><td bgcolor="#FF0000">newWidth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;str2double(get(hObject,'String'));</td></tr>
<tr><td>3573</td><td bgcolor="#FF0000">center&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.slider_windowCenter,'Value');</td></tr>
<tr><td>3574</td><td bgcolor="#FF0000">selectionIndex&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'Value');</td></tr>
<tr><td>3575</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndex,1}&nbsp;&nbsp;=&nbsp;[center-newWidth/2&nbsp;center+newWidth/2];</td></tr>
<tr><td>3576</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3577</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3578</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3579</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3580</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3581</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3582</td><td bgcolor="#FFFFFF">function&nbsp;edit_windowWidth_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3583</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;edit_windowWidth&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3584</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3585</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3586</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3587</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;edit&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3588</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3589</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3590</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3591</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3592</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3593</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3594</td><td bgcolor="#FFFFFF">%&nbsp;--------------------------------------------------------------------</td></tr>
<tr><td>3595</td><td bgcolor="#FFFFFF">function&nbsp;uitoggletool8_ClickedCallback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3596</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;uitoggletool8&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3597</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3598</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3599</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3600</td><td bgcolor="#FFFFFF">%Check&nbsp;if&nbsp;on&nbsp;or&nbsp;off</td></tr>
<tr><td>3601</td><td bgcolor="#FF0000">val&nbsp;=&nbsp;strcmp(get(hObject,'State'),'on');</td></tr>
<tr><td>3602</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3603</td><td bgcolor="#FFFFFF">%Now&nbsp;we&nbsp;have&nbsp;to&nbsp;apply&nbsp;the&nbsp;new&nbsp;selection&nbsp;to&nbsp;our&nbsp;colormap&nbsp;options&nbsp;panel</td></tr>
<tr><td>3604</td><td bgcolor="#FF0000">if&nbsp;~val</td></tr>
<tr><td>3605</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;newSelection&nbsp;=&nbsp;1;</td></tr>
<tr><td>3606</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3607</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%Chooses&nbsp;the&nbsp;selection&nbsp;from&nbsp;the&nbsp;highest&nbsp;state</td></tr>
<tr><td>3608</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;selections&nbsp;=&nbsp;get(handles.popupmenu_chooseColorData,'String');</td></tr>
<tr><td>3609</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;newSelection&nbsp;=&nbsp;numel(selections);</td></tr>
<tr><td>3610</td><td bgcolor="#FFFFFF">end&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3611</td><td bgcolor="#FF0000">set(handles.popupmenu_chooseColorData,'Value',newSelection);</td></tr>
<tr><td>3612</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3613</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3614</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3615</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3616</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3617</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>3618</td><td bgcolor="#FFFFFF">function&nbsp;sliderOpacity_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3619</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;sliderOpacity&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3620</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3621</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3622</td><td bgcolor="#FF0000">handles.doseOpacity&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3623</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3624</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3625</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3626</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3627</td><td bgcolor="#FFFFFF">function&nbsp;sliderOpacity_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3628</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;sliderOpacity&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3629</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3630</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3631</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3632</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;slider&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;light&nbsp;gray&nbsp;background.</td></tr>
<tr><td>3633</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3634</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>3635</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3636</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3637</td><td bgcolor="#FFFFFF">%%&nbsp;Data&nbsp;Cursors</td></tr>
<tr><td>3638</td><td bgcolor="#FFFFFF">function&nbsp;cursorText&nbsp;=&nbsp;dataCursorUpdateFunction(obj,event_obj)</td></tr>
<tr><td>3639</td><td bgcolor="#FFFFFF">%&nbsp;Display&nbsp;the&nbsp;position&nbsp;of&nbsp;the&nbsp;data&nbsp;cursor</td></tr>
<tr><td>3640</td><td bgcolor="#FFFFFF">%&nbsp;obj&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Currently&nbsp;not&nbsp;used&nbsp;(empty)</td></tr>
<tr><td>3641</td><td bgcolor="#FFFFFF">%&nbsp;event_obj&nbsp;&nbsp;&nbsp;&nbsp;Handle&nbsp;to&nbsp;event&nbsp;object</td></tr>
<tr><td>3642</td><td bgcolor="#FFFFFF">%&nbsp;output_txt&nbsp;&nbsp;&nbsp;Data&nbsp;cursor&nbsp;text&nbsp;string&nbsp;(string&nbsp;or&nbsp;cell&nbsp;array&nbsp;of&nbsp;strings).</td></tr>
<tr><td>3643</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3644</td><td bgcolor="#FF0000">target&nbsp;=&nbsp;findall(0,'Name','matRadGUI');</td></tr>
<tr><td>3645</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3646</td><td bgcolor="#FFFFFF">%&nbsp;Get&nbsp;GUI&nbsp;data&nbsp;(maybe&nbsp;there&nbsp;is&nbsp;another&nbsp;way?)</td></tr>
<tr><td>3647</td><td bgcolor="#FF0000">handles&nbsp;=&nbsp;guidata(target);</td></tr>
<tr><td>3648</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3649</td><td bgcolor="#FFFFFF">%&nbsp;position&nbsp;of&nbsp;the&nbsp;data&nbsp;point&nbsp;to&nbsp;label</td></tr>
<tr><td>3650</td><td bgcolor="#FF0000">pos&nbsp;=&nbsp;get(event_obj,'Position');</td></tr>
<tr><td>3651</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3652</td><td bgcolor="#FFFFFF">%Different&nbsp;behavior&nbsp;for&nbsp;image&nbsp;and&nbsp;profile&nbsp;plot</td></tr>
<tr><td>3653</td><td bgcolor="#FF0000">if&nbsp;get(handles.popupTypeOfPlot,'Value')==1&nbsp;%Image&nbsp;view</td></tr>
<tr><td>3654</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cursorText&nbsp;=&nbsp;cell(0,1);</td></tr>
<tr><td>3655</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3656</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;&gt;=&nbsp;1</td></tr>
<tr><td>3657</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plane&nbsp;=&nbsp;get(handles.popupPlane,'Value');</td></tr>
<tr><td>3658</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slice&nbsp;=&nbsp;round(get(handles.sliderSlice,'Value'));</td></tr>
<tr><td>3659</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3660</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Get&nbsp;the&nbsp;CT&nbsp;values</td></tr>
<tr><td>3661</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>3662</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3663</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%We&nbsp;differentiate&nbsp;between&nbsp;pos&nbsp;and&nbsp;ix,&nbsp;since&nbsp;the&nbsp;user&nbsp;may&nbsp;put</td></tr>
<tr><td>3664</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%the&nbsp;datatip&nbsp;on&nbsp;an&nbsp;isoline&nbsp;which&nbsp;returns&nbsp;a&nbsp;continous&nbsp;position</td></tr>
<tr><td>3665</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cubePos&nbsp;=&nbsp;zeros(1,3);</td></tr>
<tr><td>3666</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cubePos(plane)&nbsp;=&nbsp;slice;</td></tr>
<tr><td>3667</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cubePos(1:end&nbsp;~=&nbsp;plane)&nbsp;=&nbsp;fliplr(pos);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3668</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cubeIx&nbsp;=&nbsp;round(cubePos);</td></tr>
<tr><td>3669</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3670</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Here&nbsp;comes&nbsp;the&nbsp;index&nbsp;permutation&nbsp;stuff</td></tr>
<tr><td>3671</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Cube&nbsp;Index</td></tr>
<tr><td>3672</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorText{end+1,1}&nbsp;=&nbsp;['Cube&nbsp;Index:&nbsp;'&nbsp;mat2str(cubeIx)];</td></tr>
<tr><td>3673</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Space&nbsp;Coordinates</td></tr>
<tr><td>3674</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coords&nbsp;=&nbsp;zeros(1,3);</td></tr>
<tr><td>3675</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coords(1)&nbsp;=&nbsp;cubePos(2)*ct.resolution.y;</td></tr>
<tr><td>3676</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coords(2)&nbsp;=&nbsp;cubePos(1)*ct.resolution.x;</td></tr>
<tr><td>3677</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;coords(3)&nbsp;=&nbsp;cubePos(3)*ct.resolution.z;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3678</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorText{end+1,1}&nbsp;=&nbsp;['Space&nbsp;Coordinates:&nbsp;'&nbsp;mat2str(coords,5)&nbsp;'&nbsp;mm'];</td></tr>
<tr><td>3679</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3680</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctVal&nbsp;=&nbsp;ct.cubeHU{1}(cubeIx(1),cubeIx(2),cubeIx(3));</td></tr>
<tr><td>3681</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorText{end+1,1}&nbsp;=&nbsp;['HU&nbsp;Value:&nbsp;'&nbsp;num2str(ctVal,3)];</td></tr>
<tr><td>3682</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3683</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3684</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Add&nbsp;dose&nbsp;information&nbsp;if&nbsp;available</td></tr>
<tr><td>3685</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.State&nbsp;==&nbsp;3</td></tr>
<tr><td>3686</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%get&nbsp;result&nbsp;structure</td></tr>
<tr><td>3687</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;evalin('base','resultGUI');</td></tr>
<tr><td>3688</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3689</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Get&nbsp;all&nbsp;result&nbsp;names&nbsp;from&nbsp;popup</td></tr>
<tr><td>3690</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resultNames&nbsp;=&nbsp;get(handles.popupDisplayOption,'String');</td></tr>
<tr><td>3691</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3692</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Display&nbsp;all&nbsp;values&nbsp;of&nbsp;fields&nbsp;found&nbsp;in&nbsp;the&nbsp;resultGUI&nbsp;struct</td></tr>
<tr><td>3693</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;runResult&nbsp;=&nbsp;1:numel(resultNames)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3694</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name&nbsp;=&nbsp;resultNames{runResult};</td></tr>
<tr><td>3695</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isfield(result,name)</td></tr>
<tr><td>3696</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;field&nbsp;=&nbsp;result.(name);</td></tr>
<tr><td>3697</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;val&nbsp;=&nbsp;field(cubeIx(1),cubeIx(2),cubeIx(3));</td></tr>
<tr><td>3698</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorText{end+1,1}&nbsp;=&nbsp;[name&nbsp;':&nbsp;'&nbsp;num2str(val,3)];</td></tr>
<tr><td>3699</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3700</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3701</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3702</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>3703</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cursorText{end+1,1}&nbsp;=&nbsp;'Error&nbsp;while&nbsp;retreiving&nbsp;Data!';</td></tr>
<tr><td>3704</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3705</td><td bgcolor="#FFFFFF">else&nbsp;%Profile&nbsp;view</td></tr>
<tr><td>3706</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cursorText&nbsp;=&nbsp;cell(2,1);</td></tr>
<tr><td>3707</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cursorText{1}&nbsp;=&nbsp;['Radiological&nbsp;Depth:&nbsp;'&nbsp;num2str(pos(1),3)&nbsp;'&nbsp;mm'];</td></tr>
<tr><td>3708</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cursorText{2}&nbsp;=&nbsp;[get(target,'DisplayName')&nbsp;':&nbsp;'&nbsp;num2str(pos(2),3)];</td></tr>
<tr><td>3709</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3710</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3711</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3712</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3713</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popMenuBioOpt.</td></tr>
<tr><td>3714</td><td bgcolor="#FFFFFF">function&nbsp;popMenuBioOpt_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>3715</td><td bgcolor="#FF0000">pln&nbsp;=&nbsp;evalin('base','pln');</td></tr>
<tr><td>3716</td><td bgcolor="#FF0000">contentBioOpt&nbsp;=&nbsp;get(handles.popMenuBioOpt,'String');</td></tr>
<tr><td>3717</td><td bgcolor="#FF0000">NewBioOptimization&nbsp;=&nbsp;contentBioOpt(get(handles.popMenuBioOpt,'Value'),:);</td></tr>
<tr><td>3718</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3719</td><td bgcolor="#FF0000">if&nbsp;handles.State&nbsp;&gt;&nbsp;0</td></tr>
<tr><td>3720</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(strcmp(pln.propOpt.bioOptimization,'LEMIV_effect')&nbsp;&amp;&amp;&nbsp;strcmp(NewBioOptimization,'LEMIV_RBExD'))&nbsp;||...</td></tr>
<tr><td>3721</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(strcmp(pln.propOpt.bioOptimization,'LEMIV_RBExD')&nbsp;&amp;&amp;&nbsp;strcmp(NewBioOptimization,'LEMIV_effect'))&nbsp;</td></tr>
<tr><td>3722</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;do&nbsp;nothing&nbsp;-&nbsp;re-optimization&nbsp;is&nbsp;still&nbsp;possible</td></tr>
<tr><td>3723</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;((strcmp(pln.propOpt.bioOptimization,'const_RBE')&nbsp;&amp;&amp;&nbsp;strcmp(NewBioOptimization,'none'))&nbsp;||...</td></tr>
<tr><td>3724</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(strcmp(pln.propOpt.bioOptimization,'none')&nbsp;&amp;&amp;&nbsp;strcmp(NewBioOptimization,'const_RBE')))&nbsp;&amp;&amp;&nbsp;isequal(pln.radiationMode,'protons')</td></tr>
<tr><td>3725</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;do&nbsp;nothing&nbsp;-&nbsp;re-optimization&nbsp;is&nbsp;still&nbsp;possible</td></tr>
<tr><td>3726</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3727</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handles.State&nbsp;=&nbsp;1;</td></tr>
<tr><td>3728</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3729</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3730</td><td bgcolor="#FF0000">getPlnFromGUI(handles);</td></tr>
<tr><td>3731</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3732</td><td bgcolor="#FF0000">UpdateState(handles);</td></tr>
<tr><td>3733</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3734</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3735</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3736</td><td bgcolor="#FFFFFF">function&nbsp;popMenuBioOpt_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3737</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3738</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3739</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3740</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3741</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;btn3Dview.</td></tr>
<tr><td>3742</td><td bgcolor="#FFFFFF">function&nbsp;btn3Dview_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3743</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btn3Dview&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3744</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3745</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3746</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3747</td><td bgcolor="#FF0000">if&nbsp;~isfield(handles,'axesFig3D')&nbsp;||&nbsp;~isfield(handles,'axesFig3D')&nbsp;||&nbsp;~isgraphics(handles.axesFig3D)</td></tr>
<tr><td>3748</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.fig3D&nbsp;=&nbsp;figure('Name','matRad&nbsp;3D&nbsp;View');</td></tr>
<tr><td>3749</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.axesFig3D&nbsp;=&nbsp;axes('Parent',handles.fig3D);</td></tr>
<tr><td>3750</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;view(handles.axesFig3D,3);</td></tr>
<tr><td>3751</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;try</td></tr>
<tr><td>3752</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ct&nbsp;=&nbsp;evalin('base','ct');</td></tr>
<tr><td>3753</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3754</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xlim(handles.axesFig3D,[0&nbsp;ct.resolution.x*ct.cubeDim(2)]);</td></tr>
<tr><td>3755</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ylim(handles.axesFig3D,[0&nbsp;ct.resolution.y*ct.cubeDim(1)]);</td></tr>
<tr><td>3756</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;zlim(handles.axesFig3D,[0&nbsp;ct.resolution.z*ct.cubeDim(3)]);</td></tr>
<tr><td>3757</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;catch</td></tr>
<tr><td>3758</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3759</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3760</td><td bgcolor="#FFFFFF">%end</td></tr>
<tr><td>3761</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3762</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3763</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3764</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3765</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3766</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobtnCT.</td></tr>
<tr><td>3767</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnCT_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3768</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobtnCT&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3769</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3770</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3771</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3772</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobtnCT</td></tr>
<tr><td>3773</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>3774</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3775</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobtnPlan.</td></tr>
<tr><td>3776</td><td bgcolor="#FFFFFF">function&nbsp;radiobtnPlan_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3777</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobtnPlan&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3778</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3779</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3780</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3781</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobtnPlan</td></tr>
<tr><td>3782</td><td bgcolor="#FF0000">UpdatePlot(handles)</td></tr>
<tr><td>3783</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3784</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3785</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;selection&nbsp;change&nbsp;in&nbsp;popupmenu_windowPreset.</td></tr>
<tr><td>3786</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_windowPreset_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3787</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_windowPreset&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3788</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3789</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3790</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3791</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;contents&nbsp;=&nbsp;cellstr(get(hObject,'String'))&nbsp;returns&nbsp;popupmenu_windowPreset&nbsp;contents&nbsp;as&nbsp;cell&nbsp;array</td></tr>
<tr><td>3792</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;contents{get(hObject,'Value')}&nbsp;returns&nbsp;selected&nbsp;item&nbsp;from&nbsp;popupmenu_windowPreset</td></tr>
<tr><td>3793</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3794</td><td bgcolor="#FF0000">selectionIndexCube&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;2;&nbsp;%&nbsp;working&nbsp;on&nbsp;ct&nbsp;only</td></tr>
<tr><td>3795</td><td bgcolor="#FF0000">selectionIndexWindow&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;get(handles.popupmenu_windowPreset,'Value');</td></tr>
<tr><td>3796</td><td bgcolor="#FF0000">newCenter&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;handles.windowPresets(selectionIndexWindow).center;</td></tr>
<tr><td>3797</td><td bgcolor="#FF0000">newWidth&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;handles.windowPresets(selectionIndexWindow).width;</td></tr>
<tr><td>3798</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3799</td><td bgcolor="#FF0000">handles.dispWindow{selectionIndexCube,1}&nbsp;&nbsp;=&nbsp;[newCenter&nbsp;-&nbsp;newWidth/2&nbsp;newCenter&nbsp;+&nbsp;newWidth/2];</td></tr>
<tr><td>3800</td><td bgcolor="#FF0000">handles.cBarChanged&nbsp;=&nbsp;true;</td></tr>
<tr><td>3801</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3802</td><td bgcolor="#FF0000">UpdatePlot(handles);</td></tr>
<tr><td>3803</td><td bgcolor="#FF0000">UpdateColormapOptions(handles);</td></tr>
<tr><td>3804</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3805</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3806</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>3807</td><td bgcolor="#FFFFFF">function&nbsp;popupmenu_windowPreset_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3808</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;popupmenu_windowPreset&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3809</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3810</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>3811</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3812</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;popupmenu&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;white&nbsp;background&nbsp;on&nbsp;Windows.</td></tr>
<tr><td>3813</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;See&nbsp;ISPC&nbsp;and&nbsp;COMPUTER.</td></tr>
<tr><td>3814</td><td bgcolor="#FF0000">if&nbsp;ispc&nbsp;&amp;&amp;&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>3815</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor','white');</td></tr>
<tr><td>3816</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3817</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3818</td><td bgcolor="#FFFFFF">%&nbsp;setup&nbsp;ct&nbsp;window&nbsp;list</td></tr>
<tr><td>3819</td><td bgcolor="#FFFFFF">%&nbsp;data&nbsp;and&nbsp;values&nbsp;from&nbsp;CERR&nbsp;https://github.com/adityaapte/CERR</td></tr>
<tr><td>3820</td><td bgcolor="#FF0000">windowNames&nbsp;=&nbsp;{'Custom','Full','Abd/Med',&nbsp;'Head',&nbsp;'Liver',&nbsp;'Lung',&nbsp;'Spine',&nbsp;'Vrt/Bone'};</td></tr>
<tr><td>3821</td><td bgcolor="#FF0000">windowCenter&nbsp;=&nbsp;{NaN,&nbsp;NaN,&nbsp;-10,&nbsp;45,&nbsp;80,&nbsp;-500,&nbsp;30,&nbsp;400};</td></tr>
<tr><td>3822</td><td bgcolor="#FF0000">windowWidth&nbsp;=&nbsp;{NaN,&nbsp;NaN,&nbsp;330,&nbsp;125,&nbsp;305,&nbsp;1500,&nbsp;300,&nbsp;1500};</td></tr>
<tr><td>3823</td><td bgcolor="#FF0000">windowPresets&nbsp;=&nbsp;cell2struct([windowNames',&nbsp;windowCenter',&nbsp;windowWidth'],&nbsp;{'name',&nbsp;'center',&nbsp;'width'},2);</td></tr>
<tr><td>3824</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3825</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3826</td><td bgcolor="#FF0000">handles.windowPresets&nbsp;=&nbsp;windowPresets;</td></tr>
<tr><td>3827</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3828</td><td bgcolor="#FF0000">selectionList&nbsp;=&nbsp;{windowPresets(:).name};</td></tr>
<tr><td>3829</td><td bgcolor="#FF0000">set(hObject,'String',selectionList(:));</td></tr>
<tr><td>3830</td><td bgcolor="#FF0000">set(hObject,'Value',1);</td></tr>
<tr><td>3831</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3832</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3833</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3834</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3835</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;checkbox_lockColormap.</td></tr>
<tr><td>3836</td><td bgcolor="#FFFFFF">function&nbsp;checkbox_lockColormap_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>3837</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;checkbox_lockColormap&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>3838</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>3839</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>3840</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3841</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;checkbox_lockColormap</td></tr>
<tr><td>3842</td><td bgcolor="#FF0000">handles.colormapLocked&nbsp;=&nbsp;get(hObject,'Value');</td></tr>
<tr><td>3843</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3844</td><td bgcolor="#FF0000">if&nbsp;handles.colormapLocked</td></tr>
<tr><td>3845</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;=&nbsp;'Off';&nbsp;%'Inactive';</td></tr>
<tr><td>3846</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3847</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;state&nbsp;=&nbsp;'On';</td></tr>
<tr><td>3848</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3849</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3850</td><td bgcolor="#FF0000">set(handles.popupmenu_chooseColorData,'Enable',state);</td></tr>
<tr><td>3851</td><td bgcolor="#FF0000">set(handles.popupmenu_windowPreset,'Enable',state);</td></tr>
<tr><td>3852</td><td bgcolor="#FF0000">set(handles.slider_windowWidth,'Enable',state);</td></tr>
<tr><td>3853</td><td bgcolor="#FF0000">set(handles.slider_windowCenter,'Enable',state);</td></tr>
<tr><td>3854</td><td bgcolor="#FF0000">set(handles.edit_windowWidth,'Enable',state);</td></tr>
<tr><td>3855</td><td bgcolor="#FF0000">set(handles.edit_windowCenter,'Enable',state);</td></tr>
<tr><td>3856</td><td bgcolor="#FF0000">set(handles.edit_windowRange,'Enable',state);</td></tr>
<tr><td>3857</td><td bgcolor="#FF0000">set(handles.popupmenu_chooseColormap,'Enable',state);</td></tr>
<tr><td>3858</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3859</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3860</td><td bgcolor="#FF0000">guidata(hObject,handles);</td></tr>
<tr><td>3861</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3862</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3863</td><td bgcolor="#FFFFFF">function&nbsp;cst&nbsp;=&nbsp;updateStructureTable(handles,cst)</td></tr>
<tr><td>3864</td><td bgcolor="#FF0000">colorAssigned&nbsp;=&nbsp;true;</td></tr>
<tr><td>3865</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3866</td><td bgcolor="#FFFFFF">%&nbsp;check&nbsp;whether&nbsp;all&nbsp;structures&nbsp;have&nbsp;an&nbsp;assigned&nbsp;color</td></tr>
<tr><td>3867</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>3868</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isfield(cst{i,5},'visibleColor')</td></tr>
<tr><td>3869</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorAssigned&nbsp;=&nbsp;false;</td></tr>
<tr><td>3870</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td></tr>
<tr><td>3871</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;elseif&nbsp;isempty(cst{i,5}.visibleColor)</td></tr>
<tr><td>3872</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;colorAssigned&nbsp;=&nbsp;false;</td></tr>
<tr><td>3873</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;</td></tr>
<tr><td>3874</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3875</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3876</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3877</td><td bgcolor="#FFFFFF">%&nbsp;assign&nbsp;color&nbsp;if&nbsp;color&nbsp;assignment&nbsp;is&nbsp;not&nbsp;already&nbsp;present&nbsp;or&nbsp;inconsistent</td></tr>
<tr><td>3878</td><td bgcolor="#FF0000">if&nbsp;colorAssigned&nbsp;==&nbsp;false</td></tr>
<tr><td>3879</td><td bgcolor="#FF0000">&nbsp;&nbsp;m&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;64;</td></tr>
<tr><td>3880</td><td bgcolor="#FF0000">&nbsp;&nbsp;colorStep&nbsp;=&nbsp;ceil(m/size(cst,1));</td></tr>
<tr><td>3881</td><td bgcolor="#FF0000">&nbsp;&nbsp;colors&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;colorcube(colorStep*size(cst,1));</td></tr>
<tr><td>3882</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;%&nbsp;spread&nbsp;individual&nbsp;VOI&nbsp;colors&nbsp;in&nbsp;the&nbsp;colorcube&nbsp;color&nbsp;palette</td></tr>
<tr><td>3883</td><td bgcolor="#FF0000">&nbsp;&nbsp;colors&nbsp;&nbsp;&nbsp;&nbsp;=&nbsp;colors(1:colorStep:end,:);</td></tr>
<tr><td>3884</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;</td></tr>
<tr><td>3885</td><td bgcolor="#FF0000">&nbsp;&nbsp;for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>3886</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{i,5}.visibleColor&nbsp;=&nbsp;colors(i,:);</td></tr>
<tr><td>3887</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;end</td></tr>
<tr><td>3888</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3889</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3890</td><td bgcolor="#FF0000">for&nbsp;s&nbsp;=&nbsp;1:size(cst,1)</td></tr>
<tr><td>3891</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;handles.VOIPlotFlag(s)&nbsp;=&nbsp;cst{s,5}.Visible;</td></tr>
<tr><td>3892</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;clr&nbsp;=&nbsp;dec2hex(round(cst{s,5}.visibleColor(:)*255),2)';</td></tr>
<tr><td>3893</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;clr&nbsp;=&nbsp;['#';clr(:)]';</td></tr>
<tr><td>3894</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;handles.VOIPlotFlag(s)</td></tr>
<tr><td>3895</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpString{s}&nbsp;=&nbsp;['&lt;html&gt;&lt;table&nbsp;border=0&nbsp;&gt;&lt;TR&gt;&lt;TD&nbsp;bgcolor=',clr,'&nbsp;width="18"&gt;&lt;center&gt;&amp;#10004;&lt;/center&gt;&lt;/TD&gt;&lt;TD&gt;',cst{s,2},'&lt;/TD&gt;&lt;/TR&gt;&nbsp;&lt;/table&gt;&lt;/html&gt;'];</td></tr>
<tr><td>3896</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>3897</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmpString{s}&nbsp;=&nbsp;['&lt;html&gt;&lt;table&nbsp;border=0&nbsp;&gt;&lt;TR&gt;&lt;TD&nbsp;bgcolor=',clr,'&nbsp;width="18"&gt;&lt;/TD&gt;&lt;TD&gt;',cst{s,2},'&lt;/TD&gt;&lt;/TR&gt;&nbsp;&lt;/table&gt;&lt;/html&gt;'];</td></tr>
<tr><td>3898</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>3899</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3900</td><td bgcolor="#FF0000">set(handles.legendTable,'String',tmpString);</td></tr>
<tr><td>3901</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3902</td><td bgcolor="#FFFFFF">%--&nbsp;generates&nbsp;the&nbsp;CST&nbsp;table</td></tr>
<tr><td>3903</td><td bgcolor="#FFFFFF">function&nbsp;cst&nbsp;=&nbsp;generateCstTable(handles,cst)</td></tr>
<tr><td>3904</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3905</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;updateStructureTable(handles,cst);</td></tr>
<tr><td>3906</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3907</td><td bgcolor="#FF0000">cstPanel&nbsp;=&nbsp;handles.uipanel3;</td></tr>
<tr><td>3908</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3909</td><td bgcolor="#FFFFFF">%Get&nbsp;units&nbsp;in&nbsp;pixels&nbsp;to&nbsp;to&nbsp;calculate&nbsp;aspect&nbsp;ratio</td></tr>
<tr><td>3910</td><td bgcolor="#FF0000">cstPanelPosUnit&nbsp;=&nbsp;get(cstPanel,'Units');</td></tr>
<tr><td>3911</td><td bgcolor="#FF0000">set(cstPanel,'Units','pixels');</td></tr>
<tr><td>3912</td><td bgcolor="#FF0000">cstPanelPosPix&nbsp;=&nbsp;get(cstPanel,'Position');</td></tr>
<tr><td>3913</td><td bgcolor="#FF0000">set(cstPanel,'Units',cstPanelPosUnit);</td></tr>
<tr><td>3914</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3915</td><td bgcolor="#FF0000">aspectRatio&nbsp;=&nbsp;cstPanelPosPix(3)&nbsp;/&nbsp;cstPanelPosPix(4);</td></tr>
<tr><td>3916</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3917</td><td bgcolor="#FFFFFF">%Parameters&nbsp;for&nbsp;line&nbsp;height</td></tr>
<tr><td>3918</td><td bgcolor="#FF0000">objHeight&nbsp;=&nbsp;0.095;%&nbsp;22;</td></tr>
<tr><td>3919</td><td bgcolor="#FF0000">lineHeight&nbsp;=&nbsp;0.1;&nbsp;%25;&nbsp;%Height&nbsp;of&nbsp;a&nbsp;table&nbsp;line</td></tr>
<tr><td>3920</td><td bgcolor="#FF0000">yTopSep&nbsp;=&nbsp;0.12;%40;&nbsp;%Separation&nbsp;of&nbsp;the&nbsp;first&nbsp;line&nbsp;from&nbsp;the&nbsp;top</td></tr>
<tr><td>3921</td><td bgcolor="#FF0000">tableViewHeight&nbsp;=&nbsp;1&nbsp;-&nbsp;yTopSep;&nbsp;</td></tr>
<tr><td>3922</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3923</td><td bgcolor="#FFFFFF">%Define&nbsp;the&nbsp;widths&nbsp;of&nbsp;the&nbsp;fields&nbsp;relatively</td></tr>
<tr><td>3924</td><td bgcolor="#FF0000">buttonW&nbsp;=&nbsp;objHeight&nbsp;/&nbsp;aspectRatio;&nbsp;%&nbsp;Make&nbsp;button&nbsp;squared</td></tr>
<tr><td>3925</td><td bgcolor="#FF0000">nameW&nbsp;=&nbsp;3.5*buttonW;</td></tr>
<tr><td>3926</td><td bgcolor="#FF0000">typeW&nbsp;=&nbsp;3*buttonW;</td></tr>
<tr><td>3927</td><td bgcolor="#FF0000">opW&nbsp;=&nbsp;buttonW;</td></tr>
<tr><td>3928</td><td bgcolor="#FFFFFF">functionW&nbsp;=&nbsp;6*buttonW;</td></tr>
<tr><td>3929</td><td bgcolor="#FF0000">penaltyW&nbsp;=&nbsp;2*buttonW;</td></tr>
<tr><td>3930</td><td bgcolor="#FF0000">paramTitleW&nbsp;=&nbsp;4*buttonW;</td></tr>
<tr><td>3931</td><td bgcolor="#FF0000">paramW&nbsp;=&nbsp;2*buttonW;</td></tr>
<tr><td>3932</td><td bgcolor="#FF0000">fieldSep&nbsp;=&nbsp;0.25*buttonW;&nbsp;%Separation&nbsp;between&nbsp;fields&nbsp;horizontally</td></tr>
<tr><td>3933</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3934</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3935</td><td bgcolor="#FFFFFF">%Scrollbar</td></tr>
<tr><td>3936</td><td bgcolor="#FFFFFF">%Check&nbsp;if&nbsp;a&nbsp;scrollbar&nbsp;already&nbsp;exists&nbsp;to&nbsp;get&nbsp;possible&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>3937</td><td bgcolor="#FF0000">cstPanelChildren&nbsp;=&nbsp;get(cstPanel,'Children');</td></tr>
<tr><td>3938</td><td bgcolor="#FF0000">cstVertTableScroll&nbsp;=&nbsp;findobj(cstPanelChildren,'Style','slider');</td></tr>
<tr><td>3939</td><td bgcolor="#FF0000">if&nbsp;isempty(cstVertTableScroll)</td></tr>
<tr><td>3940</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderPos&nbsp;=&nbsp;0;</td></tr>
<tr><td>3941</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>3942</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderPos&nbsp;=&nbsp;get(cstVertTableScroll,'Max')&nbsp;-&nbsp;get(cstVertTableScroll,'Value');</td></tr>
<tr><td>3943</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3944</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3945</td><td bgcolor="#FF0000">ypos&nbsp;=&nbsp;@(c)&nbsp;tableViewHeight&nbsp;-&nbsp;c*lineHeight&nbsp;+&nbsp;sliderPos;</td></tr>
<tr><td>3946</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3947</td><td bgcolor="#FFFFFF">%Clean&nbsp;the&nbsp;whole&nbsp;panel&nbsp;for&nbsp;new&nbsp;setup</td></tr>
<tr><td>3948</td><td bgcolor="#FF0000">delete(cstPanelChildren);</td></tr>
<tr><td>3949</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3950</td><td bgcolor="#FFFFFF">%Creates&nbsp;a&nbsp;dummy&nbsp;axis&nbsp;to&nbsp;allow&nbsp;for&nbsp;the&nbsp;use&nbsp;of&nbsp;textboxes&nbsp;instead&nbsp;of&nbsp;uicontrol&nbsp;to&nbsp;be&nbsp;able&nbsp;to&nbsp;use&nbsp;the&nbsp;(la)tex&nbsp;interpreter</td></tr>
<tr><td>3951</td><td bgcolor="#FF0000">tmpAxes&nbsp;=&nbsp;axes('Parent',cstPanel,'units','normalized','position',[0&nbsp;0&nbsp;1&nbsp;1],'visible','off');</td></tr>
<tr><td>3952</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3953</td><td bgcolor="#FF0000">organTypes&nbsp;=&nbsp;{'OAR',&nbsp;'TARGET'};</td></tr>
<tr><td>3954</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3955</td><td bgcolor="#FFFFFF">%columnname&nbsp;=&nbsp;{'VOI&nbsp;name','VOI&nbsp;type','priority','obj.&nbsp;/&nbsp;const.'};%,'penalty','dose',&nbsp;'EUD','volume','robustness'};</td></tr>
<tr><td>3956</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3957</td><td bgcolor="#FFFFFF">%Get&nbsp;all&nbsp;Classes&nbsp;&amp;&nbsp;classNames&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>3958</td><td bgcolor="#FF0000">mpkgObjectives&nbsp;=&nbsp;meta.package.fromName('DoseObjectives');</td></tr>
<tr><td>3959</td><td bgcolor="#FF0000">mpkgConstraints&nbsp;=&nbsp;meta.package.fromName('DoseConstraints');</td></tr>
<tr><td>3960</td><td bgcolor="#FF0000">classList&nbsp;=&nbsp;[mpkgObjectives.ClassList;&nbsp;mpkgConstraints.ClassList];</td></tr>
<tr><td>3961</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3962</td><td bgcolor="#FF0000">classList&nbsp;=&nbsp;classList(not([classList.Abstract]));</td></tr>
<tr><td>3963</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3964</td><td bgcolor="#FFFFFF">%Now&nbsp;get&nbsp;the&nbsp;"internal"&nbsp;name&nbsp;from&nbsp;the&nbsp;properties</td></tr>
<tr><td>3965</td><td bgcolor="#FF0000">classNames&nbsp;=&nbsp;cell(2,numel(classList));</td></tr>
<tr><td>3966</td><td bgcolor="#FF0000">for&nbsp;clIx&nbsp;=&nbsp;1:numel(classList)</td></tr>
<tr><td>3967</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cl&nbsp;=&nbsp;classList(clIx);</td></tr>
<tr><td>3968</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pList&nbsp;=&nbsp;cl.PropertyList;&nbsp;%Get&nbsp;List&nbsp;of&nbsp;all&nbsp;properties</td></tr>
<tr><td>3969</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pNameIx&nbsp;=&nbsp;arrayfun(@(p)&nbsp;strcmp(p.Name,'name'),pList);&nbsp;%get&nbsp;index&nbsp;of&nbsp;the&nbsp;"name"&nbsp;property</td></tr>
<tr><td>3970</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;p&nbsp;=&nbsp;pList(pNameIx);&nbsp;%select&nbsp;name&nbsp;property</td></tr>
<tr><td>3971</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;pName&nbsp;=&nbsp;p.DefaultValue;&nbsp;%&nbsp;get&nbsp;value&nbsp;/&nbsp;name</td></tr>
<tr><td>3972</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;classNames(:,clIx)&nbsp;=&nbsp;{cl.Name;&nbsp;pName};&nbsp;%Store&nbsp;class&nbsp;name&nbsp;and&nbsp;display&nbsp;name</td></tr>
<tr><td>3973</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>3974</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3975</td><td bgcolor="#FF0000">numOfObjectives&nbsp;=&nbsp;sum(cellfun(@numel,cst(:,6)));</td></tr>
<tr><td>3976</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3977</td><td bgcolor="#FF0000">cnt&nbsp;=&nbsp;0;</td></tr>
<tr><td>3978</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3979</td><td bgcolor="#FF0000">newline&nbsp;=&nbsp;'\n';</td></tr>
<tr><td>3980</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3981</td><td bgcolor="#FFFFFF">%Setup&nbsp;Headlines</td></tr>
<tr><td>3982</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;0.01;&nbsp;%5</td></tr>
<tr><td>3983</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>3984</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','+/-','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;buttonW&nbsp;objHeight],'TooltipString','Remove&nbsp;or&nbsp;add&nbsp;Constraint&nbsp;or&nbsp;Objective');</td></tr>
<tr><td>3985</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>3986</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>3987</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','VOI&nbsp;name','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;nameW&nbsp;objHeight],'TooltipString','Name&nbsp;of&nbsp;the&nbsp;structure&nbsp;with&nbsp;objective/constraint');</td></tr>
<tr><td>3988</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>3989</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>3990</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','VOI&nbsp;type','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;typeW&nbsp;objHeight],'TooltipString','Segmentation&nbsp;Classification');</td></tr>
<tr><td>3991</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>3992</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>3993</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','OP','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;opW&nbsp;objHeight],'TooltipString',['Overlap&nbsp;Priority'&nbsp;char(10)&nbsp;'(Smaller&nbsp;number&nbsp;overlaps&nbsp;higher&nbsp;number)']);</td></tr>
<tr><td>3994</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>3995</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>3996</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','Function','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;functionW&nbsp;objHeight],'TooltipString','Objective/Constraint&nbsp;function&nbsp;type');</td></tr>
<tr><td>3997</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>3998</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>3999</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','p','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;penaltyW&nbsp;objHeight],'TooltipString','Optimization&nbsp;penalty');</td></tr>
<tr><td>4000</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4001</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4002</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','text','String','|&nbsp;Parameters','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;paramTitleW&nbsp;objHeight],'TooltipString','List&nbsp;of&nbsp;parameters','HorizontalAlignment','left');</td></tr>
<tr><td>4003</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4004</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4005</td><td bgcolor="#FF0000">cnt&nbsp;=&nbsp;cnt&nbsp;+&nbsp;1;</td></tr>
<tr><td>4006</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4007</td><td bgcolor="#FFFFFF">%Create&nbsp;Objectives&nbsp;/&nbsp;Constraints&nbsp;controls</td></tr>
<tr><td>4008</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(cst,1)&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4009</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;strcmp(cst(i,3),'IGNORED')~=1</td></tr>
<tr><td>4010</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Compatibility&nbsp;Layer&nbsp;for&nbsp;old&nbsp;objective&nbsp;format</td></tr>
<tr><td>4011</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isstruct(cst{i,6})</td></tr>
<tr><td>4012</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{i,6}&nbsp;=&nbsp;arrayfun(@matRad_DoseOptimizationFunction.convertOldOptimizationStruct,cst{i,6},'UniformOutput',false);</td></tr>
<tr><td>4013</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4014</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j=1:numel(cst{i,6})</td></tr>
<tr><td>4015</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4016</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj&nbsp;=&nbsp;cst{i,6}{j};</td></tr>
<tr><td>4017</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4018</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Convert&nbsp;to&nbsp;class&nbsp;if&nbsp;not</td></tr>
<tr><td>4019</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;~isa(obj,'matRad_DoseOptimizationFunction')</td></tr>
<tr><td>4020</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try</td></tr>
<tr><td>4021</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;obj&nbsp;=&nbsp;matRad_DoseOptimizationFunction.createInstanceFromStruct(obj);</td></tr>
<tr><td>4022</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;catch&nbsp;ME</td></tr>
<tr><td>4023</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warning('Objective/Constraint&nbsp;not&nbsp;valid!\n%s',ME.message)</td></tr>
<tr><td>4024</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;continue;</td></tr>
<tr><td>4025</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4026</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4027</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4028</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%VOI</td></tr>
<tr><td>4029</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;0.01;%5;</td></tr>
<tr><td>4030</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4031</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','pushbutton','String','-','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;buttonW&nbsp;objHeight],'TooltipString','Remove&nbsp;Objective/Constraint','Callback',{@btObjRemove_Callback,handles},...</td></tr>
<tr><td>4032</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'UserData',[i,j]);</td></tr>
<tr><td>4033</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4034</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4035</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel','Style','edit','String',cst{i,2},'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;nameW&nbsp;objHeight],'TooltipString','Name',...</td></tr>
<tr><td>4036</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'Enable','inactive',...&nbsp;%Disable&nbsp;editing&nbsp;of&nbsp;name&nbsp;atm</td></tr>
<tr><td>4037</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'UserData',[i,2],'Callback',{@editCstParams_Callback,handles});&nbsp;%Callback&nbsp;added,&nbsp;however,&nbsp;editing&nbsp;is&nbsp;disabled&nbsp;atm</td></tr>
<tr><td>4038</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4039</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4040</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','popupmenu','String',organTypes','Value',find(strcmp(cst{i,3},organTypes)),'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;typeW&nbsp;objHeight],'TooltipString','Segmentation&nbsp;Classification',...</td></tr>
<tr><td>4041</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'UserData',[i,3],'Callback',{@editCstParams_Callback,handles});</td></tr>
<tr><td>4042</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4043</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4044</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','edit','String',num2str(cst{i,5}.Priority),'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;opW&nbsp;objHeight],'TooltipString',['Overlap&nbsp;Priority'&nbsp;newline&nbsp;'(Smaller&nbsp;number&nbsp;overlaps&nbsp;higher&nbsp;number)'],...</td></tr>
<tr><td>4045</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'UserData',[i,5],'Callback',{@editCstParams_Callback,handles});</td></tr>
<tr><td>4046</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4047</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4048</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4049</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','popupmenu','String',classNames(2,:)','Value',find(strcmp(obj.name,classNames(2,:))),'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;functionW&nbsp;objHeight],'TooltipString','Select&nbsp;Objective/Constraint',...</td></tr>
<tr><td>4050</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'UserData',{[i,j],classNames(1,:)},'Callback',{@changeObjFunction_Callback,handles});</td></tr>
<tr><td>4051</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4052</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4053</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4054</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Check&nbsp;if&nbsp;we&nbsp;have&nbsp;an&nbsp;objective&nbsp;to&nbsp;display&nbsp;penalty</td></tr>
<tr><td>4055</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;isa(obj,'DoseObjectives.matRad_DoseObjective')</td></tr>
<tr><td>4056</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','edit','String',num2str(obj.penalty),'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;penaltyW&nbsp;objHeight],'TooltipString','Objective&nbsp;Penalty','UserData',[i,j,0],'Callback',{@editObjParam_Callback,handles});</td></tr>
<tr><td>4057</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>4058</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','edit','String','----','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;penaltyW&nbsp;objHeight],'Enable','off');</td></tr>
<tr><td>4059</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4060</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4061</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4062</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4063</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Iterate&nbsp;through&nbsp;parameters</td></tr>
<tr><td>4064</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;p&nbsp;=&nbsp;1:numel(obj.parameterNames)</td></tr>
<tr><td>4065</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;text('Parent',tmpAxes,'String',['|&nbsp;'&nbsp;obj.parameterNames{p}&nbsp;':'],'VerticalAlignment','middle','Units','normalized','Position',[xPos&nbsp;ypos(cnt)+lineHeight/2],'Interpreter','tex','FontWeight','normal',...</td></tr>
<tr><td>4066</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'FontSize',get(cstPanel,'FontSize'),'FontName',get(cstPanel,'FontName'),'FontUnits',get(cstPanel,'FontUnits'),'FontWeight','normal');</td></tr>
<tr><td>4067</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Extent');</td></tr>
<tr><td>4068</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4069</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4070</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%Check&nbsp;if&nbsp;we&nbsp;have&nbsp;a&nbsp;cell&nbsp;and&nbsp;therefore&nbsp;a&nbsp;parameter&nbsp;list</td></tr>
<tr><td>4071</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;iscell(obj.parameterTypes{p})&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4072</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','popupmenu','String',obj.parameterTypes{p}','Value',obj.parameters{p},'TooltipString',obj.parameterNames{p},'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;paramW*2&nbsp;objHeight],'UserData',[i,j,p],'Callback',{@editObjParam_Callback,handles});</td></tr>
<tr><td>4073</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else</td></tr>
<tr><td>4074</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','edit','String',num2str(obj.parameters{p}),'TooltipString',obj.parameterNames{p},'Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;paramW&nbsp;objHeight],'UserData',[i,j,p],'Callback',{@editObjParam_Callback,handles});</td></tr>
<tr><td>4075</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4076</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4077</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tmp_pos&nbsp;=&nbsp;get(h,'Position');</td></tr>
<tr><td>4078</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4079</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4080</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4081</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cnt&nbsp;=&nbsp;cnt&nbsp;+1;</td></tr>
<tr><td>4082</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4083</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;end&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4084</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4085</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;0.01;&nbsp;%5</td></tr>
<tr><td>4086</td><td bgcolor="#FF0000">hAdd&nbsp;=&nbsp;uicontrol(cstPanel,'Style','pushbutton','String','+','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;buttonW&nbsp;objHeight],'TooltipString','Add&nbsp;Objective/Constraint','Callback',{@btObjAdd_Callback,handles});</td></tr>
<tr><td>4087</td><td bgcolor="#FF0000">tmp_pos&nbsp;=&nbsp;get(hAdd,'Position');</td></tr>
<tr><td>4088</td><td bgcolor="#FF0000">xPos&nbsp;=&nbsp;xPos&nbsp;+&nbsp;tmp_pos(3)&nbsp;+&nbsp;fieldSep;</td></tr>
<tr><td>4089</td><td bgcolor="#FF0000">h&nbsp;=&nbsp;uicontrol(cstPanel,'Style','popupmenu','String',cst(:,2)','Units','normalized','Position',[xPos&nbsp;ypos(cnt)&nbsp;nameW&nbsp;objHeight]);</td></tr>
<tr><td>4090</td><td bgcolor="#FF0000">set(hAdd,'UserData',h);</td></tr>
<tr><td>4091</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4092</td><td bgcolor="#FFFFFF">%Calculate&nbsp;Scrollbar&nbsp;/&nbsp;Slider&nbsp;Position</td></tr>
<tr><td>4093</td><td bgcolor="#FF0000">lastPos&nbsp;=&nbsp;ypos(cnt);</td></tr>
<tr><td>4094</td><td bgcolor="#FF0000">firstPos&nbsp;=&nbsp;ypos(0);</td></tr>
<tr><td>4095</td><td bgcolor="#FF0000">tableHeight&nbsp;=&nbsp;abs(firstPos&nbsp;-&nbsp;lastPos);</td></tr>
<tr><td>4096</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4097</td><td bgcolor="#FF0000">exceedFac&nbsp;=&nbsp;tableHeight&nbsp;/&nbsp;tableViewHeight;&nbsp;%How&nbsp;much&nbsp;the&nbsp;current&nbsp;umber&nbsp;of&nbsp;rows&nbsp;exceeds&nbsp;the&nbsp;window&nbsp;height&nbsp;capacity</td></tr>
<tr><td>4098</td><td bgcolor="#FF0000">if&nbsp;exceedFac&nbsp;&gt;&nbsp;1</td></tr>
<tr><td>4099</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;sliderFac&nbsp;=&nbsp;exceedFac&nbsp;-&nbsp;1;&nbsp;</td></tr>
<tr><td>4100</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;uicontrol(cstPanel,'Style','slider','Units','normalized','Position',[0.975&nbsp;0&nbsp;0.025&nbsp;1],'Min',0,'Max',ceil(sliderFac)*tableViewHeight,'SliderStep',[lineHeight&nbsp;tableViewHeight]&nbsp;./&nbsp;(ceil(sliderFac)*tableViewHeight),'Value',ceil(sliderFac)*tableViewHeight&nbsp;-&nbsp;sliderPos,'Callback',{@cstTableSlider_Callback,handles});</td></tr>
<tr><td>4101</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4102</td><td bgcolor="#FFFFFF">&nbsp;</td></tr>
<tr><td>4103</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4104</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;when&nbsp;uipanel3&nbsp;is&nbsp;resized.</td></tr>
<tr><td>4105</td><td bgcolor="#FFFFFF">function&nbsp;uipanel3_SizeChangedFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>4106</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;uipanel3&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>4107</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4108</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4109</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4110</td><td bgcolor="#FF0000">try</td></tr>
<tr><td>4111</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;generateCstTable(handles,evalin('base','cst'));</td></tr>
<tr><td>4112</td><td bgcolor="#FF0000">catch</td></tr>
<tr><td>4113</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4114</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4115</td><td bgcolor="#FFFFFF">function&nbsp;btObjAdd_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>4116</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btObjAdd</td></tr>
<tr><td>4117</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4118</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4119</td><td bgcolor="#FF0000">popupHandle&nbsp;=&nbsp;hObject.UserData;</td></tr>
<tr><td>4120</td><td bgcolor="#FF0000">cstIndex&nbsp;=&nbsp;popupHandle.Value;</td></tr>
<tr><td>4121</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4122</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>4123</td><td bgcolor="#FFFFFF">%Add&nbsp;Standard&nbsp;Objective</td></tr>
<tr><td>4124</td><td bgcolor="#FF0000">if&nbsp;strcmp(cst{cstIndex,3},'TARGET')</td></tr>
<tr><td>4125</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{cstIndex,6}{end+1}&nbsp;=&nbsp;struct(DoseObjectives.matRad_SquaredDeviation);</td></tr>
<tr><td>4126</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>4127</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{cstIndex,6}{end+1}&nbsp;=&nbsp;struct(DoseObjectives.matRad_SquaredOverdosing);</td></tr>
<tr><td>4128</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4129</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4130</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>4131</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4132</td><td bgcolor="#FF0000">generateCstTable(handles,cst);</td></tr>
<tr><td>4133</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4134</td><td bgcolor="#FFFFFF">function&nbsp;btObjRemove_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>4135</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;btObjRemove&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>4136</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4137</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4138</td><td bgcolor="#FF0000">ix&nbsp;=&nbsp;hObject.UserData;</td></tr>
<tr><td>4139</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4140</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>4141</td><td bgcolor="#FFFFFF">%Add&nbsp;Standard&nbsp;Objective</td></tr>
<tr><td>4142</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4143</td><td bgcolor="#FF0000">cst{ix(1),6}(ix(2))&nbsp;=&nbsp;[];</td></tr>
<tr><td>4144</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4145</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>4146</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4147</td><td bgcolor="#FF0000">generateCstTable(handles,cst);</td></tr>
<tr><td>4148</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4149</td><td bgcolor="#FFFFFF">function&nbsp;editObjParam_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>4150</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;current&nbsp;objective&nbsp;parameter</td></tr>
<tr><td>4151</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4152</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4153</td><td bgcolor="#FF0000">ix&nbsp;=&nbsp;hObject.UserData;</td></tr>
<tr><td>4154</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4155</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>4156</td><td bgcolor="#FFFFFF">%Add&nbsp;Standard&nbsp;Objective</td></tr>
<tr><td>4157</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4158</td><td bgcolor="#FFFFFF">%if&nbsp;the&nbsp;third&nbsp;index&nbsp;is&nbsp;0&nbsp;we&nbsp;changed&nbsp;the&nbsp;penalty</td></tr>
<tr><td>4159</td><td bgcolor="#FFFFFF">%if&nbsp;we&nbsp;have&nbsp;a&nbsp;popupmenu&nbsp;selection&nbsp;we&nbsp;use&nbsp;value</td></tr>
<tr><td>4160</td><td bgcolor="#FFFFFF">%otherwise&nbsp;we&nbsp;use&nbsp;the&nbsp;edit&nbsp;string</td></tr>
<tr><td>4161</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4162</td><td bgcolor="#FF0000">if&nbsp;ix(3)&nbsp;==&nbsp;0</td></tr>
<tr><td>4163</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{ix(1),6}{ix(2)}.penalty&nbsp;=&nbsp;str2double(hObject.String);</td></tr>
<tr><td>4164</td><td bgcolor="#FFFFFF">elseif&nbsp;isequal(hObject.Style,'popupmenu')</td></tr>
<tr><td>4165</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{ix(1),6}{ix(2)}.parameters{ix(3)}&nbsp;=&nbsp;hObject.Value;</td></tr>
<tr><td>4166</td><td bgcolor="#FFFFFF">else</td></tr>
<tr><td>4167</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{ix(1),6}{ix(2)}.parameters{ix(3)}&nbsp;=&nbsp;str2double(hObject.String);</td></tr>
<tr><td>4168</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4169</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4170</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>4171</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4172</td><td bgcolor="#FF0000">generateCstTable(handles,cst);</td></tr>
<tr><td>4173</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4174</td><td bgcolor="#FFFFFF">function&nbsp;changeObjFunction_Callback(hObject,&nbsp;~,&nbsp;handles)</td></tr>
<tr><td>4175</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;objective&nbsp;popup&nbsp;</td></tr>
<tr><td>4176</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4177</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4178</td><td bgcolor="#FF0000">data&nbsp;=&nbsp;hObject.UserData;</td></tr>
<tr><td>4179</td><td bgcolor="#FF0000">ix&nbsp;=&nbsp;data{1};</td></tr>
<tr><td>4180</td><td bgcolor="#FF0000">classNames&nbsp;=&nbsp;data{2};</td></tr>
<tr><td>4181</td><td bgcolor="#FF0000">classToCreate&nbsp;=&nbsp;classNames{hObject.Value};</td></tr>
<tr><td>4182</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4183</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>4184</td><td bgcolor="#FFFFFF">%Add&nbsp;Standard&nbsp;Objective</td></tr>
<tr><td>4185</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4186</td><td bgcolor="#FFFFFF">%We&nbsp;just&nbsp;check&nbsp;if&nbsp;the&nbsp;user&nbsp;really&nbsp;wanted&nbsp;to&nbsp;change&nbsp;the&nbsp;objective&nbsp;to&nbsp;be</td></tr>
<tr><td>4187</td><td bgcolor="#FFFFFF">%user-friendly</td></tr>
<tr><td>4188</td><td bgcolor="#FF0000">currentObj&nbsp;=&nbsp;cst{ix(1),6}{ix(2)};</td></tr>
<tr><td>4189</td><td bgcolor="#FF0000">currentClass&nbsp;=&nbsp;class(currentObj);</td></tr>
<tr><td>4190</td><td bgcolor="#FF0000">if&nbsp;~strcmp(currentClass,classToCreate)&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4191</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;newObj&nbsp;=&nbsp;eval(classToCreate);</td></tr>
<tr><td>4192</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4193</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;Only&nbsp;if&nbsp;we&nbsp;have&nbsp;a&nbsp;penalty&nbsp;value&nbsp;for&nbsp;optimization,&nbsp;apply&nbsp;the&nbsp;new&nbsp;one</td></tr>
<tr><td>4194</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;Maybe&nbsp;this&nbsp;check&nbsp;should&nbsp;be&nbsp;more&nbsp;exact?&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4195</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(isfield(currentObj,'penalty')&nbsp;||&nbsp;isprop(currentObj,'penalty'))&nbsp;&amp;&amp;&nbsp;isprop(newObj,'penalty')</td></tr>
<tr><td>4196</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;newObj.penalty&nbsp;=&nbsp;currentObj.penalty;</td></tr>
<tr><td>4197</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4198</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4199</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;cst{ix(1),6}{ix(2)}&nbsp;=&nbsp;struct(newObj);</td></tr>
<tr><td>4200</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4201</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;assignin('base','cst',cst);&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4202</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4203</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;generateCstTable(handles,cst);</td></tr>
<tr><td>4204</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4205</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4206</td><td bgcolor="#FFFFFF">function&nbsp;editCstParams_Callback(hObject,~,handles)</td></tr>
<tr><td>4207</td><td bgcolor="#FF0000">data&nbsp;=&nbsp;hObject.UserData;</td></tr>
<tr><td>4208</td><td bgcolor="#FF0000">ix&nbsp;=&nbsp;data(1);</td></tr>
<tr><td>4209</td><td bgcolor="#FF0000">col&nbsp;=&nbsp;data(2);</td></tr>
<tr><td>4210</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4211</td><td bgcolor="#FF0000">cst&nbsp;=&nbsp;evalin('base','cst');</td></tr>
<tr><td>4212</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4213</td><td bgcolor="#FF0000">switch&nbsp;col</td></tr>
<tr><td>4214</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;2</td></tr>
<tr><td>4215</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{ix,col}&nbsp;=&nbsp;hObject.String;</td></tr>
<tr><td>4216</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;3</td></tr>
<tr><td>4217</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{ix,col}&nbsp;=&nbsp;hObject.String{hObject.Value};</td></tr>
<tr><td>4218</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;5</td></tr>
<tr><td>4219</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cst{ix,col}.Priority&nbsp;=&nbsp;uint32(str2double(hObject.String));</td></tr>
<tr><td>4220</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;otherwise</td></tr>
<tr><td>4221</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;warning('Wrong&nbsp;column&nbsp;assignment&nbsp;in&nbsp;GUI&nbsp;based&nbsp;cst&nbsp;setting');</td></tr>
<tr><td>4222</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4223</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4224</td><td bgcolor="#FF0000">assignin('base','cst',cst);</td></tr>
<tr><td>4225</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4226</td><td bgcolor="#FF0000">generateCstTable(handles,cst);</td></tr>
<tr><td>4227</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4228</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4229</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;button&nbsp;press&nbsp;in&nbsp;radiobutton3Dconf.</td></tr>
<tr><td>4230</td><td bgcolor="#FFFFFF">function&nbsp;radiobutton3Dconf_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>4231</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;radiobutton3Dconf&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>4232</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4233</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4234</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4235</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;toggle&nbsp;state&nbsp;of&nbsp;radiobutton3Dconf</td></tr>
<tr><td>4236</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4237</td><td bgcolor="#FFFFFF">function&nbsp;x&nbsp;=&nbsp;matRad_checkForConnectedBixelRows(stf)</td></tr>
<tr><td>4238</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4239</td><td bgcolor="#FF0000">x&nbsp;=&nbsp;true;</td></tr>
<tr><td>4240</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4241</td><td bgcolor="#FF0000">for&nbsp;i&nbsp;=&nbsp;1:size(stf,2)</td></tr>
<tr><td>4242</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4243</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;bixelPos&nbsp;=&nbsp;reshape([stf(i).ray.rayPos_bev],3,[]);</td></tr>
<tr><td>4244</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4245</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;rowCoords&nbsp;=&nbsp;unique(bixelPos(3,:));</td></tr>
<tr><td>4246</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4247</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;j&nbsp;=&nbsp;1:numel(rowCoords)</td></tr>
<tr><td>4248</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4249</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;increments&nbsp;=&nbsp;diff(bixelPos(1,rowCoords(j)&nbsp;==&nbsp;bixelPos(3,:)));</td></tr>
<tr><td>4250</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4251</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&nbsp;if&nbsp;we&nbsp;find&nbsp;one&nbsp;not&nbsp;connected&nbsp;row&nbsp;-&gt;&nbsp;return&nbsp;false</td></tr>
<tr><td>4252</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;numel(unique(increments))&nbsp;&gt;&nbsp;1</td></tr>
<tr><td>4253</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x&nbsp;=&nbsp;false;</td></tr>
<tr><td>4254</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;</td></tr>
<tr><td>4255</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4256</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;end</td></tr>
<tr><td>4257</td><td bgcolor="#FFFFFF">&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td>4258</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4259</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4260</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;on&nbsp;slider&nbsp;movement.</td></tr>
<tr><td>4261</td><td bgcolor="#FFFFFF">function&nbsp;cstTableSlider_Callback(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>4262</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;cstTableSlider&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>4263</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4264</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;structure&nbsp;with&nbsp;handles&nbsp;and&nbsp;user&nbsp;data&nbsp;(see&nbsp;GUIDATA)</td></tr>
<tr><td>4265</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4266</td><td bgcolor="#FFFFFF">%&nbsp;Hints:&nbsp;get(hObject,'Value')&nbsp;returns&nbsp;position&nbsp;of&nbsp;slider</td></tr>
<tr><td>4267</td><td bgcolor="#FFFFFF">%&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get(hObject,'Min')&nbsp;and&nbsp;get(hObject,'Max')&nbsp;to&nbsp;determine&nbsp;range&nbsp;of&nbsp;slider</td></tr>
<tr><td>4268</td><td bgcolor="#FF0000">generateCstTable(handles,evalin('base','cst'));</td></tr>
<tr><td>4269</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4270</td><td bgcolor="#FFFFFF">%&nbsp;---&nbsp;Executes&nbsp;during&nbsp;object&nbsp;creation,&nbsp;after&nbsp;setting&nbsp;all&nbsp;properties.</td></tr>
<tr><td>4271</td><td bgcolor="#FFFFFF">function&nbsp;cstTableSlider_CreateFcn(hObject,&nbsp;eventdata,&nbsp;handles)</td></tr>
<tr><td>4272</td><td bgcolor="#FFFFFF">%&nbsp;hObject&nbsp;&nbsp;&nbsp;&nbsp;handle&nbsp;to&nbsp;cstTableSlider&nbsp;(see&nbsp;GCBO)</td></tr>
<tr><td>4273</td><td bgcolor="#FFFFFF">%&nbsp;eventdata&nbsp;&nbsp;reserved&nbsp;-&nbsp;to&nbsp;be&nbsp;defined&nbsp;in&nbsp;a&nbsp;future&nbsp;version&nbsp;of&nbsp;MATLAB</td></tr>
<tr><td>4274</td><td bgcolor="#FFFFFF">%&nbsp;handles&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;-&nbsp;handles&nbsp;not&nbsp;created&nbsp;until&nbsp;after&nbsp;all&nbsp;CreateFcns&nbsp;called</td></tr>
<tr><td>4275</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4276</td><td bgcolor="#FFFFFF">%&nbsp;Hint:&nbsp;slider&nbsp;controls&nbsp;usually&nbsp;have&nbsp;a&nbsp;light&nbsp;gray&nbsp;background.</td></tr>
<tr><td>4277</td><td bgcolor="#FF0000">if&nbsp;isequal(get(hObject,'BackgroundColor'),&nbsp;get(0,'defaultUicontrolBackgroundColor'))</td></tr>
<tr><td>4278</td><td bgcolor="#FF0000">&nbsp;&nbsp;&nbsp;&nbsp;set(hObject,'BackgroundColor',[.9&nbsp;.9&nbsp;.9]);</td></tr>
<tr><td>4279</td><td bgcolor="#FFFFFF">end</td></tr>
<tr><td>4280</td><td bgcolor="#FFFFFF"></td></tr>
<tr><td>4281</td><td bgcolor="#FFFFFF"></td></tr>
</table></p></body></html>